"use strict";var dd=Object.create;var xr=Object.defineProperty;var ld=Object.getOwnPropertyDescriptor;var pd=Object.getOwnPropertyNames;var md=Object.getPrototypeOf,hd=Object.prototype.hasOwnProperty;var Ge=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),yd=(e,n)=>{for(var i in n)xr(e,i,{get:n[i],enumerable:!0})},cc=(e,n,i,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of pd(n))!hd.call(e,r)&&r!==i&&xr(e,r,{get:()=>n[r],enumerable:!(t=ld(n,r))||t.enumerable});return e};var ce=(e,n,i)=>(i=e!=null?dd(md(e)):{},cc(n||!e||!e.__esModule?xr(i,"default",{value:e,enumerable:!0}):i,e)),bd=e=>cc(xr({},"__esModule",{value:!0}),e);var fc=Ge(($p,sc)=>{"use strict";sc.exports=xd;function xd(e,n){for(var i=new Array(arguments.length-1),t=0,r=2,o=!0;r<arguments.length;)i[t++]=arguments[r++];return new Promise(function(c,a){i[t]=function(E){if(o)if(o=!1,E)a(E);else{for(var N=new Array(arguments.length-1),A=0;A<N.length;)N[A++]=arguments[A];c.apply(null,N)}};try{e.apply(n||null,i)}catch(u){o&&(o=!1,a(u))}})}});var pc=Ge(lc=>{"use strict";var Er=lc;Er.length=function(n){var i=n.length;if(!i)return 0;for(var t=0;--i%4>1&&n.charAt(i)==="=";)++t;return Math.ceil(n.length*3)/4-t};var Ln=new Array(64),dc=new Array(123);for(At=0;At<64;)dc[Ln[At]=At<26?At+65:At<52?At+71:At<62?At-4:At-59|43]=At++;var At;Er.encode=function(n,i,t){for(var r=null,o=[],s=0,c=0,a;i<t;){var u=n[i++];switch(c){case 0:o[s++]=Ln[u>>2],a=(u&3)<<4,c=1;break;case 1:o[s++]=Ln[a|u>>4],a=(u&15)<<2,c=2;break;case 2:o[s++]=Ln[a|u>>6],o[s++]=Ln[u&63],c=0;break}s>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,o)),s=0)}return c&&(o[s++]=Ln[a],o[s++]=61,c===1&&(o[s++]=61)),r?(s&&r.push(String.fromCharCode.apply(String,o.slice(0,s))),r.join("")):String.fromCharCode.apply(String,o.slice(0,s))};var uc="invalid encoding";Er.decode=function(n,i,t){for(var r=t,o=0,s,c=0;c<n.length;){var a=n.charCodeAt(c++);if(a===61&&o>1)break;if((a=dc[a])===void 0)throw Error(uc);switch(o){case 0:s=a,o=1;break;case 1:i[t++]=s<<2|(a&48)>>4,s=a,o=2;break;case 2:i[t++]=(s&15)<<4|(a&60)>>2,s=a,o=3;break;case 3:i[t++]=(s&3)<<6|a,o=0;break}}if(o===1)throw Error(uc);return t-r};Er.test=function(n){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(n)}});var hc=Ge((Jp,mc)=>{"use strict";mc.exports=Tr;function Tr(){this._listeners={}}Tr.prototype.on=function(n,i,t){return(this._listeners[n]||(this._listeners[n]=[])).push({fn:i,ctx:t||this}),this};Tr.prototype.off=function(n,i){if(n===void 0)this._listeners={};else if(i===void 0)this._listeners[n]=[];else for(var t=this._listeners[n],r=0;r<t.length;)t[r].fn===i?t.splice(r,1):++r;return this};Tr.prototype.emit=function(n){var i=this._listeners[n];if(i){for(var t=[],r=1;r<arguments.length;)t.push(arguments[r++]);for(r=0;r<i.length;)i[r].fn.apply(i[r++].ctx,t)}return this}});var _c=Ge((Zp,gc)=>{"use strict";gc.exports=yc(yc);function yc(e){return typeof Float32Array<"u"?function(){var n=new Float32Array([-0]),i=new Uint8Array(n.buffer),t=i[3]===128;function r(a,u,E){n[0]=a,u[E]=i[0],u[E+1]=i[1],u[E+2]=i[2],u[E+3]=i[3]}function o(a,u,E){n[0]=a,u[E]=i[3],u[E+1]=i[2],u[E+2]=i[1],u[E+3]=i[0]}e.writeFloatLE=t?r:o,e.writeFloatBE=t?o:r;function s(a,u){return i[0]=a[u],i[1]=a[u+1],i[2]=a[u+2],i[3]=a[u+3],n[0]}function c(a,u){return i[3]=a[u],i[2]=a[u+1],i[1]=a[u+2],i[0]=a[u+3],n[0]}e.readFloatLE=t?s:c,e.readFloatBE=t?c:s}():function(){function n(t,r,o,s){var c=r<0?1:0;if(c&&(r=-r),r===0)t(1/r>0?0:2147483648,o,s);else if(isNaN(r))t(2143289344,o,s);else if(r>34028234663852886e22)t((c<<31|2139095040)>>>0,o,s);else if(r<11754943508222875e-54)t((c<<31|Math.round(r/1401298464324817e-60))>>>0,o,s);else{var a=Math.floor(Math.log(r)/Math.LN2),u=Math.round(r*Math.pow(2,-a)*8388608)&8388607;t((c<<31|a+127<<23|u)>>>0,o,s)}}e.writeFloatLE=n.bind(null,bc),e.writeFloatBE=n.bind(null,xc);function i(t,r,o){var s=t(r,o),c=(s>>31)*2+1,a=s>>>23&255,u=s&8388607;return a===255?u?NaN:c*(1/0):a===0?c*1401298464324817e-60*u:c*Math.pow(2,a-150)*(u+8388608)}e.readFloatLE=i.bind(null,Ec),e.readFloatBE=i.bind(null,Tc)}(),typeof Float64Array<"u"?function(){var n=new Float64Array([-0]),i=new Uint8Array(n.buffer),t=i[7]===128;function r(a,u,E){n[0]=a,u[E]=i[0],u[E+1]=i[1],u[E+2]=i[2],u[E+3]=i[3],u[E+4]=i[4],u[E+5]=i[5],u[E+6]=i[6],u[E+7]=i[7]}function o(a,u,E){n[0]=a,u[E]=i[7],u[E+1]=i[6],u[E+2]=i[5],u[E+3]=i[4],u[E+4]=i[3],u[E+5]=i[2],u[E+6]=i[1],u[E+7]=i[0]}e.writeDoubleLE=t?r:o,e.writeDoubleBE=t?o:r;function s(a,u){return i[0]=a[u],i[1]=a[u+1],i[2]=a[u+2],i[3]=a[u+3],i[4]=a[u+4],i[5]=a[u+5],i[6]=a[u+6],i[7]=a[u+7],n[0]}function c(a,u){return i[7]=a[u],i[6]=a[u+1],i[5]=a[u+2],i[4]=a[u+3],i[3]=a[u+4],i[2]=a[u+5],i[1]=a[u+6],i[0]=a[u+7],n[0]}e.readDoubleLE=t?s:c,e.readDoubleBE=t?c:s}():function(){function n(t,r,o,s,c,a){var u=s<0?1:0;if(u&&(s=-s),s===0)t(0,c,a+r),t(1/s>0?0:2147483648,c,a+o);else if(isNaN(s))t(0,c,a+r),t(2146959360,c,a+o);else if(s>17976931348623157e292)t(0,c,a+r),t((u<<31|2146435072)>>>0,c,a+o);else{var E;if(s<22250738585072014e-324)E=s/5e-324,t(E>>>0,c,a+r),t((u<<31|E/4294967296)>>>0,c,a+o);else{var N=Math.floor(Math.log(s)/Math.LN2);N===1024&&(N=1023),E=s*Math.pow(2,-N),t(E*4503599627370496>>>0,c,a+r),t((u<<31|N+1023<<20|E*1048576&1048575)>>>0,c,a+o)}}}e.writeDoubleLE=n.bind(null,bc,0,4),e.writeDoubleBE=n.bind(null,xc,4,0);function i(t,r,o,s,c){var a=t(s,c+r),u=t(s,c+o),E=(u>>31)*2+1,N=u>>>20&2047,A=4294967296*(u&1048575)+a;return N===2047?A?NaN:E*(1/0):N===0?E*5e-324*A:E*Math.pow(2,N-1075)*(A+4503599627370496)}e.readDoubleLE=i.bind(null,Ec,0,4),e.readDoubleBE=i.bind(null,Tc,4,0)}(),e}function bc(e,n,i){n[i]=e&255,n[i+1]=e>>>8&255,n[i+2]=e>>>16&255,n[i+3]=e>>>24}function xc(e,n,i){n[i]=e>>>24,n[i+1]=e>>>16&255,n[i+2]=e>>>8&255,n[i+3]=e&255}function Ec(e,n){return(e[n]|e[n+1]<<8|e[n+2]<<16|e[n+3]<<24)>>>0}function Tc(e,n){return(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3])>>>0}});var kc=Ge((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}});var gr=Ge(Rc=>{"use strict";var ca=Rc;ca.length=function(n){for(var i=0,t=0,r=0;r<n.length;++r)t=n.charCodeAt(r),t<128?i+=1:t<2048?i+=2:(t&64512)===55296&&(n.charCodeAt(r+1)&64512)===56320?(++r,i+=4):i+=3;return i};ca.read=function(n,i,t){var r=t-i;if(r<1)return"";for(var o=null,s=[],c=0,a;i<t;)a=n[i++],a<128?s[c++]=a:a>191&&a<224?s[c++]=(a&31)<<6|n[i++]&63:a>239&&a<365?(a=((a&7)<<18|(n[i++]&63)<<12|(n[i++]&63)<<6|n[i++]&63)-65536,s[c++]=55296+(a>>10),s[c++]=56320+(a&1023)):s[c++]=(a&15)<<12|(n[i++]&63)<<6|n[i++]&63,c>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),c=0);return o?(c&&o.push(String.fromCharCode.apply(String,s.slice(0,c))),o.join("")):String.fromCharCode.apply(String,s.slice(0,c))};ca.write=function(n,i,t){for(var r=t,o,s,c=0;c<n.length;++c)o=n.charCodeAt(c),o<128?i[t++]=o:o<2048?(i[t++]=o>>6|192,i[t++]=o&63|128):(o&64512)===55296&&((s=n.charCodeAt(c+1))&64512)===56320?(o=65536+((o&1023)<<10)+(s&1023),++c,i[t++]=o>>18|240,i[t++]=o>>12&63|128,i[t++]=o>>6&63|128,i[t++]=o&63|128):(i[t++]=o>>12|224,i[t++]=o>>6&63|128,i[t++]=o&63|128);return t-r}});var wc=Ge((Xp,Sc)=>{"use strict";Sc.exports=Ed;function Ed(e,n,i){var t=i||8192,r=t>>>1,o=null,s=t;return function(a){if(a<1||a>r)return e(a);s+a>t&&(o=e(t),s=0);var u=n.call(o,s,s+=a);return s&7&&(s=(s|7)+1),u}}});var Ic=Ge((Kp,Ac)=>{"use strict";Ac.exports=je;var Go=Kt();function je(e,n){this.lo=e>>>0,this.hi=n>>>0}var kn=je.zero=new je(0,0);kn.toNumber=function(){return 0};kn.zzEncode=kn.zzDecode=function(){return this};kn.length=function(){return 1};var Td=je.zeroHash="\0\0\0\0\0\0\0\0";je.fromNumber=function(n){if(n===0)return kn;var i=n<0;i&&(n=-n);var t=n>>>0,r=(n-t)/4294967296>>>0;return i&&(r=~r>>>0,t=~t>>>0,++t>4294967295&&(t=0,++r>4294967295&&(r=0))),new je(t,r)};je.from=function(n){if(typeof n=="number")return je.fromNumber(n);if(Go.isString(n))if(Go.Long)n=Go.Long.fromString(n);else return je.fromNumber(parseInt(n,10));return n.low||n.high?new je(n.low>>>0,n.high>>>0):kn};je.prototype.toNumber=function(n){if(!n&&this.hi>>>31){var i=~this.lo+1>>>0,t=~this.hi>>>0;return i||(t=t+1>>>0),-(i+t*4294967296)}return this.lo+this.hi*4294967296};je.prototype.toLong=function(n){return Go.Long?new Go.Long(this.lo|0,this.hi|0,!!n):{low:this.lo|0,high:this.hi|0,unsigned:!!n}};var Xt=String.prototype.charCodeAt;je.fromHash=function(n){return n===Td?kn:new je((Xt.call(n,0)|Xt.call(n,1)<<8|Xt.call(n,2)<<16|Xt.call(n,3)<<24)>>>0,(Xt.call(n,4)|Xt.call(n,5)<<8|Xt.call(n,6)<<16|Xt.call(n,7)<<24)>>>0)};je.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};je.prototype.zzEncode=function(){var n=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^n)>>>0,this.lo=(this.lo<<1^n)>>>0,this};je.prototype.zzDecode=function(){var n=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^n)>>>0,this.hi=(this.hi>>>1^n)>>>0,this};je.prototype.length=function(){var n=this.lo,i=(this.lo>>>28|this.hi<<4)>>>0,t=this.hi>>>24;return t===0?i===0?n<16384?n<128?1:2:n<2097152?3:4:i<16384?i<128?5:6:i<2097152?7:8:t<128?9:10}});var Kt=Ge(sa=>{"use strict";var Q=sa;Q.asPromise=fc();Q.base64=pc();Q.EventEmitter=hc();Q.float=_c();Q.inquire=kc();Q.utf8=gr();Q.pool=wc();Q.LongBits=Ic();Q.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);Q.global=Q.isNode&&global||!1||typeof self<"u"&&self||sa;Q.emptyArray=Object.freeze?Object.freeze([]):[];Q.emptyObject=Object.freeze?Object.freeze({}):{};Q.isInteger=Number.isInteger||function(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n};Q.isString=function(n){return typeof n=="string"||n instanceof String};Q.isObject=function(n){return n&&typeof n=="object"};Q.isset=Q.isSet=function(n,i){var t=n[i];return t!=null&&n.hasOwnProperty(i)?typeof t!="object"||(Array.isArray(t)?t.length:Object.keys(t).length)>0:!1};Q.Buffer=function(){try{var e=Q.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch{return null}}();Q._Buffer_from=null;Q._Buffer_allocUnsafe=null;Q.newBuffer=function(n){return typeof n=="number"?Q.Buffer?Q._Buffer_allocUnsafe(n):new Q.Array(n):Q.Buffer?Q._Buffer_from(n):typeof Uint8Array>"u"?n:new Uint8Array(n)};Q.Array=typeof Uint8Array<"u"?Uint8Array:Array;Q.Long=Q.global.dcodeIO&&Q.global.dcodeIO.Long||Q.global.Long||Q.inquire("long");Q.key2Re=/^true|false|0|1$/;Q.key32Re=/^-?(?:0|[1-9][0-9]*)$/;Q.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;Q.longToHash=function(n){return n?Q.LongBits.from(n).toHash():Q.LongBits.zeroHash};Q.longFromHash=function(n,i){var t=Q.LongBits.fromHash(n);return Q.Long?Q.Long.fromBits(t.lo,t.hi,i):t.toNumber(!!i)};function Nc(e,n,i){for(var t=Object.keys(n),r=0;r<t.length;++r)(e[t[r]]===void 0||!i)&&(e[t[r]]=n[t[r]]);return e}Q.merge=Nc;Q.lcFirst=function(n){return n.charAt(0).toLowerCase()+n.substring(1)};function Oc(e){function n(i,t){if(!(this instanceof n))return new n(i,t);Object.defineProperty(this,"message",{get:function(){return i}}),Error.captureStackTrace?Error.captureStackTrace(this,n):Object.defineProperty(this,"stack",{value:new Error().stack||""}),t&&Nc(this,t)}return n.prototype=Object.create(Error.prototype,{constructor:{value:n,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),n}Q.newError=Oc;Q.ProtocolError=Oc("ProtocolError");Q.oneOfGetter=function(n){for(var i={},t=0;t<n.length;++t)i[n[t]]=1;return function(){for(var r=Object.keys(this),o=r.length-1;o>-1;--o)if(i[r[o]]===1&&this[r[o]]!==void 0&&this[r[o]]!==null)return r[o]}};Q.oneOfSetter=function(n){return function(i){for(var t=0;t<n.length;++t)n[t]!==i&&delete this[n[t]]}};Q.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};Q._configure=function(){var e=Q.Buffer;if(!e){Q._Buffer_from=Q._Buffer_allocUnsafe=null;return}Q._Buffer_from=e.from!==Uint8Array.from&&e.from||function(i,t){return new e(i,t)},Q._Buffer_allocUnsafe=e.allocUnsafe||function(i){return new e(i)}}});var ha=Ge((em,zc)=>{"use strict";zc.exports=ye;var xt=Kt(),fa,_r=xt.LongBits,Bc=xt.base64,Cc=xt.utf8;function jo(e,n,i){this.fn=e,this.len=n,this.next=void 0,this.val=i}function da(){}function gd(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function ye(){this.len=0,this.head=new jo(da,0,0),this.tail=this.head,this.states=null}var Pc=function(){return xt.Buffer?function(){return(ye.create=function(){return new fa})()}:function(){return new ye}};ye.create=Pc();ye.alloc=function(n){return new xt.Array(n)};xt.Array!==Array&&(ye.alloc=xt.pool(ye.alloc,xt.Array.prototype.subarray));ye.prototype._push=function(n,i,t){return this.tail=this.tail.next=new jo(n,i,t),this.len+=i,this};function la(e,n,i){n[i]=e&255}function _d(e,n,i){for(;e>127;)n[i++]=e&127|128,e>>>=7;n[i]=e}function pa(e,n){this.len=e,this.next=void 0,this.val=n}pa.prototype=Object.create(jo.prototype);pa.prototype.fn=_d;ye.prototype.uint32=function(n){return this.len+=(this.tail=this.tail.next=new pa((n=n>>>0)<128?1:n<16384?2:n<2097152?3:n<268435456?4:5,n)).len,this};ye.prototype.int32=function(n){return n<0?this._push(ma,10,_r.fromNumber(n)):this.uint32(n)};ye.prototype.sint32=function(n){return this.uint32((n<<1^n>>31)>>>0)};function ma(e,n,i){for(;e.hi;)n[i++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)n[i++]=e.lo&127|128,e.lo=e.lo>>>7;n[i++]=e.lo}ye.prototype.uint64=function(n){var i=_r.from(n);return this._push(ma,i.length(),i)};ye.prototype.int64=ye.prototype.uint64;ye.prototype.sint64=function(n){var i=_r.from(n).zzEncode();return this._push(ma,i.length(),i)};ye.prototype.bool=function(n){return this._push(la,1,n?1:0)};function ua(e,n,i){n[i]=e&255,n[i+1]=e>>>8&255,n[i+2]=e>>>16&255,n[i+3]=e>>>24}ye.prototype.fixed32=function(n){return this._push(ua,4,n>>>0)};ye.prototype.sfixed32=ye.prototype.fixed32;ye.prototype.fixed64=function(n){var i=_r.from(n);return this._push(ua,4,i.lo)._push(ua,4,i.hi)};ye.prototype.sfixed64=ye.prototype.fixed64;ye.prototype.float=function(n){return this._push(xt.float.writeFloatLE,4,n)};ye.prototype.double=function(n){return this._push(xt.float.writeDoubleLE,8,n)};var kd=xt.Array.prototype.set?function(n,i,t){i.set(n,t)}:function(n,i,t){for(var r=0;r<n.length;++r)i[t+r]=n[r]};ye.prototype.bytes=function(n){var i=n.length>>>0;if(!i)return this._push(la,1,0);if(xt.isString(n)){var t=ye.alloc(i=Bc.length(n));Bc.decode(n,t,0),n=t}return this.uint32(i)._push(kd,i,n)};ye.prototype.string=function(n){var i=Cc.length(n);return i?this.uint32(i)._push(Cc.write,i,n):this._push(la,1,0)};ye.prototype.fork=function(){return this.states=new gd(this),this.head=this.tail=new jo(da,0,0),this.len=0,this};ye.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new jo(da,0,0),this.len=0),this};ye.prototype.ldelim=function(){var n=this.head,i=this.tail,t=this.len;return this.reset().uint32(t),t&&(this.tail.next=n.next,this.tail=i,this.len+=t),this};ye.prototype.finish=function(){for(var n=this.head.next,i=this.constructor.alloc(this.len),t=0;n;)n.fn(n.val,i,t),t+=n.len,n=n.next;return i};ye._configure=function(e){fa=e,ye.create=Pc(),fa._configure()}});var Uc=Ge((tm,vc)=>{"use strict";vc.exports=Mt;var Mc=ha();(Mt.prototype=Object.create(Mc.prototype)).constructor=Mt;var Qt=Kt();function Mt(){Mc.call(this)}Mt._configure=function(){Mt.alloc=Qt._Buffer_allocUnsafe,Mt.writeBytesBuffer=Qt.Buffer&&Qt.Buffer.prototype instanceof Uint8Array&&Qt.Buffer.prototype.set.name==="set"?function(n,i,t){i.set(n,t)}:function(n,i,t){if(n.copy)n.copy(i,t,0,n.length);else for(var r=0;r<n.length;)i[t++]=n[r++]}};Mt.prototype.bytes=function(n){Qt.isString(n)&&(n=Qt._Buffer_from(n,"base64"));var i=n.length>>>0;return this.uint32(i),i&&this._push(Mt.writeBytesBuffer,i,n),this};function Rd(e,n,i){e.length<40?Qt.utf8.write(e,n,i):n.utf8Write?n.utf8Write(e,i):n.write(e,i)}Mt.prototype.string=function(n){var i=Qt.Buffer.byteLength(n);return this.uint32(i),i&&this._push(Rd,i,n),this};Mt._configure()});var xa=Ge((nm,Vc)=>{"use strict";Vc.exports=Fe;var It=Kt(),ba,Lc=It.LongBits,Sd=It.utf8;function Nt(e,n){return RangeError("index out of range: "+e.pos+" + "+(n||1)+" > "+e.len)}function Fe(e){this.buf=e,this.pos=0,this.len=e.length}var Dc=typeof Uint8Array<"u"?function(n){if(n instanceof Uint8Array||Array.isArray(n))return new Fe(n);throw Error("illegal buffer")}:function(n){if(Array.isArray(n))return new Fe(n);throw Error("illegal buffer")},Wc=function(){return It.Buffer?function(i){return(Fe.create=function(r){return It.Buffer.isBuffer(r)?new ba(r):Dc(r)})(i)}:Dc};Fe.create=Wc();Fe.prototype._slice=It.Array.prototype.subarray||It.Array.prototype.slice;Fe.prototype.uint32=function(){var n=4294967295;return function(){if(n=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(n=(n|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(n=(n|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(n=(n|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(n=(n|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return n;if((this.pos+=5)>this.len)throw this.pos=this.len,Nt(this,10);return n}}();Fe.prototype.int32=function(){return this.uint32()|0};Fe.prototype.sint32=function(){var n=this.uint32();return n>>>1^-(n&1)|0};function ya(){var e=new Lc(0,0),n=0;if(this.len-this.pos>4){for(;n<4;++n)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<n*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;n=0}else{for(;n<3;++n){if(this.pos>=this.len)throw Nt(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<n*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<n*7)>>>0,e}if(this.len-this.pos>4){for(;n<5;++n)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<n*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;n<5;++n){if(this.pos>=this.len)throw Nt(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<n*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}Fe.prototype.bool=function(){return this.uint32()!==0};function kr(e,n){return(e[n-4]|e[n-3]<<8|e[n-2]<<16|e[n-1]<<24)>>>0}Fe.prototype.fixed32=function(){if(this.pos+4>this.len)throw Nt(this,4);return kr(this.buf,this.pos+=4)};Fe.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Nt(this,4);return kr(this.buf,this.pos+=4)|0};function Fc(){if(this.pos+8>this.len)throw Nt(this,8);return new Lc(kr(this.buf,this.pos+=4),kr(this.buf,this.pos+=4))}Fe.prototype.float=function(){if(this.pos+4>this.len)throw Nt(this,4);var n=It.float.readFloatLE(this.buf,this.pos);return this.pos+=4,n};Fe.prototype.double=function(){if(this.pos+8>this.len)throw Nt(this,4);var n=It.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,n};Fe.prototype.bytes=function(){var n=this.uint32(),i=this.pos,t=this.pos+n;if(t>this.len)throw Nt(this,n);if(this.pos+=n,Array.isArray(this.buf))return this.buf.slice(i,t);if(i===t){var r=It.Buffer;return r?r.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,i,t)};Fe.prototype.string=function(){var n=this.bytes();return Sd.read(n,0,n.length)};Fe.prototype.skip=function(n){if(typeof n=="number"){if(this.pos+n>this.len)throw Nt(this,n);this.pos+=n}else do if(this.pos>=this.len)throw Nt(this);while(this.buf[this.pos++]&128);return this};Fe.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};Fe._configure=function(e){ba=e,Fe.create=Wc(),ba._configure();var n=It.Long?"toLong":"toNumber";It.merge(Fe.prototype,{int64:function(){return ya.call(this)[n](!1)},uint64:function(){return ya.call(this)[n](!0)},sint64:function(){return ya.call(this).zzDecode()[n](!1)},fixed64:function(){return Fc.call(this)[n](!0)},sfixed64:function(){return Fc.call(this)[n](!1)}})}});var $c=Ge((om,jc)=>{"use strict";jc.exports=Rn;var Gc=xa();(Rn.prototype=Object.create(Gc.prototype)).constructor=Rn;var Hc=Kt();function Rn(e){Gc.call(this,e)}Rn._configure=function(){Hc.Buffer&&(Rn.prototype._slice=Hc.Buffer.prototype.slice)};Rn.prototype.string=function(){var n=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+n,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+n,this.len))};Rn._configure()});var Jc=Ge((rm,Yc)=>{"use strict";Yc.exports=$o;var Ea=Kt();($o.prototype=Object.create(Ea.EventEmitter.prototype)).constructor=$o;function $o(e,n,i){if(typeof e!="function")throw TypeError("rpcImpl must be a function");Ea.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!n,this.responseDelimited=!!i}$o.prototype.rpcCall=function e(n,i,t,r,o){if(!r)throw TypeError("request must be specified");var s=this;if(!o)return Ea.asPromise(e,s,n,i,t,r);if(!s.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return s.rpcImpl(n,i[s.requestDelimited?"encodeDelimited":"encode"](r).finish(),function(a,u){if(a)return s.emit("error",a,n),o(a);if(u===null){s.end(!0);return}if(!(u instanceof t))try{u=t[s.responseDelimited?"decodeDelimited":"decode"](u)}catch(E){return s.emit("error",E,n),o(E)}return s.emit("data",u,n),o(null,u)})}catch(c){s.emit("error",c,n),setTimeout(function(){o(c)},0);return}};$o.prototype.end=function(n){return this.rpcImpl&&(n||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var qc=Ge(Zc=>{"use strict";var wd=Zc;wd.Service=Jc()});var Kc=Ge((am,Xc)=>{"use strict";Xc.exports={}});var ts=Ge(es=>{"use strict";var nt=es;nt.build="minimal";nt.Writer=ha();nt.BufferWriter=Uc();nt.Reader=xa();nt.BufferReader=$c();nt.util=Kt();nt.rpc=qc();nt.roots=Kc();nt.configure=Qc;function Qc(){nt.util._configure(),nt.Writer._configure(nt.BufferWriter),nt.Reader._configure(nt.BufferReader)}Qc()});var fe=Ge((sm,ns)=>{"use strict";ns.exports=ts()});var Gp={};yd(Gp,{addCommsTransport:()=>Wp,findNetworkId:()=>Ap,main:()=>ji,onStart:()=>Hp,onUpdate:()=>Vp,rendererTransport:()=>Yi});module.exports=bd(Gp);var Sn=ce(fe());function Ad(){return{states:[]}}var Wn;(function(e){function n(t,r=Sn.default.Writer.create()){for(let o of t.states)Rr.encode(o,r.uint32(10).fork()).ldelim();return r}e.encode=n;function i(t,r){let o=t instanceof Sn.default.Reader?t:Sn.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Ad();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.states.push(Rr.decode(o,o.uint32()));continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Wn||(Wn={}));function Id(){return{name:"",clip:"",playing:void 0,weight:void 0,speed:void 0,loop:void 0,shouldReset:void 0}}var Rr;(function(e){function n(t,r=Sn.default.Writer.create()){return t.name!==""&&r.uint32(10).string(t.name),t.clip!==""&&r.uint32(18).string(t.clip),t.playing!==void 0&&r.uint32(24).bool(t.playing),t.weight!==void 0&&r.uint32(37).float(t.weight),t.speed!==void 0&&r.uint32(45).float(t.speed),t.loop!==void 0&&r.uint32(48).bool(t.loop),t.shouldReset!==void 0&&r.uint32(56).bool(t.shouldReset),r}e.encode=n;function i(t,r){let o=t instanceof Sn.default.Reader?t:Sn.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Id();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.name=o.string();continue;case 2:if(a!==18)break;c.clip=o.string();continue;case 3:if(a!==24)break;c.playing=o.bool();continue;case 4:if(a!==37)break;c.weight=o.float();continue;case 5:if(a!==45)break;c.speed=o.float();continue;case 6:if(a!==48)break;c.loop=o.bool();continue;case 7:if(a!==56)break;c.shouldReset=o.bool();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Rr||(Rr={}));var os={COMPONENT_ID:1042,serialize(e,n){let i=Wn.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Wn.decode(e.buffer(),e.remainingBytes())},create(){return Wn.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBAnimator"}};var Sr=ce(fe());function Nd(){return{playing:void 0,volume:void 0,loop:void 0,pitch:void 0,audioClipUrl:""}}var Vn;(function(e){function n(t,r=Sr.default.Writer.create()){return t.playing!==void 0&&r.uint32(8).bool(t.playing),t.volume!==void 0&&r.uint32(21).float(t.volume),t.loop!==void 0&&r.uint32(24).bool(t.loop),t.pitch!==void 0&&r.uint32(37).float(t.pitch),t.audioClipUrl!==""&&r.uint32(42).string(t.audioClipUrl),r}e.encode=n;function i(t,r){let o=t instanceof Sr.default.Reader?t:Sr.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Nd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.playing=o.bool();continue;case 2:if(a!==21)break;c.volume=o.float();continue;case 3:if(a!==24)break;c.loop=o.bool();continue;case 4:if(a!==37)break;c.pitch=o.float();continue;case 5:if(a!==42)break;c.audioClipUrl=o.string();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Vn||(Vn={}));var rs={COMPONENT_ID:1020,serialize(e,n){let i=Vn.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Vn.decode(e.buffer(),e.remainingBytes())},create(){return Vn.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBAudioSource"}};var wr=ce(fe());function Od(){return{playing:void 0,volume:void 0,url:""}}var Hn;(function(e){function n(t,r=wr.default.Writer.create()){return t.playing!==void 0&&r.uint32(8).bool(t.playing),t.volume!==void 0&&r.uint32(21).float(t.volume),t.url!==""&&r.uint32(26).string(t.url),r}e.encode=n;function i(t,r){let o=t instanceof wr.default.Reader?t:wr.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Od();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.playing=o.bool();continue;case 2:if(a!==21)break;c.volume=o.float();continue;case 3:if(a!==26)break;c.url=o.string();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Hn||(Hn={}));var is={COMPONENT_ID:1021,serialize(e,n){let i=Hn.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Hn.decode(e.buffer(),e.remainingBytes())},create(){return Hn.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBAudioStream"}};var Ar=ce(fe());var Ir;(function(e){e[e.AAPT_POSITION=0]="AAPT_POSITION",e[e.AAPT_NAME_TAG=1]="AAPT_NAME_TAG",e[e.AAPT_LEFT_HAND=2]="AAPT_LEFT_HAND",e[e.AAPT_RIGHT_HAND=3]="AAPT_RIGHT_HAND"})(Ir||(Ir={}));function Bd(){return{avatarId:void 0,anchorPointId:0}}var Gn;(function(e){function n(t,r=Ar.default.Writer.create()){return t.avatarId!==void 0&&r.uint32(10).string(t.avatarId),t.anchorPointId!==0&&r.uint32(16).int32(t.anchorPointId),r}e.encode=n;function i(t,r){let o=t instanceof Ar.default.Reader?t:Ar.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Bd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.avatarId=o.string();continue;case 2:if(a!==16)break;c.anchorPointId=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Gn||(Gn={}));var as={COMPONENT_ID:1073,serialize(e,n){let i=Gn.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Gn.decode(e.buffer(),e.remainingBytes())},create(){return Gn.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBAvatarAttach"}};var Nr=ce(fe());var wn=ce(fe());function Cd(){return{r:0,g:0,b:0}}var we;(function(e){function n(t,r=wn.default.Writer.create()){return t.r!==0&&r.uint32(13).float(t.r),t.g!==0&&r.uint32(21).float(t.g),t.b!==0&&r.uint32(29).float(t.b),r}e.encode=n;function i(t,r){let o=t instanceof wn.default.Reader?t:wn.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Cd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.r=o.float();continue;case 2:if(a!==21)break;c.g=o.float();continue;case 3:if(a!==29)break;c.b=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(we||(we={}));function Pd(){return{r:0,g:0,b:0,a:0}}var Be;(function(e){function n(t,r=wn.default.Writer.create()){return t.r!==0&&r.uint32(13).float(t.r),t.g!==0&&r.uint32(21).float(t.g),t.b!==0&&r.uint32(29).float(t.b),t.a!==0&&r.uint32(37).float(t.a),r}e.encode=n;function i(t,r){let o=t instanceof wn.default.Reader?t:wn.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Pd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.r=o.float();continue;case 2:if(a!==21)break;c.g=o.float();continue;case 3:if(a!==29)break;c.b=o.float();continue;case 4:if(a!==37)break;c.a=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Be||(Be={}));function zd(){return{skinColor:void 0,eyesColor:void 0,hairColor:void 0,bodyShapeUrn:"",name:""}}var jn;(function(e){function n(t,r=Nr.default.Writer.create()){return t.skinColor!==void 0&&we.encode(t.skinColor,r.uint32(10).fork()).ldelim(),t.eyesColor!==void 0&&we.encode(t.eyesColor,r.uint32(18).fork()).ldelim(),t.hairColor!==void 0&&we.encode(t.hairColor,r.uint32(26).fork()).ldelim(),t.bodyShapeUrn!==""&&r.uint32(34).string(t.bodyShapeUrn),t.name!==""&&r.uint32(42).string(t.name),r}e.encode=n;function i(t,r){let o=t instanceof Nr.default.Reader?t:Nr.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=zd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.skinColor=we.decode(o,o.uint32());continue;case 2:if(a!==18)break;c.eyesColor=we.decode(o,o.uint32());continue;case 3:if(a!==26)break;c.hairColor=we.decode(o,o.uint32());continue;case 4:if(a!==34)break;c.bodyShapeUrn=o.string();continue;case 5:if(a!==42)break;c.name=o.string();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(jn||(jn={}));var cs={COMPONENT_ID:1087,serialize(e,n){let i=jn.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return jn.decode(e.buffer(),e.remainingBytes())},create(){return jn.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBAvatarBase"}};var An=ce(fe());function Md(){return{emoteCommand:void 0}}var $n;(function(e){function n(t,r=An.default.Writer.create()){return t.emoteCommand!==void 0&&Or.encode(t.emoteCommand,r.uint32(10).fork()).ldelim(),r}e.encode=n;function i(t,r){let o=t instanceof An.default.Reader?t:An.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Md();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.emoteCommand=Or.decode(o,o.uint32());continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})($n||($n={}));function vd(){return{emoteUrn:"",loop:!1}}var Or;(function(e){function n(t,r=An.default.Writer.create()){return t.emoteUrn!==""&&r.uint32(10).string(t.emoteUrn),t.loop===!0&&r.uint32(16).bool(t.loop),r}e.encode=n;function i(t,r){let o=t instanceof An.default.Reader?t:An.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=vd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.emoteUrn=o.string();continue;case 2:if(a!==16)break;c.loop=o.bool();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Or||(Or={}));var ss={COMPONENT_ID:1088,serialize(e,n){let i=$n.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return $n.decode(e.buffer(),e.remainingBytes())},create(){return $n.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBAvatarEmoteCommand"}};var Br=ce(fe());function Ud(){return{wearableUrns:[],emotesUrns:[]}}var Yn;(function(e){function n(t,r=Br.default.Writer.create()){for(let o of t.wearableUrns)r.uint32(10).string(o);for(let o of t.emotesUrns)r.uint32(18).string(o);return r}e.encode=n;function i(t,r){let o=t instanceof Br.default.Reader?t:Br.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Ud();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.wearableUrns.push(o.string());continue;case 2:if(a!==18)break;c.emotesUrns.push(o.string());continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Yn||(Yn={}));var fs={COMPONENT_ID:1091,serialize(e,n){let i=Yn.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Yn.decode(e.buffer(),e.remainingBytes())},create(){return Yn.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBAvatarEquippedData"}};var Cr=ce(fe());var st=ce(fe());function Dd(){return{x:0,y:0,z:0}}var us;(function(e){function n(t,r=st.default.Writer.create()){return t.x!==0&&r.uint32(13).float(t.x),t.y!==0&&r.uint32(21).float(t.y),t.z!==0&&r.uint32(29).float(t.z),r}e.encode=n;function i(t,r){let o=t instanceof st.default.Reader?t:st.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Dd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.x=o.float();continue;case 2:if(a!==21)break;c.y=o.float();continue;case 3:if(a!==29)break;c.z=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(us||(us={}));function Fd(){return{x:0,y:0,z:0}}var ge;(function(e){function n(t,r=st.default.Writer.create()){return t.x!==0&&r.uint32(13).float(t.x),t.y!==0&&r.uint32(21).float(t.y),t.z!==0&&r.uint32(29).float(t.z),r}e.encode=n;function i(t,r){let o=t instanceof st.default.Reader?t:st.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Fd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.x=o.float();continue;case 2:if(a!==21)break;c.y=o.float();continue;case 3:if(a!==29)break;c.z=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(ge||(ge={}));function Ld(){return{x:0,y:0}}var ds;(function(e){function n(t,r=st.default.Writer.create()){return t.x!==0&&r.uint32(13).float(t.x),t.y!==0&&r.uint32(21).float(t.y),r}e.encode=n;function i(t,r){let o=t instanceof st.default.Reader?t:st.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Ld();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.x=o.float();continue;case 2:if(a!==21)break;c.y=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(ds||(ds={}));function Wd(){return{x:0,y:0,z:0,w:0}}var ls;(function(e){function n(t,r=st.default.Writer.create()){return t.x!==0&&r.uint32(13).float(t.x),t.y!==0&&r.uint32(21).float(t.y),t.z!==0&&r.uint32(29).float(t.z),t.w!==0&&r.uint32(37).float(t.w),r}e.encode=n;function i(t,r){let o=t instanceof st.default.Reader?t:st.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Wd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.x=o.float();continue;case 2:if(a!==21)break;c.y=o.float();continue;case 3:if(a!==29)break;c.z=o.float();continue;case 4:if(a!==37)break;c.w=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(ls||(ls={}));var ps;(function(e){e[e.AMT_HIDE_AVATARS=0]="AMT_HIDE_AVATARS",e[e.AMT_DISABLE_PASSPORTS=1]="AMT_DISABLE_PASSPORTS"})(ps||(ps={}));function Vd(){return{area:void 0,excludeIds:[],modifiers:[]}}var Jn;(function(e){function n(t,r=Cr.default.Writer.create()){t.area!==void 0&&ge.encode(t.area,r.uint32(10).fork()).ldelim();for(let o of t.excludeIds)r.uint32(18).string(o);r.uint32(26).fork();for(let o of t.modifiers)r.int32(o);return r.ldelim(),r}e.encode=n;function i(t,r){let o=t instanceof Cr.default.Reader?t:Cr.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Vd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.area=ge.decode(o,o.uint32());continue;case 2:if(a!==18)break;c.excludeIds.push(o.string());continue;case 3:if(a===24){c.modifiers.push(o.int32());continue}if(a===26){let u=o.uint32()+o.pos;for(;o.pos<u;)c.modifiers.push(o.int32());continue}break}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Jn||(Jn={}));var ms={COMPONENT_ID:1070,serialize(e,n){let i=Jn.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Jn.decode(e.buffer(),e.remainingBytes())},create(){return Jn.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBAvatarModifierArea"}};var Et=null;try{Et=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Ne(e,n,i){this.low=e|0,this.high=n|0,this.unsigned=!!i}Ne.prototype.__isLong__;Object.defineProperty(Ne.prototype,"__isLong__",{value:!0});function qe(e){return(e&&e.__isLong__)===!0}function hs(e){var n=Math.clz32(e&-e);return e?31-n:n}Ne.isLong=qe;var ys={},bs={};function In(e,n){var i,t,r;return n?(e>>>=0,(r=0<=e&&e<256)&&(t=bs[e],t)?t:(i=xe(e,0,!0),r&&(bs[e]=i),i)):(e|=0,(r=-128<=e&&e<128)&&(t=ys[e],t)?t:(i=xe(e,e<0?-1:0,!1),r&&(ys[e]=i),i))}Ne.fromInt=In;function Tt(e,n){if(isNaN(e))return n?Yt:Ot;if(n){if(e<0)return Yt;if(e>=gs)return Rs}else{if(e<=-Es)return ot;if(e+1>=Es)return ks}return e<0?Tt(-e,n).neg():xe(e%qn|0,e/qn|0,n)}Ne.fromNumber=Tt;function xe(e,n,i){return new Ne(e,n,i)}Ne.fromBits=xe;var Pr=Math.pow;function ga(e,n,i){if(e.length===0)throw Error("empty string");if(typeof n=="number"?(i=n,n=!1):n=!!n,e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return n?Yt:Ot;if(i=i||10,i<2||36<i)throw RangeError("radix");var t;if((t=e.indexOf("-"))>0)throw Error("interior hyphen");if(t===0)return ga(e.substring(1),n,i).neg();for(var r=Tt(Pr(i,8)),o=Ot,s=0;s<e.length;s+=8){var c=Math.min(8,e.length-s),a=parseInt(e.substring(s,s+c),i);if(c<8){var u=Tt(Pr(i,c));o=o.mul(u).add(Tt(a))}else o=o.mul(r),o=o.add(Tt(a))}return o.unsigned=n,o}Ne.fromString=ga;function Bt(e,n){return typeof e=="number"?Tt(e,n):typeof e=="string"?ga(e,n):xe(e.low,e.high,typeof n=="boolean"?n:e.unsigned)}Ne.fromValue=Bt;var xs=65536,Hd=1<<24,qn=xs*xs,gs=qn*qn,Es=gs/2,Ts=In(Hd),Ot=In(0);Ne.ZERO=Ot;var Yt=In(0,!0);Ne.UZERO=Yt;var Zn=In(1);Ne.ONE=Zn;var _s=In(1,!0);Ne.UONE=_s;var Ta=In(-1);Ne.NEG_ONE=Ta;var ks=xe(-1,2147483647,!1);Ne.MAX_VALUE=ks;var Rs=xe(-1,-1,!0);Ne.MAX_UNSIGNED_VALUE=Rs;var ot=xe(0,-2147483648,!1);Ne.MIN_VALUE=ot;var v=Ne.prototype;v.toInt=function(){return this.unsigned?this.low>>>0:this.low};v.toNumber=function(){return this.unsigned?(this.high>>>0)*qn+(this.low>>>0):this.high*qn+(this.low>>>0)};v.toString=function(n){if(n=n||10,n<2||36<n)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(ot)){var i=Tt(n),t=this.div(i),r=t.mul(i).sub(this);return t.toString(n)+r.toInt().toString(n)}else return"-"+this.neg().toString(n);for(var o=Tt(Pr(n,6),this.unsigned),s=this,c="";;){var a=s.div(o),u=s.sub(a.mul(o)).toInt()>>>0,E=u.toString(n);if(s=a,s.isZero())return E+c;for(;E.length<6;)E="0"+E;c=""+E+c}};v.getHighBits=function(){return this.high};v.getHighBitsUnsigned=function(){return this.high>>>0};v.getLowBits=function(){return this.low};v.getLowBitsUnsigned=function(){return this.low>>>0};v.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ot)?64:this.neg().getNumBitsAbs();for(var n=this.high!=0?this.high:this.low,i=31;i>0&&!(n&1<<i);i--);return this.high!=0?i+33:i+1};v.isZero=function(){return this.high===0&&this.low===0};v.eqz=v.isZero;v.isNegative=function(){return!this.unsigned&&this.high<0};v.isPositive=function(){return this.unsigned||this.high>=0};v.isOdd=function(){return(this.low&1)===1};v.isEven=function(){return(this.low&1)===0};v.equals=function(n){return qe(n)||(n=Bt(n)),this.unsigned!==n.unsigned&&this.high>>>31===1&&n.high>>>31===1?!1:this.high===n.high&&this.low===n.low};v.eq=v.equals;v.notEquals=function(n){return!this.eq(n)};v.neq=v.notEquals;v.ne=v.notEquals;v.lessThan=function(n){return this.comp(n)<0};v.lt=v.lessThan;v.lessThanOrEqual=function(n){return this.comp(n)<=0};v.lte=v.lessThanOrEqual;v.le=v.lessThanOrEqual;v.greaterThan=function(n){return this.comp(n)>0};v.gt=v.greaterThan;v.greaterThanOrEqual=function(n){return this.comp(n)>=0};v.gte=v.greaterThanOrEqual;v.ge=v.greaterThanOrEqual;v.compare=function(n){if(qe(n)||(n=Bt(n)),this.eq(n))return 0;var i=this.isNegative(),t=n.isNegative();return i&&!t?-1:!i&&t?1:this.unsigned?n.high>>>0>this.high>>>0||n.high===this.high&&n.low>>>0>this.low>>>0?-1:1:this.sub(n).isNegative()?-1:1};v.comp=v.compare;v.negate=function(){return!this.unsigned&&this.eq(ot)?ot:this.not().add(Zn)};v.neg=v.negate;v.add=function(n){qe(n)||(n=Bt(n));var i=this.high>>>16,t=this.high&65535,r=this.low>>>16,o=this.low&65535,s=n.high>>>16,c=n.high&65535,a=n.low>>>16,u=n.low&65535,E=0,N=0,A=0,$=0;return $+=o+u,A+=$>>>16,$&=65535,A+=r+a,N+=A>>>16,A&=65535,N+=t+c,E+=N>>>16,N&=65535,E+=i+s,E&=65535,xe(A<<16|$,E<<16|N,this.unsigned)};v.subtract=function(n){return qe(n)||(n=Bt(n)),this.add(n.neg())};v.sub=v.subtract;v.multiply=function(n){if(this.isZero())return this;if(qe(n)||(n=Bt(n)),Et){var i=Et.mul(this.low,this.high,n.low,n.high);return xe(i,Et.get_high(),this.unsigned)}if(n.isZero())return this.unsigned?Yt:Ot;if(this.eq(ot))return n.isOdd()?ot:Ot;if(n.eq(ot))return this.isOdd()?ot:Ot;if(this.isNegative())return n.isNegative()?this.neg().mul(n.neg()):this.neg().mul(n).neg();if(n.isNegative())return this.mul(n.neg()).neg();if(this.lt(Ts)&&n.lt(Ts))return Tt(this.toNumber()*n.toNumber(),this.unsigned);var t=this.high>>>16,r=this.high&65535,o=this.low>>>16,s=this.low&65535,c=n.high>>>16,a=n.high&65535,u=n.low>>>16,E=n.low&65535,N=0,A=0,$=0,B=0;return B+=s*E,$+=B>>>16,B&=65535,$+=o*E,A+=$>>>16,$&=65535,$+=s*u,A+=$>>>16,$&=65535,A+=r*E,N+=A>>>16,A&=65535,A+=o*u,N+=A>>>16,A&=65535,A+=s*a,N+=A>>>16,A&=65535,N+=t*E+r*u+o*a+s*c,N&=65535,xe($<<16|B,N<<16|A,this.unsigned)};v.mul=v.multiply;v.divide=function(n){if(qe(n)||(n=Bt(n)),n.isZero())throw Error("division by zero");if(Et){if(!this.unsigned&&this.high===-2147483648&&n.low===-1&&n.high===-1)return this;var i=(this.unsigned?Et.div_u:Et.div_s)(this.low,this.high,n.low,n.high);return xe(i,Et.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Yt:Ot;var t,r,o;if(this.unsigned){if(n.unsigned||(n=n.toUnsigned()),n.gt(this))return Yt;if(n.gt(this.shru(1)))return _s;o=Yt}else{if(this.eq(ot)){if(n.eq(Zn)||n.eq(Ta))return ot;if(n.eq(ot))return Zn;var s=this.shr(1);return t=s.div(n).shl(1),t.eq(Ot)?n.isNegative()?Zn:Ta:(r=this.sub(n.mul(t)),o=t.add(r.div(n)),o)}else if(n.eq(ot))return this.unsigned?Yt:Ot;if(this.isNegative())return n.isNegative()?this.neg().div(n.neg()):this.neg().div(n).neg();if(n.isNegative())return this.div(n.neg()).neg();o=Ot}for(r=this;r.gte(n);){t=Math.max(1,Math.floor(r.toNumber()/n.toNumber()));for(var c=Math.ceil(Math.log(t)/Math.LN2),a=c<=48?1:Pr(2,c-48),u=Tt(t),E=u.mul(n);E.isNegative()||E.gt(r);)t-=a,u=Tt(t,this.unsigned),E=u.mul(n);u.isZero()&&(u=Zn),o=o.add(u),r=r.sub(E)}return o};v.div=v.divide;v.modulo=function(n){if(qe(n)||(n=Bt(n)),Et){var i=(this.unsigned?Et.rem_u:Et.rem_s)(this.low,this.high,n.low,n.high);return xe(i,Et.get_high(),this.unsigned)}return this.sub(this.div(n).mul(n))};v.mod=v.modulo;v.rem=v.modulo;v.not=function(){return xe(~this.low,~this.high,this.unsigned)};v.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};v.clz=v.countLeadingZeros;v.countTrailingZeros=function(){return this.low?hs(this.low):hs(this.high)+32};v.ctz=v.countTrailingZeros;v.and=function(n){return qe(n)||(n=Bt(n)),xe(this.low&n.low,this.high&n.high,this.unsigned)};v.or=function(n){return qe(n)||(n=Bt(n)),xe(this.low|n.low,this.high|n.high,this.unsigned)};v.xor=function(n){return qe(n)||(n=Bt(n)),xe(this.low^n.low,this.high^n.high,this.unsigned)};v.shiftLeft=function(n){return qe(n)&&(n=n.toInt()),(n&=63)===0?this:n<32?xe(this.low<<n,this.high<<n|this.low>>>32-n,this.unsigned):xe(0,this.low<<n-32,this.unsigned)};v.shl=v.shiftLeft;v.shiftRight=function(n){return qe(n)&&(n=n.toInt()),(n&=63)===0?this:n<32?xe(this.low>>>n|this.high<<32-n,this.high>>n,this.unsigned):xe(this.high>>n-32,this.high>=0?0:-1,this.unsigned)};v.shr=v.shiftRight;v.shiftRightUnsigned=function(n){return qe(n)&&(n=n.toInt()),(n&=63)===0?this:n<32?xe(this.low>>>n|this.high<<32-n,this.high>>>n,this.unsigned):n===32?xe(this.high,0,this.unsigned):xe(this.high>>>n-32,0,this.unsigned)};v.shru=v.shiftRightUnsigned;v.shr_u=v.shiftRightUnsigned;v.rotateLeft=function(n){var i;return qe(n)&&(n=n.toInt()),(n&=63)===0?this:n===32?xe(this.high,this.low,this.unsigned):n<32?(i=32-n,xe(this.low<<n|this.high>>>i,this.high<<n|this.low>>>i,this.unsigned)):(n-=32,i=32-n,xe(this.high<<n|this.low>>>i,this.low<<n|this.high>>>i,this.unsigned))};v.rotl=v.rotateLeft;v.rotateRight=function(n){var i;return qe(n)&&(n=n.toInt()),(n&=63)===0?this:n===32?xe(this.high,this.low,this.unsigned):n<32?(i=32-n,xe(this.high<<i|this.low>>>n,this.low<<i|this.high>>>n,this.unsigned)):(n-=32,i=32-n,xe(this.low<<i|this.high>>>n,this.high<<i|this.low>>>n,this.unsigned))};v.rotr=v.rotateRight;v.toSigned=function(){return this.unsigned?xe(this.low,this.high,!1):this};v.toUnsigned=function(){return this.unsigned?this:xe(this.low,this.high,!0)};v.toBytes=function(n){return n?this.toBytesLE():this.toBytesBE()};v.toBytesLE=function(){var n=this.high,i=this.low;return[i&255,i>>>8&255,i>>>16&255,i>>>24,n&255,n>>>8&255,n>>>16&255,n>>>24]};v.toBytesBE=function(){var n=this.high,i=this.low;return[n>>>24,n>>>16&255,n>>>8&255,n&255,i>>>24,i>>>16&255,i>>>8&255,i&255]};Ne.fromBytes=function(n,i,t){return t?Ne.fromBytesLE(n,i):Ne.fromBytesBE(n,i)};Ne.fromBytesLE=function(n,i){return new Ne(n[0]|n[1]<<8|n[2]<<16|n[3]<<24,n[4]|n[5]<<8|n[6]<<16|n[7]<<24,i)};Ne.fromBytesBE=function(n,i){return new Ne(n[4]<<24|n[5]<<16|n[6]<<8|n[7],n[0]<<24|n[1]<<16|n[2]<<8|n[3],i)};var _a=Ne;var Nn=ce(fe());function Gd(){return{id:"",name:void 0,bodyShape:void 0,skinColor:void 0,hairColor:void 0,eyeColor:void 0,expressionTriggerId:void 0,expressionTriggerTimestamp:void 0,talking:void 0,wearables:[],emotes:[]}}var Xn;(function(e){function n(t,r=Nn.default.Writer.create()){t.id!==""&&r.uint32(10).string(t.id),t.name!==void 0&&r.uint32(18).string(t.name),t.bodyShape!==void 0&&r.uint32(26).string(t.bodyShape),t.skinColor!==void 0&&we.encode(t.skinColor,r.uint32(34).fork()).ldelim(),t.hairColor!==void 0&&we.encode(t.hairColor,r.uint32(42).fork()).ldelim(),t.eyeColor!==void 0&&we.encode(t.eyeColor,r.uint32(50).fork()).ldelim(),t.expressionTriggerId!==void 0&&r.uint32(58).string(t.expressionTriggerId),t.expressionTriggerTimestamp!==void 0&&r.uint32(64).int64(t.expressionTriggerTimestamp),t.talking!==void 0&&r.uint32(72).bool(t.talking);for(let o of t.wearables)r.uint32(82).string(o);for(let o of t.emotes)r.uint32(90).string(o);return r}e.encode=n;function i(t,r){let o=t instanceof Nn.default.Reader?t:Nn.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Gd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.id=o.string();continue;case 2:if(a!==18)break;c.name=o.string();continue;case 3:if(a!==26)break;c.bodyShape=o.string();continue;case 4:if(a!==34)break;c.skinColor=we.decode(o,o.uint32());continue;case 5:if(a!==42)break;c.hairColor=we.decode(o,o.uint32());continue;case 6:if(a!==50)break;c.eyeColor=we.decode(o,o.uint32());continue;case 7:if(a!==58)break;c.expressionTriggerId=o.string();continue;case 8:if(a!==64)break;c.expressionTriggerTimestamp=$d(o.int64());continue;case 9:if(a!==72)break;c.talking=o.bool();continue;case 10:if(a!==82)break;c.wearables.push(o.string());continue;case 11:if(a!==90)break;c.emotes.push(o.string());continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Xn||(Xn={}));var jd=(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof global<"u")return global;throw"Unable to locate global object"})();function $d(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new jd.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}Nn.default.util.Long!==_a&&(Nn.default.util.Long=_a,Nn.default.configure());var Ss={COMPONENT_ID:1080,serialize(e,n){let i=Xn.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Xn.decode(e.buffer(),e.remainingBytes())},create(){return Xn.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBAvatarShape"}};var zr=ce(fe());var ws;(function(e){e[e.BM_NONE=0]="BM_NONE",e[e.BM_X=1]="BM_X",e[e.BM_Y=2]="BM_Y",e[e.BM_Z=4]="BM_Z",e[e.BM_ALL=7]="BM_ALL"})(ws||(ws={}));function Yd(){return{billboardMode:void 0}}var Kn;(function(e){function n(t,r=zr.default.Writer.create()){return t.billboardMode!==void 0&&r.uint32(8).int32(t.billboardMode),r}e.encode=n;function i(t,r){let o=t instanceof zr.default.Reader?t:zr.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Yd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.billboardMode=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Kn||(Kn={}));var As={COMPONENT_ID:1090,serialize(e,n){let i=Kn.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Kn.decode(e.buffer(),e.remainingBytes())},create(){return Kn.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBBillboard"}};var Mr=ce(fe());function Jd(){return{mode:0}}var Qn;(function(e){function n(t,r=Mr.default.Writer.create()){return t.mode!==0&&r.uint32(8).int32(t.mode),r}e.encode=n;function i(t,r){let o=t instanceof Mr.default.Reader?t:Mr.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Jd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.mode=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Qn||(Qn={}));var Is={COMPONENT_ID:1072,serialize(e,n){let i=Qn.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Qn.decode(e.buffer(),e.remainingBytes())},create(){return Qn.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBCameraMode"}};var vr=ce(fe());function Zd(){return{area:void 0,mode:0}}var eo;(function(e){function n(t,r=vr.default.Writer.create()){return t.area!==void 0&&ge.encode(t.area,r.uint32(10).fork()).ldelim(),t.mode!==0&&r.uint32(16).int32(t.mode),r}e.encode=n;function i(t,r){let o=t instanceof vr.default.Reader?t:vr.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Zd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.area=ge.decode(o,o.uint32());continue;case 2:if(a!==16)break;c.mode=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(eo||(eo={}));var Ns={COMPONENT_ID:1071,serialize(e,n){let i=eo.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return eo.decode(e.buffer(),e.remainingBytes())},create(){return eo.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBCameraModeArea"}};var Ur=ce(fe());function qd(){return{frameNumber:0,totalRuntime:0,tickNumber:0}}var to;(function(e){function n(t,r=Ur.default.Writer.create()){return t.frameNumber!==0&&r.uint32(8).uint32(t.frameNumber),t.totalRuntime!==0&&r.uint32(21).float(t.totalRuntime),t.tickNumber!==0&&r.uint32(24).uint32(t.tickNumber),r}e.encode=n;function i(t,r){let o=t instanceof Ur.default.Reader?t:Ur.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=qd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.frameNumber=o.uint32();continue;case 2:if(a!==21)break;c.totalRuntime=o.float();continue;case 3:if(a!==24)break;c.tickNumber=o.uint32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(to||(to={}));var Os={COMPONENT_ID:1048,serialize(e,n){let i=to.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return to.decode(e.buffer(),e.remainingBytes())},create(){return to.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBEngineInfo"}};var Dr=ce(fe());function Xd(){return{src:"",visibleMeshesCollisionMask:void 0,invisibleMeshesCollisionMask:void 0}}var no;(function(e){function n(t,r=Dr.default.Writer.create()){return t.src!==""&&r.uint32(10).string(t.src),t.visibleMeshesCollisionMask!==void 0&&r.uint32(32).uint32(t.visibleMeshesCollisionMask),t.invisibleMeshesCollisionMask!==void 0&&r.uint32(40).uint32(t.invisibleMeshesCollisionMask),r}e.encode=n;function i(t,r){let o=t instanceof Dr.default.Reader?t:Dr.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Xd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.src=o.string();continue;case 4:if(a!==32)break;c.visibleMeshesCollisionMask=o.uint32();continue;case 5:if(a!==40)break;c.invisibleMeshesCollisionMask=o.uint32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(no||(no={}));var Bs={COMPONENT_ID:1041,serialize(e,n){let i=no.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return no.decode(e.buffer(),e.remainingBytes())},create(){return no.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBGltfContainer"}};var Fr=ce(fe());function Kd(){return{currentState:0}}var oo;(function(e){function n(t,r=Fr.default.Writer.create()){return t.currentState!==0&&r.uint32(8).int32(t.currentState),r}e.encode=n;function i(t,r){let o=t instanceof Fr.default.Reader?t:Fr.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Kd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.currentState=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(oo||(oo={}));var Cs={COMPONENT_ID:1049,serialize(e,n){let i=oo.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return oo.decode(e.buffer(),e.remainingBytes())},create(){return oo.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBGltfContainerLoadingState"}};var vt=ce(fe());var ft=ce(fe());var Ps;(function(e){e[e.TWM_REPEAT=0]="TWM_REPEAT",e[e.TWM_CLAMP=1]="TWM_CLAMP",e[e.TWM_MIRROR=2]="TWM_MIRROR"})(Ps||(Ps={}));var zs;(function(e){e[e.TFM_POINT=0]="TFM_POINT",e[e.TFM_BILINEAR=1]="TFM_BILINEAR",e[e.TFM_TRILINEAR=2]="TFM_TRILINEAR"})(zs||(zs={}));function Qd(){return{src:"",wrapMode:void 0,filterMode:void 0}}var Lr;(function(e){function n(t,r=ft.default.Writer.create()){return t.src!==""&&r.uint32(10).string(t.src),t.wrapMode!==void 0&&r.uint32(16).int32(t.wrapMode),t.filterMode!==void 0&&r.uint32(24).int32(t.filterMode),r}e.encode=n;function i(t,r){let o=t instanceof ft.default.Reader?t:ft.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Qd();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.src=o.string();continue;case 2:if(a!==16)break;c.wrapMode=o.int32();continue;case 3:if(a!==24)break;c.filterMode=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Lr||(Lr={}));function el(){return{userId:"",wrapMode:void 0,filterMode:void 0}}var Wr;(function(e){function n(t,r=ft.default.Writer.create()){return t.userId!==""&&r.uint32(10).string(t.userId),t.wrapMode!==void 0&&r.uint32(16).int32(t.wrapMode),t.filterMode!==void 0&&r.uint32(24).int32(t.filterMode),r}e.encode=n;function i(t,r){let o=t instanceof ft.default.Reader?t:ft.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=el();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.userId=o.string();continue;case 2:if(a!==16)break;c.wrapMode=o.int32();continue;case 3:if(a!==24)break;c.filterMode=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Wr||(Wr={}));function tl(){return{videoPlayerEntity:0,wrapMode:void 0,filterMode:void 0}}var Vr;(function(e){function n(t,r=ft.default.Writer.create()){return t.videoPlayerEntity!==0&&r.uint32(8).uint32(t.videoPlayerEntity),t.wrapMode!==void 0&&r.uint32(16).int32(t.wrapMode),t.filterMode!==void 0&&r.uint32(24).int32(t.filterMode),r}e.encode=n;function i(t,r){let o=t instanceof ft.default.Reader?t:ft.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=tl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.videoPlayerEntity=o.uint32();continue;case 2:if(a!==16)break;c.wrapMode=o.int32();continue;case 3:if(a!==24)break;c.filterMode=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Vr||(Vr={}));function nl(){return{tex:void 0}}var Xe;(function(e){function n(t,r=ft.default.Writer.create()){switch(t.tex?.$case){case"texture":Lr.encode(t.tex.texture,r.uint32(10).fork()).ldelim();break;case"avatarTexture":Wr.encode(t.tex.avatarTexture,r.uint32(18).fork()).ldelim();break;case"videoTexture":Vr.encode(t.tex.videoTexture,r.uint32(26).fork()).ldelim();break}return r}e.encode=n;function i(t,r){let o=t instanceof ft.default.Reader?t:ft.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=nl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.tex={$case:"texture",texture:Lr.decode(o,o.uint32())};continue;case 2:if(a!==18)break;c.tex={$case:"avatarTexture",avatarTexture:Wr.decode(o,o.uint32())};continue;case 3:if(a!==26)break;c.tex={$case:"videoTexture",videoTexture:Vr.decode(o,o.uint32())};continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Xe||(Xe={}));var Ms;(function(e){e[e.MTM_OPAQUE=0]="MTM_OPAQUE",e[e.MTM_ALPHA_TEST=1]="MTM_ALPHA_TEST",e[e.MTM_ALPHA_BLEND=2]="MTM_ALPHA_BLEND",e[e.MTM_ALPHA_TEST_AND_ALPHA_BLEND=3]="MTM_ALPHA_TEST_AND_ALPHA_BLEND",e[e.MTM_AUTO=4]="MTM_AUTO"})(Ms||(Ms={}));function ol(){return{material:void 0}}var ro;(function(e){function n(t,r=vt.default.Writer.create()){switch(t.material?.$case){case"unlit":Hr.encode(t.material.unlit,r.uint32(10).fork()).ldelim();break;case"pbr":Gr.encode(t.material.pbr,r.uint32(18).fork()).ldelim();break}return r}e.encode=n;function i(t,r){let o=t instanceof vt.default.Reader?t:vt.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=ol();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.material={$case:"unlit",unlit:Hr.decode(o,o.uint32())};continue;case 2:if(a!==18)break;c.material={$case:"pbr",pbr:Gr.decode(o,o.uint32())};continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(ro||(ro={}));function rl(){return{texture:void 0,alphaTest:void 0,castShadows:void 0,diffuseColor:void 0}}var Hr;(function(e){function n(t,r=vt.default.Writer.create()){return t.texture!==void 0&&Xe.encode(t.texture,r.uint32(10).fork()).ldelim(),t.alphaTest!==void 0&&r.uint32(21).float(t.alphaTest),t.castShadows!==void 0&&r.uint32(24).bool(t.castShadows),t.diffuseColor!==void 0&&Be.encode(t.diffuseColor,r.uint32(34).fork()).ldelim(),r}e.encode=n;function i(t,r){let o=t instanceof vt.default.Reader?t:vt.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=rl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.texture=Xe.decode(o,o.uint32());continue;case 2:if(a!==21)break;c.alphaTest=o.float();continue;case 3:if(a!==24)break;c.castShadows=o.bool();continue;case 4:if(a!==34)break;c.diffuseColor=Be.decode(o,o.uint32());continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Hr||(Hr={}));function il(){return{texture:void 0,alphaTest:void 0,castShadows:void 0,alphaTexture:void 0,emissiveTexture:void 0,bumpTexture:void 0,albedoColor:void 0,emissiveColor:void 0,reflectivityColor:void 0,transparencyMode:void 0,metallic:void 0,roughness:void 0,specularIntensity:void 0,emissiveIntensity:void 0,directIntensity:void 0}}var Gr;(function(e){function n(t,r=vt.default.Writer.create()){return t.texture!==void 0&&Xe.encode(t.texture,r.uint32(10).fork()).ldelim(),t.alphaTest!==void 0&&r.uint32(21).float(t.alphaTest),t.castShadows!==void 0&&r.uint32(24).bool(t.castShadows),t.alphaTexture!==void 0&&Xe.encode(t.alphaTexture,r.uint32(34).fork()).ldelim(),t.emissiveTexture!==void 0&&Xe.encode(t.emissiveTexture,r.uint32(42).fork()).ldelim(),t.bumpTexture!==void 0&&Xe.encode(t.bumpTexture,r.uint32(50).fork()).ldelim(),t.albedoColor!==void 0&&Be.encode(t.albedoColor,r.uint32(58).fork()).ldelim(),t.emissiveColor!==void 0&&we.encode(t.emissiveColor,r.uint32(66).fork()).ldelim(),t.reflectivityColor!==void 0&&we.encode(t.reflectivityColor,r.uint32(74).fork()).ldelim(),t.transparencyMode!==void 0&&r.uint32(80).int32(t.transparencyMode),t.metallic!==void 0&&r.uint32(93).float(t.metallic),t.roughness!==void 0&&r.uint32(101).float(t.roughness),t.specularIntensity!==void 0&&r.uint32(117).float(t.specularIntensity),t.emissiveIntensity!==void 0&&r.uint32(125).float(t.emissiveIntensity),t.directIntensity!==void 0&&r.uint32(133).float(t.directIntensity),r}e.encode=n;function i(t,r){let o=t instanceof vt.default.Reader?t:vt.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=il();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.texture=Xe.decode(o,o.uint32());continue;case 2:if(a!==21)break;c.alphaTest=o.float();continue;case 3:if(a!==24)break;c.castShadows=o.bool();continue;case 4:if(a!==34)break;c.alphaTexture=Xe.decode(o,o.uint32());continue;case 5:if(a!==42)break;c.emissiveTexture=Xe.decode(o,o.uint32());continue;case 6:if(a!==50)break;c.bumpTexture=Xe.decode(o,o.uint32());continue;case 7:if(a!==58)break;c.albedoColor=Be.decode(o,o.uint32());continue;case 8:if(a!==66)break;c.emissiveColor=we.decode(o,o.uint32());continue;case 9:if(a!==74)break;c.reflectivityColor=we.decode(o,o.uint32());continue;case 10:if(a!==80)break;c.transparencyMode=o.int32();continue;case 11:if(a!==93)break;c.metallic=o.float();continue;case 12:if(a!==101)break;c.roughness=o.float();continue;case 14:if(a!==117)break;c.specularIntensity=o.float();continue;case 15:if(a!==125)break;c.emissiveIntensity=o.float();continue;case 16:if(a!==133)break;c.directIntensity=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Gr||(Gr={}));var vs={COMPONENT_ID:1017,serialize(e,n){let i=ro.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return ro.decode(e.buffer(),e.remainingBytes())},create(){return ro.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBMaterial"}};var Ke=ce(fe());var jr;(function(e){e[e.CL_NONE=0]="CL_NONE",e[e.CL_POINTER=1]="CL_POINTER",e[e.CL_PHYSICS=2]="CL_PHYSICS",e[e.CL_RESERVED1=4]="CL_RESERVED1",e[e.CL_RESERVED2=8]="CL_RESERVED2",e[e.CL_RESERVED3=16]="CL_RESERVED3",e[e.CL_RESERVED4=32]="CL_RESERVED4",e[e.CL_RESERVED5=64]="CL_RESERVED5",e[e.CL_RESERVED6=128]="CL_RESERVED6",e[e.CL_CUSTOM1=256]="CL_CUSTOM1",e[e.CL_CUSTOM2=512]="CL_CUSTOM2",e[e.CL_CUSTOM3=1024]="CL_CUSTOM3",e[e.CL_CUSTOM4=2048]="CL_CUSTOM4",e[e.CL_CUSTOM5=4096]="CL_CUSTOM5",e[e.CL_CUSTOM6=8192]="CL_CUSTOM6",e[e.CL_CUSTOM7=16384]="CL_CUSTOM7",e[e.CL_CUSTOM8=32768]="CL_CUSTOM8"})(jr||(jr={}));function al(){return{collisionMask:void 0,mesh:void 0}}var io;(function(e){function n(t,r=Ke.default.Writer.create()){switch(t.collisionMask!==void 0&&r.uint32(8).uint32(t.collisionMask),t.mesh?.$case){case"box":$r.encode(t.mesh.box,r.uint32(18).fork()).ldelim();break;case"sphere":Zr.encode(t.mesh.sphere,r.uint32(26).fork()).ldelim();break;case"cylinder":Yr.encode(t.mesh.cylinder,r.uint32(34).fork()).ldelim();break;case"plane":Jr.encode(t.mesh.plane,r.uint32(42).fork()).ldelim();break}return r}e.encode=n;function i(t,r){let o=t instanceof Ke.default.Reader?t:Ke.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=al();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.collisionMask=o.uint32();continue;case 2:if(a!==18)break;c.mesh={$case:"box",box:$r.decode(o,o.uint32())};continue;case 3:if(a!==26)break;c.mesh={$case:"sphere",sphere:Zr.decode(o,o.uint32())};continue;case 4:if(a!==34)break;c.mesh={$case:"cylinder",cylinder:Yr.decode(o,o.uint32())};continue;case 5:if(a!==42)break;c.mesh={$case:"plane",plane:Jr.decode(o,o.uint32())};continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(io||(io={}));function cl(){return{}}var $r;(function(e){function n(t,r=Ke.default.Writer.create()){return r}e.encode=n;function i(t,r){let o=t instanceof Ke.default.Reader?t:Ke.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=cl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})($r||($r={}));function sl(){return{radiusTop:void 0,radiusBottom:void 0}}var Yr;(function(e){function n(t,r=Ke.default.Writer.create()){return t.radiusTop!==void 0&&r.uint32(13).float(t.radiusTop),t.radiusBottom!==void 0&&r.uint32(21).float(t.radiusBottom),r}e.encode=n;function i(t,r){let o=t instanceof Ke.default.Reader?t:Ke.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=sl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.radiusTop=o.float();continue;case 2:if(a!==21)break;c.radiusBottom=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Yr||(Yr={}));function fl(){return{}}var Jr;(function(e){function n(t,r=Ke.default.Writer.create()){return r}e.encode=n;function i(t,r){let o=t instanceof Ke.default.Reader?t:Ke.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=fl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Jr||(Jr={}));function ul(){return{}}var Zr;(function(e){function n(t,r=Ke.default.Writer.create()){return r}e.encode=n;function i(t,r){let o=t instanceof Ke.default.Reader?t:Ke.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=ul();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Zr||(Zr={}));var Us={COMPONENT_ID:1019,serialize(e,n){let i=io.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return io.decode(e.buffer(),e.remainingBytes())},create(){return io.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBMeshCollider"}};var Qe=ce(fe());function dl(){return{mesh:void 0}}var ao;(function(e){function n(t,r=Qe.default.Writer.create()){switch(t.mesh?.$case){case"box":qr.encode(t.mesh.box,r.uint32(10).fork()).ldelim();break;case"sphere":Qr.encode(t.mesh.sphere,r.uint32(18).fork()).ldelim();break;case"cylinder":Xr.encode(t.mesh.cylinder,r.uint32(26).fork()).ldelim();break;case"plane":Kr.encode(t.mesh.plane,r.uint32(34).fork()).ldelim();break}return r}e.encode=n;function i(t,r){let o=t instanceof Qe.default.Reader?t:Qe.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=dl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.mesh={$case:"box",box:qr.decode(o,o.uint32())};continue;case 2:if(a!==18)break;c.mesh={$case:"sphere",sphere:Qr.decode(o,o.uint32())};continue;case 3:if(a!==26)break;c.mesh={$case:"cylinder",cylinder:Xr.decode(o,o.uint32())};continue;case 4:if(a!==34)break;c.mesh={$case:"plane",plane:Kr.decode(o,o.uint32())};continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(ao||(ao={}));function ll(){return{uvs:[]}}var qr;(function(e){function n(t,r=Qe.default.Writer.create()){r.uint32(10).fork();for(let o of t.uvs)r.float(o);return r.ldelim(),r}e.encode=n;function i(t,r){let o=t instanceof Qe.default.Reader?t:Qe.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=ll();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a===13){c.uvs.push(o.float());continue}if(a===10){let u=o.uint32()+o.pos;for(;o.pos<u;)c.uvs.push(o.float());continue}break}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(qr||(qr={}));function pl(){return{radiusTop:void 0,radiusBottom:void 0}}var Xr;(function(e){function n(t,r=Qe.default.Writer.create()){return t.radiusTop!==void 0&&r.uint32(13).float(t.radiusTop),t.radiusBottom!==void 0&&r.uint32(21).float(t.radiusBottom),r}e.encode=n;function i(t,r){let o=t instanceof Qe.default.Reader?t:Qe.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=pl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.radiusTop=o.float();continue;case 2:if(a!==21)break;c.radiusBottom=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Xr||(Xr={}));function ml(){return{uvs:[]}}var Kr;(function(e){function n(t,r=Qe.default.Writer.create()){r.uint32(10).fork();for(let o of t.uvs)r.float(o);return r.ldelim(),r}e.encode=n;function i(t,r){let o=t instanceof Qe.default.Reader?t:Qe.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=ml();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a===13){c.uvs.push(o.float());continue}if(a===10){let u=o.uint32()+o.pos;for(;o.pos<u;)c.uvs.push(o.float());continue}break}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Kr||(Kr={}));function hl(){return{}}var Qr;(function(e){function n(t,r=Qe.default.Writer.create()){return r}e.encode=n;function i(t,r){let o=t instanceof Qe.default.Reader?t:Qe.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=hl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Qr||(Qr={}));var Ds={COMPONENT_ID:1018,serialize(e,n){let i=ao.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return ao.decode(e.buffer(),e.remainingBytes())},create(){return ao.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBMeshRenderer"}};var ei=ce(fe());var Fs;(function(e){e[e.NFT_CLASSIC=0]="NFT_CLASSIC",e[e.NFT_BAROQUE_ORNAMENT=1]="NFT_BAROQUE_ORNAMENT",e[e.NFT_DIAMOND_ORNAMENT=2]="NFT_DIAMOND_ORNAMENT",e[e.NFT_MINIMAL_WIDE=3]="NFT_MINIMAL_WIDE",e[e.NFT_MINIMAL_GREY=4]="NFT_MINIMAL_GREY",e[e.NFT_BLOCKY=5]="NFT_BLOCKY",e[e.NFT_GOLD_EDGES=6]="NFT_GOLD_EDGES",e[e.NFT_GOLD_CARVED=7]="NFT_GOLD_CARVED",e[e.NFT_GOLD_WIDE=8]="NFT_GOLD_WIDE",e[e.NFT_GOLD_ROUNDED=9]="NFT_GOLD_ROUNDED",e[e.NFT_METAL_MEDIUM=10]="NFT_METAL_MEDIUM",e[e.NFT_METAL_WIDE=11]="NFT_METAL_WIDE",e[e.NFT_METAL_SLIM=12]="NFT_METAL_SLIM",e[e.NFT_METAL_ROUNDED=13]="NFT_METAL_ROUNDED",e[e.NFT_PINS=14]="NFT_PINS",e[e.NFT_MINIMAL_BLACK=15]="NFT_MINIMAL_BLACK",e[e.NFT_MINIMAL_WHITE=16]="NFT_MINIMAL_WHITE",e[e.NFT_TAPE=17]="NFT_TAPE",e[e.NFT_WOOD_SLIM=18]="NFT_WOOD_SLIM",e[e.NFT_WOOD_WIDE=19]="NFT_WOOD_WIDE",e[e.NFT_WOOD_TWIGS=20]="NFT_WOOD_TWIGS",e[e.NFT_CANVAS=21]="NFT_CANVAS",e[e.NFT_NONE=22]="NFT_NONE"})(Fs||(Fs={}));function yl(){return{urn:"",style:void 0,color:void 0}}var co;(function(e){function n(t,r=ei.default.Writer.create()){return t.urn!==""&&r.uint32(10).string(t.urn),t.style!==void 0&&r.uint32(16).int32(t.style),t.color!==void 0&&we.encode(t.color,r.uint32(26).fork()).ldelim(),r}e.encode=n;function i(t,r){let o=t instanceof ei.default.Reader?t:ei.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=yl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.urn=o.string();continue;case 2:if(a!==16)break;c.style=o.int32();continue;case 3:if(a!==26)break;c.color=we.decode(o,o.uint32());continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(co||(co={}));var Ls={COMPONENT_ID:1040,serialize(e,n){let i=co.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return co.decode(e.buffer(),e.remainingBytes())},create(){return co.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBNftShape"}};var ti=ce(fe());function bl(){return{address:"",isGuest:!1}}var so;(function(e){function n(t,r=ti.default.Writer.create()){return t.address!==""&&r.uint32(10).string(t.address),t.isGuest===!0&&r.uint32(24).bool(t.isGuest),r}e.encode=n;function i(t,r){let o=t instanceof ti.default.Reader?t:ti.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=bl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.address=o.string();continue;case 3:if(a!==24)break;c.isGuest=o.bool();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(so||(so={}));var Ws={COMPONENT_ID:1089,serialize(e,n){let i=so.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return so.decode(e.buffer(),e.remainingBytes())},create(){return so.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBPlayerIdentityData"}};var Ut=ce(fe());function xl(){return{pointerEvents:[]}}var fo;(function(e){function n(t,r=Ut.default.Writer.create()){for(let o of t.pointerEvents)oi.encode(o,r.uint32(10).fork()).ldelim();return r}e.encode=n;function i(t,r){let o=t instanceof Ut.default.Reader?t:Ut.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=xl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.pointerEvents.push(oi.decode(o,o.uint32()));continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(fo||(fo={}));function El(){return{button:void 0,hoverText:void 0,maxDistance:void 0,showFeedback:void 0}}var ni;(function(e){function n(t,r=Ut.default.Writer.create()){return t.button!==void 0&&r.uint32(8).int32(t.button),t.hoverText!==void 0&&r.uint32(18).string(t.hoverText),t.maxDistance!==void 0&&r.uint32(29).float(t.maxDistance),t.showFeedback!==void 0&&r.uint32(32).bool(t.showFeedback),r}e.encode=n;function i(t,r){let o=t instanceof Ut.default.Reader?t:Ut.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=El();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.button=o.int32();continue;case 2:if(a!==18)break;c.hoverText=o.string();continue;case 3:if(a!==29)break;c.maxDistance=o.float();continue;case 4:if(a!==32)break;c.showFeedback=o.bool();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(ni||(ni={}));function Tl(){return{eventType:0,eventInfo:void 0}}var oi;(function(e){function n(t,r=Ut.default.Writer.create()){return t.eventType!==0&&r.uint32(8).int32(t.eventType),t.eventInfo!==void 0&&ni.encode(t.eventInfo,r.uint32(18).fork()).ldelim(),r}e.encode=n;function i(t,r){let o=t instanceof Ut.default.Reader?t:Ut.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Tl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.eventType=o.int32();continue;case 2:if(a!==18)break;c.eventInfo=ni.decode(o,o.uint32());continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(oi||(oi={}));var Vs={COMPONENT_ID:1062,serialize(e,n){let i=fo.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return fo.decode(e.buffer(),e.remainingBytes())},create(){return fo.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBPointerEvents"}};var ii=ce(fe());var ri=ce(fe());function gl(){return{position:void 0,globalOrigin:void 0,direction:void 0,normalHit:void 0,length:0,meshName:void 0,entityId:void 0}}var en;(function(e){function n(t,r=ri.default.Writer.create()){return t.position!==void 0&&ge.encode(t.position,r.uint32(10).fork()).ldelim(),t.globalOrigin!==void 0&&ge.encode(t.globalOrigin,r.uint32(18).fork()).ldelim(),t.direction!==void 0&&ge.encode(t.direction,r.uint32(26).fork()).ldelim(),t.normalHit!==void 0&&ge.encode(t.normalHit,r.uint32(34).fork()).ldelim(),t.length!==0&&r.uint32(45).float(t.length),t.meshName!==void 0&&r.uint32(50).string(t.meshName),t.entityId!==void 0&&r.uint32(56).uint32(t.entityId),r}e.encode=n;function i(t,r){let o=t instanceof ri.default.Reader?t:ri.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=gl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.position=ge.decode(o,o.uint32());continue;case 2:if(a!==18)break;c.globalOrigin=ge.decode(o,o.uint32());continue;case 3:if(a!==26)break;c.direction=ge.decode(o,o.uint32());continue;case 4:if(a!==34)break;c.normalHit=ge.decode(o,o.uint32());continue;case 5:if(a!==45)break;c.length=o.float();continue;case 6:if(a!==50)break;c.meshName=o.string();continue;case 7:if(a!==56)break;c.entityId=o.uint32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(en||(en={}));function _l(){return{button:0,hit:void 0,state:0,timestamp:0,analog:void 0,tickNumber:0}}var uo;(function(e){function n(t,r=ii.default.Writer.create()){return t.button!==0&&r.uint32(8).int32(t.button),t.hit!==void 0&&en.encode(t.hit,r.uint32(18).fork()).ldelim(),t.state!==0&&r.uint32(32).int32(t.state),t.timestamp!==0&&r.uint32(40).uint32(t.timestamp),t.analog!==void 0&&r.uint32(53).float(t.analog),t.tickNumber!==0&&r.uint32(56).uint32(t.tickNumber),r}e.encode=n;function i(t,r){let o=t instanceof ii.default.Reader?t:ii.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=_l();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.button=o.int32();continue;case 2:if(a!==18)break;c.hit=en.decode(o,o.uint32());continue;case 4:if(a!==32)break;c.state=o.int32();continue;case 5:if(a!==40)break;c.timestamp=o.uint32();continue;case 6:if(a!==53)break;c.analog=o.float();continue;case 7:if(a!==56)break;c.tickNumber=o.uint32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(uo||(uo={}));var Hs={COMPONENT_ID:1063,serialize(e,n){let i=uo.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return uo.decode(e.buffer(),e.remainingBytes())},create(){return uo.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBPointerEventsResult"}};var ai=ce(fe());function kl(){return{isPointerLocked:!1}}var lo;(function(e){function n(t,r=ai.default.Writer.create()){return t.isPointerLocked===!0&&r.uint32(8).bool(t.isPointerLocked),r}e.encode=n;function i(t,r){let o=t instanceof ai.default.Reader?t:ai.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=kl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.isPointerLocked=o.bool();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(lo||(lo={}));var Gs={COMPONENT_ID:1074,serialize(e,n){let i=lo.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return lo.decode(e.buffer(),e.remainingBytes())},create(){return lo.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBPointerLock"}};var ci=ce(fe());var js;(function(e){e[e.RQT_HIT_FIRST=0]="RQT_HIT_FIRST",e[e.RQT_QUERY_ALL=1]="RQT_QUERY_ALL",e[e.RQT_NONE=2]="RQT_NONE"})(js||(js={}));function Rl(){return{timestamp:void 0,originOffset:void 0,direction:void 0,maxDistance:0,queryType:0,continuous:void 0,collisionMask:void 0}}var po;(function(e){function n(t,r=ci.default.Writer.create()){switch(t.timestamp!==void 0&&r.uint32(8).uint32(t.timestamp),t.originOffset!==void 0&&ge.encode(t.originOffset,r.uint32(18).fork()).ldelim(),t.direction?.$case){case"localDirection":ge.encode(t.direction.localDirection,r.uint32(50).fork()).ldelim();break;case"globalDirection":ge.encode(t.direction.globalDirection,r.uint32(26).fork()).ldelim();break;case"globalTarget":ge.encode(t.direction.globalTarget,r.uint32(58).fork()).ldelim();break;case"targetEntity":r.uint32(80).uint32(t.direction.targetEntity);break}return t.maxDistance!==0&&r.uint32(37).float(t.maxDistance),t.queryType!==0&&r.uint32(40).int32(t.queryType),t.continuous!==void 0&&r.uint32(64).bool(t.continuous),t.collisionMask!==void 0&&r.uint32(72).uint32(t.collisionMask),r}e.encode=n;function i(t,r){let o=t instanceof ci.default.Reader?t:ci.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Rl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.timestamp=o.uint32();continue;case 2:if(a!==18)break;c.originOffset=ge.decode(o,o.uint32());continue;case 6:if(a!==50)break;c.direction={$case:"localDirection",localDirection:ge.decode(o,o.uint32())};continue;case 3:if(a!==26)break;c.direction={$case:"globalDirection",globalDirection:ge.decode(o,o.uint32())};continue;case 7:if(a!==58)break;c.direction={$case:"globalTarget",globalTarget:ge.decode(o,o.uint32())};continue;case 10:if(a!==80)break;c.direction={$case:"targetEntity",targetEntity:o.uint32()};continue;case 4:if(a!==37)break;c.maxDistance=o.float();continue;case 5:if(a!==40)break;c.queryType=o.int32();continue;case 8:if(a!==64)break;c.continuous=o.bool();continue;case 9:if(a!==72)break;c.collisionMask=o.uint32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(po||(po={}));var $s={COMPONENT_ID:1067,serialize(e,n){let i=po.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return po.decode(e.buffer(),e.remainingBytes())},create(){return po.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBRaycast"}};var si=ce(fe());function Sl(){return{timestamp:void 0,globalOrigin:void 0,direction:void 0,hits:[],tickNumber:0}}var mo;(function(e){function n(t,r=si.default.Writer.create()){t.timestamp!==void 0&&r.uint32(8).uint32(t.timestamp),t.globalOrigin!==void 0&&ge.encode(t.globalOrigin,r.uint32(18).fork()).ldelim(),t.direction!==void 0&&ge.encode(t.direction,r.uint32(26).fork()).ldelim();for(let o of t.hits)en.encode(o,r.uint32(34).fork()).ldelim();return t.tickNumber!==0&&r.uint32(40).uint32(t.tickNumber),r}e.encode=n;function i(t,r){let o=t instanceof si.default.Reader?t:si.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Sl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.timestamp=o.uint32();continue;case 2:if(a!==18)break;c.globalOrigin=ge.decode(o,o.uint32());continue;case 3:if(a!==26)break;c.direction=ge.decode(o,o.uint32());continue;case 4:if(a!==34)break;c.hits.push(en.decode(o,o.uint32()));continue;case 5:if(a!==40)break;c.tickNumber=o.uint32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(mo||(mo={}));var Ys={COMPONENT_ID:1068,serialize(e,n){let i=mo.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return mo.decode(e.buffer(),e.remainingBytes())},create(){return mo.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBRaycastResult"}};var fi=ce(fe());function wl(){return{text:"",font:void 0,fontSize:void 0,fontAutoSize:void 0,textAlign:void 0,width:void 0,height:void 0,paddingTop:void 0,paddingRight:void 0,paddingBottom:void 0,paddingLeft:void 0,lineSpacing:void 0,lineCount:void 0,textWrapping:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,outlineWidth:void 0,shadowColor:void 0,outlineColor:void 0,textColor:void 0}}var ho;(function(e){function n(t,r=fi.default.Writer.create()){return t.text!==""&&r.uint32(10).string(t.text),t.font!==void 0&&r.uint32(16).int32(t.font),t.fontSize!==void 0&&r.uint32(29).float(t.fontSize),t.fontAutoSize!==void 0&&r.uint32(32).bool(t.fontAutoSize),t.textAlign!==void 0&&r.uint32(40).int32(t.textAlign),t.width!==void 0&&r.uint32(53).float(t.width),t.height!==void 0&&r.uint32(61).float(t.height),t.paddingTop!==void 0&&r.uint32(69).float(t.paddingTop),t.paddingRight!==void 0&&r.uint32(77).float(t.paddingRight),t.paddingBottom!==void 0&&r.uint32(85).float(t.paddingBottom),t.paddingLeft!==void 0&&r.uint32(93).float(t.paddingLeft),t.lineSpacing!==void 0&&r.uint32(101).float(t.lineSpacing),t.lineCount!==void 0&&r.uint32(104).int32(t.lineCount),t.textWrapping!==void 0&&r.uint32(112).bool(t.textWrapping),t.shadowBlur!==void 0&&r.uint32(125).float(t.shadowBlur),t.shadowOffsetX!==void 0&&r.uint32(133).float(t.shadowOffsetX),t.shadowOffsetY!==void 0&&r.uint32(141).float(t.shadowOffsetY),t.outlineWidth!==void 0&&r.uint32(149).float(t.outlineWidth),t.shadowColor!==void 0&&we.encode(t.shadowColor,r.uint32(154).fork()).ldelim(),t.outlineColor!==void 0&&we.encode(t.outlineColor,r.uint32(162).fork()).ldelim(),t.textColor!==void 0&&Be.encode(t.textColor,r.uint32(170).fork()).ldelim(),r}e.encode=n;function i(t,r){let o=t instanceof fi.default.Reader?t:fi.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=wl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.text=o.string();continue;case 2:if(a!==16)break;c.font=o.int32();continue;case 3:if(a!==29)break;c.fontSize=o.float();continue;case 4:if(a!==32)break;c.fontAutoSize=o.bool();continue;case 5:if(a!==40)break;c.textAlign=o.int32();continue;case 6:if(a!==53)break;c.width=o.float();continue;case 7:if(a!==61)break;c.height=o.float();continue;case 8:if(a!==69)break;c.paddingTop=o.float();continue;case 9:if(a!==77)break;c.paddingRight=o.float();continue;case 10:if(a!==85)break;c.paddingBottom=o.float();continue;case 11:if(a!==93)break;c.paddingLeft=o.float();continue;case 12:if(a!==101)break;c.lineSpacing=o.float();continue;case 13:if(a!==104)break;c.lineCount=o.int32();continue;case 14:if(a!==112)break;c.textWrapping=o.bool();continue;case 15:if(a!==125)break;c.shadowBlur=o.float();continue;case 16:if(a!==133)break;c.shadowOffsetX=o.float();continue;case 17:if(a!==141)break;c.shadowOffsetY=o.float();continue;case 18:if(a!==149)break;c.outlineWidth=o.float();continue;case 19:if(a!==154)break;c.shadowColor=we.decode(o,o.uint32());continue;case 20:if(a!==162)break;c.outlineColor=we.decode(o,o.uint32());continue;case 21:if(a!==170)break;c.textColor=Be.decode(o,o.uint32());continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(ho||(ho={}));var Js={COMPONENT_ID:1030,serialize(e,n){let i=ho.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return ho.decode(e.buffer(),e.remainingBytes())},create(){return ho.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBTextShape"}};var ui=ce(fe());var On=ce(fe());function Al(){return{top:0,left:0,right:0,bottom:0}}var tn;(function(e){function n(t,r=On.default.Writer.create()){return t.top!==0&&r.uint32(13).float(t.top),t.left!==0&&r.uint32(21).float(t.left),t.right!==0&&r.uint32(29).float(t.right),t.bottom!==0&&r.uint32(37).float(t.bottom),r}e.encode=n;function i(t,r){let o=t instanceof On.default.Reader?t:On.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Al();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.top=o.float();continue;case 2:if(a!==21)break;c.left=o.float();continue;case 3:if(a!==29)break;c.right=o.float();continue;case 4:if(a!==37)break;c.bottom=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(tn||(tn={}));function Il(){return{x:0,y:0,width:0,height:0}}var Zs;(function(e){function n(t,r=On.default.Writer.create()){return t.x!==0&&r.uint32(13).float(t.x),t.y!==0&&r.uint32(21).float(t.y),t.width!==0&&r.uint32(29).float(t.width),t.height!==0&&r.uint32(37).float(t.height),r}e.encode=n;function i(t,r){let o=t instanceof On.default.Reader?t:On.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Il();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.x=o.float();continue;case 2:if(a!==21)break;c.y=o.float();continue;case 3:if(a!==29)break;c.width=o.float();continue;case 4:if(a!==37)break;c.height=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Zs||(Zs={}));var qs;(function(e){e[e.NINE_SLICES=0]="NINE_SLICES",e[e.CENTER=1]="CENTER",e[e.STRETCH=2]="STRETCH"})(qs||(qs={}));function Nl(){return{color:void 0,texture:void 0,textureMode:0,textureSlices:void 0,uvs:[]}}var yo;(function(e){function n(t,r=ui.default.Writer.create()){t.color!==void 0&&Be.encode(t.color,r.uint32(10).fork()).ldelim(),t.texture!==void 0&&Xe.encode(t.texture,r.uint32(18).fork()).ldelim(),t.textureMode!==0&&r.uint32(24).int32(t.textureMode),t.textureSlices!==void 0&&tn.encode(t.textureSlices,r.uint32(34).fork()).ldelim(),r.uint32(42).fork();for(let o of t.uvs)r.float(o);return r.ldelim(),r}e.encode=n;function i(t,r){let o=t instanceof ui.default.Reader?t:ui.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Nl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.color=Be.decode(o,o.uint32());continue;case 2:if(a!==18)break;c.texture=Xe.decode(o,o.uint32());continue;case 3:if(a!==24)break;c.textureMode=o.int32();continue;case 4:if(a!==34)break;c.textureSlices=tn.decode(o,o.uint32());continue;case 5:if(a===45){c.uvs.push(o.float());continue}if(a===42){let u=o.uint32()+o.pos;for(;o.pos<u;)c.uvs.push(o.float());continue}break}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(yo||(yo={}));var Xs={COMPONENT_ID:1053,serialize(e,n){let i=yo.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return yo.decode(e.buffer(),e.remainingBytes())},create(){return yo.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBUiBackground"}};var di=ce(fe());function Ol(){return{devicePixelRatio:0,width:0,height:0,interactableArea:void 0}}var bo;(function(e){function n(t,r=di.default.Writer.create()){return t.devicePixelRatio!==0&&r.uint32(13).float(t.devicePixelRatio),t.width!==0&&r.uint32(16).int32(t.width),t.height!==0&&r.uint32(24).int32(t.height),t.interactableArea!==void 0&&tn.encode(t.interactableArea,r.uint32(34).fork()).ldelim(),r}e.encode=n;function i(t,r){let o=t instanceof di.default.Reader?t:di.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Ol();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==13)break;c.devicePixelRatio=o.float();continue;case 2:if(a!==16)break;c.width=o.int32();continue;case 3:if(a!==24)break;c.height=o.int32();continue;case 4:if(a!==34)break;c.interactableArea=tn.decode(o,o.uint32());continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(bo||(bo={}));var Ks={COMPONENT_ID:1054,serialize(e,n){let i=bo.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return bo.decode(e.buffer(),e.remainingBytes())},create(){return bo.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBUiCanvasInformation"}};var li=ce(fe());function Bl(){return{acceptEmpty:!1,emptyLabel:void 0,options:[],selectedIndex:void 0,disabled:!1,color:void 0,textAlign:void 0,font:void 0,fontSize:void 0}}var xo;(function(e){function n(t,r=li.default.Writer.create()){t.acceptEmpty===!0&&r.uint32(8).bool(t.acceptEmpty),t.emptyLabel!==void 0&&r.uint32(18).string(t.emptyLabel);for(let o of t.options)r.uint32(26).string(o);return t.selectedIndex!==void 0&&r.uint32(32).int32(t.selectedIndex),t.disabled===!0&&r.uint32(40).bool(t.disabled),t.color!==void 0&&Be.encode(t.color,r.uint32(50).fork()).ldelim(),t.textAlign!==void 0&&r.uint32(80).int32(t.textAlign),t.font!==void 0&&r.uint32(88).int32(t.font),t.fontSize!==void 0&&r.uint32(96).int32(t.fontSize),r}e.encode=n;function i(t,r){let o=t instanceof li.default.Reader?t:li.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Bl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.acceptEmpty=o.bool();continue;case 2:if(a!==18)break;c.emptyLabel=o.string();continue;case 3:if(a!==26)break;c.options.push(o.string());continue;case 4:if(a!==32)break;c.selectedIndex=o.int32();continue;case 5:if(a!==40)break;c.disabled=o.bool();continue;case 6:if(a!==50)break;c.color=Be.decode(o,o.uint32());continue;case 10:if(a!==80)break;c.textAlign=o.int32();continue;case 11:if(a!==88)break;c.font=o.int32();continue;case 12:if(a!==96)break;c.fontSize=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(xo||(xo={}));var Qs={COMPONENT_ID:1094,serialize(e,n){let i=xo.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return xo.decode(e.buffer(),e.remainingBytes())},create(){return xo.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBUiDropdown"}};var pi=ce(fe());function Cl(){return{value:0}}var Eo;(function(e){function n(t,r=pi.default.Writer.create()){return t.value!==0&&r.uint32(8).int32(t.value),r}e.encode=n;function i(t,r){let o=t instanceof pi.default.Reader?t:pi.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Cl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.value=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Eo||(Eo={}));var ef={COMPONENT_ID:1096,serialize(e,n){let i=Eo.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Eo.decode(e.buffer(),e.remainingBytes())},create(){return Eo.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBUiDropdownResult"}};var mi=ce(fe());function Pl(){return{placeholder:"",color:void 0,placeholderColor:void 0,disabled:!1,textAlign:void 0,font:void 0,fontSize:void 0,value:void 0}}var To;(function(e){function n(t,r=mi.default.Writer.create()){return t.placeholder!==""&&r.uint32(10).string(t.placeholder),t.color!==void 0&&Be.encode(t.color,r.uint32(18).fork()).ldelim(),t.placeholderColor!==void 0&&Be.encode(t.placeholderColor,r.uint32(26).fork()).ldelim(),t.disabled===!0&&r.uint32(32).bool(t.disabled),t.textAlign!==void 0&&r.uint32(80).int32(t.textAlign),t.font!==void 0&&r.uint32(88).int32(t.font),t.fontSize!==void 0&&r.uint32(96).int32(t.fontSize),t.value!==void 0&&r.uint32(106).string(t.value),r}e.encode=n;function i(t,r){let o=t instanceof mi.default.Reader?t:mi.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Pl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.placeholder=o.string();continue;case 2:if(a!==18)break;c.color=Be.decode(o,o.uint32());continue;case 3:if(a!==26)break;c.placeholderColor=Be.decode(o,o.uint32());continue;case 4:if(a!==32)break;c.disabled=o.bool();continue;case 10:if(a!==80)break;c.textAlign=o.int32();continue;case 11:if(a!==88)break;c.font=o.int32();continue;case 12:if(a!==96)break;c.fontSize=o.int32();continue;case 13:if(a!==106)break;c.value=o.string();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(To||(To={}));var tf={COMPONENT_ID:1093,serialize(e,n){let i=To.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return To.decode(e.buffer(),e.remainingBytes())},create(){return To.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBUiInput"}};var hi=ce(fe());function zl(){return{value:""}}var go;(function(e){function n(t,r=hi.default.Writer.create()){return t.value!==""&&r.uint32(10).string(t.value),r}e.encode=n;function i(t,r){let o=t instanceof hi.default.Reader?t:hi.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=zl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.value=o.string();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(go||(go={}));var nf={COMPONENT_ID:1095,serialize(e,n){let i=go.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return go.decode(e.buffer(),e.remainingBytes())},create(){return go.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBUiInputResult"}};var yi=ce(fe());function Ml(){return{value:"",color:void 0,textAlign:void 0,font:void 0,fontSize:void 0}}var _o;(function(e){function n(t,r=yi.default.Writer.create()){return t.value!==""&&r.uint32(10).string(t.value),t.color!==void 0&&Be.encode(t.color,r.uint32(18).fork()).ldelim(),t.textAlign!==void 0&&r.uint32(24).int32(t.textAlign),t.font!==void 0&&r.uint32(32).int32(t.font),t.fontSize!==void 0&&r.uint32(40).int32(t.fontSize),r}e.encode=n;function i(t,r){let o=t instanceof yi.default.Reader?t:yi.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Ml();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.value=o.string();continue;case 2:if(a!==18)break;c.color=Be.decode(o,o.uint32());continue;case 3:if(a!==24)break;c.textAlign=o.int32();continue;case 4:if(a!==32)break;c.font=o.int32();continue;case 5:if(a!==40)break;c.fontSize=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(_o||(_o={}));var of={COMPONENT_ID:1052,serialize(e,n){let i=_o.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return _o.decode(e.buffer(),e.remainingBytes())},create(){return _o.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBUiText"}};var bi=ce(fe());var rf;(function(e){e[e.YGPT_RELATIVE=0]="YGPT_RELATIVE",e[e.YGPT_ABSOLUTE=1]="YGPT_ABSOLUTE"})(rf||(rf={}));var af;(function(e){e[e.YGA_AUTO=0]="YGA_AUTO",e[e.YGA_FLEX_START=1]="YGA_FLEX_START",e[e.YGA_CENTER=2]="YGA_CENTER",e[e.YGA_FLEX_END=3]="YGA_FLEX_END",e[e.YGA_STRETCH=4]="YGA_STRETCH",e[e.YGA_BASELINE=5]="YGA_BASELINE",e[e.YGA_SPACE_BETWEEN=6]="YGA_SPACE_BETWEEN",e[e.YGA_SPACE_AROUND=7]="YGA_SPACE_AROUND"})(af||(af={}));var cf;(function(e){e[e.YGU_UNDEFINED=0]="YGU_UNDEFINED",e[e.YGU_POINT=1]="YGU_POINT",e[e.YGU_PERCENT=2]="YGU_PERCENT",e[e.YGU_AUTO=3]="YGU_AUTO"})(cf||(cf={}));var sf;(function(e){e[e.YGFD_ROW=0]="YGFD_ROW",e[e.YGFD_COLUMN=1]="YGFD_COLUMN",e[e.YGFD_COLUMN_REVERSE=2]="YGFD_COLUMN_REVERSE",e[e.YGFD_ROW_REVERSE=3]="YGFD_ROW_REVERSE"})(sf||(sf={}));var ff;(function(e){e[e.YGW_NO_WRAP=0]="YGW_NO_WRAP",e[e.YGW_WRAP=1]="YGW_WRAP",e[e.YGW_WRAP_REVERSE=2]="YGW_WRAP_REVERSE"})(ff||(ff={}));var uf;(function(e){e[e.YGJ_FLEX_START=0]="YGJ_FLEX_START",e[e.YGJ_CENTER=1]="YGJ_CENTER",e[e.YGJ_FLEX_END=2]="YGJ_FLEX_END",e[e.YGJ_SPACE_BETWEEN=3]="YGJ_SPACE_BETWEEN",e[e.YGJ_SPACE_AROUND=4]="YGJ_SPACE_AROUND",e[e.YGJ_SPACE_EVENLY=5]="YGJ_SPACE_EVENLY"})(uf||(uf={}));var df;(function(e){e[e.YGO_VISIBLE=0]="YGO_VISIBLE",e[e.YGO_HIDDEN=1]="YGO_HIDDEN",e[e.YGO_SCROLL=2]="YGO_SCROLL"})(df||(df={}));var lf;(function(e){e[e.YGD_FLEX=0]="YGD_FLEX",e[e.YGD_NONE=1]="YGD_NONE"})(lf||(lf={}));var pf;(function(e){e[e.YGE_LEFT=0]="YGE_LEFT",e[e.YGE_TOP=1]="YGE_TOP",e[e.YGE_RIGHT=2]="YGE_RIGHT",e[e.YGE_BOTTOM=3]="YGE_BOTTOM",e[e.YGE_START=4]="YGE_START",e[e.YGE_END=5]="YGE_END",e[e.YGE_HORIZONTAL=6]="YGE_HORIZONTAL",e[e.YGE_VERTICAL=7]="YGE_VERTICAL",e[e.YGE_ALL=8]="YGE_ALL"})(pf||(pf={}));function vl(){return{parent:0,rightOf:0,alignContent:void 0,alignItems:void 0,flexWrap:void 0,flexShrink:void 0,positionType:0,alignSelf:0,flexDirection:0,justifyContent:0,overflow:0,display:0,flexBasisUnit:0,flexBasis:0,flexGrow:0,widthUnit:0,width:0,heightUnit:0,height:0,minWidthUnit:0,minWidth:0,minHeightUnit:0,minHeight:0,maxWidthUnit:0,maxWidth:0,maxHeightUnit:0,maxHeight:0,positionLeftUnit:0,positionLeft:0,positionTopUnit:0,positionTop:0,positionRightUnit:0,positionRight:0,positionBottomUnit:0,positionBottom:0,marginLeftUnit:0,marginLeft:0,marginTopUnit:0,marginTop:0,marginRightUnit:0,marginRight:0,marginBottomUnit:0,marginBottom:0,paddingLeftUnit:0,paddingLeft:0,paddingTopUnit:0,paddingTop:0,paddingRightUnit:0,paddingRight:0,paddingBottomUnit:0,paddingBottom:0}}var ko;(function(e){function n(t,r=bi.default.Writer.create()){return t.parent!==0&&r.uint32(8).int32(t.parent),t.rightOf!==0&&r.uint32(16).int32(t.rightOf),t.alignContent!==void 0&&r.uint32(24).int32(t.alignContent),t.alignItems!==void 0&&r.uint32(32).int32(t.alignItems),t.flexWrap!==void 0&&r.uint32(40).int32(t.flexWrap),t.flexShrink!==void 0&&r.uint32(53).float(t.flexShrink),t.positionType!==0&&r.uint32(56).int32(t.positionType),t.alignSelf!==0&&r.uint32(64).int32(t.alignSelf),t.flexDirection!==0&&r.uint32(72).int32(t.flexDirection),t.justifyContent!==0&&r.uint32(80).int32(t.justifyContent),t.overflow!==0&&r.uint32(88).int32(t.overflow),t.display!==0&&r.uint32(96).int32(t.display),t.flexBasisUnit!==0&&r.uint32(104).int32(t.flexBasisUnit),t.flexBasis!==0&&r.uint32(117).float(t.flexBasis),t.flexGrow!==0&&r.uint32(125).float(t.flexGrow),t.widthUnit!==0&&r.uint32(128).int32(t.widthUnit),t.width!==0&&r.uint32(141).float(t.width),t.heightUnit!==0&&r.uint32(144).int32(t.heightUnit),t.height!==0&&r.uint32(157).float(t.height),t.minWidthUnit!==0&&r.uint32(160).int32(t.minWidthUnit),t.minWidth!==0&&r.uint32(173).float(t.minWidth),t.minHeightUnit!==0&&r.uint32(176).int32(t.minHeightUnit),t.minHeight!==0&&r.uint32(189).float(t.minHeight),t.maxWidthUnit!==0&&r.uint32(192).int32(t.maxWidthUnit),t.maxWidth!==0&&r.uint32(205).float(t.maxWidth),t.maxHeightUnit!==0&&r.uint32(208).int32(t.maxHeightUnit),t.maxHeight!==0&&r.uint32(221).float(t.maxHeight),t.positionLeftUnit!==0&&r.uint32(224).int32(t.positionLeftUnit),t.positionLeft!==0&&r.uint32(237).float(t.positionLeft),t.positionTopUnit!==0&&r.uint32(240).int32(t.positionTopUnit),t.positionTop!==0&&r.uint32(253).float(t.positionTop),t.positionRightUnit!==0&&r.uint32(256).int32(t.positionRightUnit),t.positionRight!==0&&r.uint32(269).float(t.positionRight),t.positionBottomUnit!==0&&r.uint32(272).int32(t.positionBottomUnit),t.positionBottom!==0&&r.uint32(285).float(t.positionBottom),t.marginLeftUnit!==0&&r.uint32(288).int32(t.marginLeftUnit),t.marginLeft!==0&&r.uint32(301).float(t.marginLeft),t.marginTopUnit!==0&&r.uint32(304).int32(t.marginTopUnit),t.marginTop!==0&&r.uint32(317).float(t.marginTop),t.marginRightUnit!==0&&r.uint32(320).int32(t.marginRightUnit),t.marginRight!==0&&r.uint32(333).float(t.marginRight),t.marginBottomUnit!==0&&r.uint32(336).int32(t.marginBottomUnit),t.marginBottom!==0&&r.uint32(349).float(t.marginBottom),t.paddingLeftUnit!==0&&r.uint32(352).int32(t.paddingLeftUnit),t.paddingLeft!==0&&r.uint32(365).float(t.paddingLeft),t.paddingTopUnit!==0&&r.uint32(368).int32(t.paddingTopUnit),t.paddingTop!==0&&r.uint32(381).float(t.paddingTop),t.paddingRightUnit!==0&&r.uint32(384).int32(t.paddingRightUnit),t.paddingRight!==0&&r.uint32(397).float(t.paddingRight),t.paddingBottomUnit!==0&&r.uint32(400).int32(t.paddingBottomUnit),t.paddingBottom!==0&&r.uint32(413).float(t.paddingBottom),r}e.encode=n;function i(t,r){let o=t instanceof bi.default.Reader?t:bi.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=vl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.parent=o.int32();continue;case 2:if(a!==16)break;c.rightOf=o.int32();continue;case 3:if(a!==24)break;c.alignContent=o.int32();continue;case 4:if(a!==32)break;c.alignItems=o.int32();continue;case 5:if(a!==40)break;c.flexWrap=o.int32();continue;case 6:if(a!==53)break;c.flexShrink=o.float();continue;case 7:if(a!==56)break;c.positionType=o.int32();continue;case 8:if(a!==64)break;c.alignSelf=o.int32();continue;case 9:if(a!==72)break;c.flexDirection=o.int32();continue;case 10:if(a!==80)break;c.justifyContent=o.int32();continue;case 11:if(a!==88)break;c.overflow=o.int32();continue;case 12:if(a!==96)break;c.display=o.int32();continue;case 13:if(a!==104)break;c.flexBasisUnit=o.int32();continue;case 14:if(a!==117)break;c.flexBasis=o.float();continue;case 15:if(a!==125)break;c.flexGrow=o.float();continue;case 16:if(a!==128)break;c.widthUnit=o.int32();continue;case 17:if(a!==141)break;c.width=o.float();continue;case 18:if(a!==144)break;c.heightUnit=o.int32();continue;case 19:if(a!==157)break;c.height=o.float();continue;case 20:if(a!==160)break;c.minWidthUnit=o.int32();continue;case 21:if(a!==173)break;c.minWidth=o.float();continue;case 22:if(a!==176)break;c.minHeightUnit=o.int32();continue;case 23:if(a!==189)break;c.minHeight=o.float();continue;case 24:if(a!==192)break;c.maxWidthUnit=o.int32();continue;case 25:if(a!==205)break;c.maxWidth=o.float();continue;case 26:if(a!==208)break;c.maxHeightUnit=o.int32();continue;case 27:if(a!==221)break;c.maxHeight=o.float();continue;case 28:if(a!==224)break;c.positionLeftUnit=o.int32();continue;case 29:if(a!==237)break;c.positionLeft=o.float();continue;case 30:if(a!==240)break;c.positionTopUnit=o.int32();continue;case 31:if(a!==253)break;c.positionTop=o.float();continue;case 32:if(a!==256)break;c.positionRightUnit=o.int32();continue;case 33:if(a!==269)break;c.positionRight=o.float();continue;case 34:if(a!==272)break;c.positionBottomUnit=o.int32();continue;case 35:if(a!==285)break;c.positionBottom=o.float();continue;case 36:if(a!==288)break;c.marginLeftUnit=o.int32();continue;case 37:if(a!==301)break;c.marginLeft=o.float();continue;case 38:if(a!==304)break;c.marginTopUnit=o.int32();continue;case 39:if(a!==317)break;c.marginTop=o.float();continue;case 40:if(a!==320)break;c.marginRightUnit=o.int32();continue;case 41:if(a!==333)break;c.marginRight=o.float();continue;case 42:if(a!==336)break;c.marginBottomUnit=o.int32();continue;case 43:if(a!==349)break;c.marginBottom=o.float();continue;case 44:if(a!==352)break;c.paddingLeftUnit=o.int32();continue;case 45:if(a!==365)break;c.paddingLeft=o.float();continue;case 46:if(a!==368)break;c.paddingTopUnit=o.int32();continue;case 47:if(a!==381)break;c.paddingTop=o.float();continue;case 48:if(a!==384)break;c.paddingRightUnit=o.int32();continue;case 49:if(a!==397)break;c.paddingRight=o.float();continue;case 50:if(a!==400)break;c.paddingBottomUnit=o.int32();continue;case 51:if(a!==413)break;c.paddingBottom=o.float();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(ko||(ko={}));var mf={COMPONENT_ID:1050,serialize(e,n){let i=ko.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return ko.decode(e.buffer(),e.remainingBytes())},create(){return ko.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBUiTransform"}};var xi=ce(fe());var hf;(function(e){e[e.VS_NONE=0]="VS_NONE",e[e.VS_ERROR=1]="VS_ERROR",e[e.VS_LOADING=2]="VS_LOADING",e[e.VS_READY=3]="VS_READY",e[e.VS_PLAYING=4]="VS_PLAYING",e[e.VS_BUFFERING=5]="VS_BUFFERING",e[e.VS_SEEKING=6]="VS_SEEKING",e[e.VS_PAUSED=7]="VS_PAUSED"})(hf||(hf={}));function Ul(){return{timestamp:0,tickNumber:0,currentOffset:0,videoLength:0,state:0}}var Ro;(function(e){function n(t,r=xi.default.Writer.create()){return t.timestamp!==0&&r.uint32(8).uint32(t.timestamp),t.tickNumber!==0&&r.uint32(16).uint32(t.tickNumber),t.currentOffset!==0&&r.uint32(29).float(t.currentOffset),t.videoLength!==0&&r.uint32(37).float(t.videoLength),t.state!==0&&r.uint32(40).int32(t.state),r}e.encode=n;function i(t,r){let o=t instanceof xi.default.Reader?t:xi.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Ul();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.timestamp=o.uint32();continue;case 2:if(a!==16)break;c.tickNumber=o.uint32();continue;case 3:if(a!==29)break;c.currentOffset=o.float();continue;case 4:if(a!==37)break;c.videoLength=o.float();continue;case 5:if(a!==40)break;c.state=o.int32();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(Ro||(Ro={}));var yf={COMPONENT_ID:1044,serialize(e,n){let i=Ro.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return Ro.decode(e.buffer(),e.remainingBytes())},create(){return Ro.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBVideoEvent"}};var Ei=ce(fe());function Dl(){return{src:"",playing:void 0,position:void 0,volume:void 0,playbackRate:void 0,loop:void 0}}var So;(function(e){function n(t,r=Ei.default.Writer.create()){return t.src!==""&&r.uint32(10).string(t.src),t.playing!==void 0&&r.uint32(16).bool(t.playing),t.position!==void 0&&r.uint32(29).float(t.position),t.volume!==void 0&&r.uint32(37).float(t.volume),t.playbackRate!==void 0&&r.uint32(45).float(t.playbackRate),t.loop!==void 0&&r.uint32(48).bool(t.loop),r}e.encode=n;function i(t,r){let o=t instanceof Ei.default.Reader?t:Ei.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Dl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==10)break;c.src=o.string();continue;case 2:if(a!==16)break;c.playing=o.bool();continue;case 3:if(a!==29)break;c.position=o.float();continue;case 4:if(a!==37)break;c.volume=o.float();continue;case 5:if(a!==45)break;c.playbackRate=o.float();continue;case 6:if(a!==48)break;c.loop=o.bool();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(So||(So={}));var bf={COMPONENT_ID:1043,serialize(e,n){let i=So.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return So.decode(e.buffer(),e.remainingBytes())},create(){return So.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBVideoPlayer"}};var Ti=ce(fe());function Fl(){return{visible:void 0}}var wo;(function(e){function n(t,r=Ti.default.Writer.create()){return t.visible!==void 0&&r.uint32(8).bool(t.visible),r}e.encode=n;function i(t,r){let o=t instanceof Ti.default.Reader?t:Ti.default.Reader.create(t),s=r===void 0?o.len:o.pos+r,c=Fl();for(;o.pos<s;){let a=o.uint32();switch(a>>>3){case 1:if(a!==8)break;c.visible=o.bool();continue}if((a&7)===4||a===0)break;o.skipType(a&7)}return c}e.decode=i})(wo||(wo={}));var xf={COMPONENT_ID:1081,serialize(e,n){let i=wo.encode(e),t=new Uint8Array(i.finish(),0,i.len);n.writeBuffer(t,!1)},deserialize(e){return wo.decode(e.buffer(),e.remainingBytes())},create(){return wo.decode(new Uint8Array)},jsonSchema:{type:"object",properties:{},serializationType:"protocol-buffer",protocolBuffer:"PBVisibilityComponent"}};var ka=e=>e.defineComponentFromSchema("core::Animator",os),Ra=e=>e.defineComponentFromSchema("core::AudioSource",rs),Ef=e=>e.defineComponentFromSchema("core::AudioStream",is),Sa=e=>e.defineComponentFromSchema("core::AvatarAttach",as),Tf=e=>e.defineComponentFromSchema("core::AvatarBase",cs),gf=e=>e.defineComponentFromSchema("core::AvatarEmoteCommand",ss),_f=e=>e.defineComponentFromSchema("core::AvatarEquippedData",fs),kf=e=>e.defineComponentFromSchema("core::AvatarModifierArea",ms),Rf=e=>e.defineComponentFromSchema("core::AvatarShape",Ss),Sf=e=>e.defineComponentFromSchema("core::Billboard",As),wf=e=>e.defineComponentFromSchema("core::CameraMode",Is),Af=e=>e.defineComponentFromSchema("core::CameraModeArea",Ns),If=e=>e.defineComponentFromSchema("core::EngineInfo",Os),wa=e=>e.defineComponentFromSchema("core::GltfContainer",Bs),Nf=e=>e.defineComponentFromSchema("core::GltfContainerLoadingState",Cs),Of=e=>e.defineComponentFromSchema("core::Material",vs),Aa=e=>e.defineComponentFromSchema("core::MeshCollider",Us),Bf=e=>e.defineComponentFromSchema("core::MeshRenderer",Ds),Cf=e=>e.defineComponentFromSchema("core::NftShape",Ls),Pf=e=>e.defineComponentFromSchema("core::PlayerIdentityData",Ws),gi=e=>e.defineComponentFromSchema("core::PointerEvents",Vs),Yo=e=>e.defineValueSetComponentFromSchema("core::PointerEventsResult",Hs,{timestampFunction:n=>n.timestamp,maxElements:100}),zf=e=>e.defineComponentFromSchema("core::PointerLock",Gs),Ia=e=>e.defineComponentFromSchema("core::Raycast",$s),Na=e=>e.defineComponentFromSchema("core::RaycastResult",Ys),Mf=e=>e.defineComponentFromSchema("core::TextShape",Js),vf=e=>e.defineComponentFromSchema("core::UiBackground",Xs),Uf=e=>e.defineComponentFromSchema("core::UiCanvasInformation",Ks),Df=e=>e.defineComponentFromSchema("core::UiDropdown",Qs),Ff=e=>e.defineComponentFromSchema("core::UiDropdownResult",ef),Lf=e=>e.defineComponentFromSchema("core::UiInput",tf),Wf=e=>e.defineComponentFromSchema("core::UiInputResult",nf),Vf=e=>e.defineComponentFromSchema("core::UiText",of),Hf=e=>e.defineComponentFromSchema("core::UiTransform",mf),Oa=e=>e.defineValueSetComponentFromSchema("core::VideoEvent",yf,{timestampFunction:n=>n.timestamp,maxElements:100}),Ba=e=>e.defineComponentFromSchema("core::VideoPlayer",bf),Gf=e=>e.defineComponentFromSchema("core::VisibilityComponent",xf),Ca={"core::Animator":ka,"core::AudioSource":Ra,"core::AudioStream":Ef,"core::AvatarAttach":Sa,"core::AvatarBase":Tf,"core::AvatarEmoteCommand":gf,"core::AvatarEquippedData":_f,"core::AvatarModifierArea":kf,"core::AvatarShape":Rf,"core::Billboard":Sf,"core::CameraMode":wf,"core::CameraModeArea":Af,"core::EngineInfo":If,"core::GltfContainer":wa,"core::GltfContainerLoadingState":Nf,"core::Material":Of,"core::MeshCollider":Aa,"core::MeshRenderer":Bf,"core::NftShape":Cf,"core::PlayerIdentityData":Pf,"core::PointerEvents":gi,"core::PointerEventsResult":Yo,"core::PointerLock":zf,"core::Raycast":Ia,"core::RaycastResult":Na,"core::TextShape":Mf,"core::UiBackground":vf,"core::UiCanvasInformation":Uf,"core::UiDropdown":Df,"core::UiDropdownResult":Ff,"core::UiInput":Lf,"core::UiInputResult":Wf,"core::UiText":Vf,"core::UiTransform":Hf,"core::VideoEvent":Oa,"core::VideoPlayer":Ba,"core::VisibilityComponent":Gf};function jf(e){let n=ka(e);function i(t,r){let o=n.getMutableOrNull(t);if(!o)return[null,null];let s=o.states.find(c=>c.name===r||c.clip===r);return s?[o,s]:[o,null]}return{...n,getClipOrNull(t,r){let[o,s]=i(t,r);return s},getClip(t,r){let[o,s]=i(t,r);if(!o)throw new Error(`There is no Animator found in the entity ${t}`);if(!s)throw new Error(`The Animator component of ${t} has no the state ${r}`);return s},playSingleAnimation(t,r,o=!0){let[s,c]=i(t,r);if(!s||!c)return!1;for(let a of s.states)a.playing=!1,a.shouldReset=!0;return c.playing=!0,c.shouldReset=o,!0},stopAllAnimations(t,r=!0){let o=n.getMutableOrNull(t);if(!o)return!1;for(let s of o.states)s.playing=!1,s.shouldReset=r;return!0}}}function $f(e){let n=Aa(e);function i(t){if(Array.isArray(t))return t.map(r=>r).reduce((r,o)=>r|o,0);if(t)return t}return{...n,setBox(t,r){n.createOrReplace(t,{mesh:{$case:"box",box:{}},collisionMask:i(r)})},setPlane(t,r){n.createOrReplace(t,{mesh:{$case:"plane",plane:{}},collisionMask:i(r)})},setCylinder(t,r,o,s){n.createOrReplace(t,{mesh:{$case:"cylinder",cylinder:{radiusBottom:r,radiusTop:o}},collisionMask:i(s)})},setSphere(t,r){n.createOrReplace(t,{mesh:{$case:"sphere",sphere:{}},collisionMask:i(r)})}}}var _i=e=>({serialize(n,i){i.writeUint32(n.length);for(let t of n)e.serialize(t,i)},deserialize(n){let i=[],t=n.readUint32();for(let r=0;r<t;r++)i.push(e.deserialize(n));return i},create(){return[]},jsonSchema:{type:"array",items:e.jsonSchema,serializationType:"array"}});var Jo={serialize(e,n){n.writeInt8(e?1:0)},deserialize(e){return e.readInt8()===1},create(){return!1},jsonSchema:{type:"boolean",serializationType:"boolean"}};var Zo={serialize(e,n){n.writeInt64(BigInt(e))},deserialize(e){return Number(e.readInt64())},create(){return 0},jsonSchema:{type:"integer",serializationType:"int64"}},nn={serialize(e,n){n.writeInt32(e)},deserialize(e){return e.readInt32()},create(){return 0},jsonSchema:{type:"integer",serializationType:"int32"}},qo={serialize(e,n){n.writeInt16(e)},deserialize(e){return e.readInt16()},create(){return 0},jsonSchema:{type:"integer",serializationType:"int16"}},Xo={serialize(e,n){n.writeInt8(e)},deserialize(e){return e.readInt8()},create(){return 0},jsonSchema:{type:"integer",serializationType:"int8"}};var ki={serialize(e,n){n.writeUtf8String(e)},deserialize(e){return e.readUtf8String()},create(){return""},jsonSchema:{type:"string",serializationType:"utf8-string"}},Ko=ki;function Wl(e){let t=0,r=0;for(let o in e){if(typeof e[o]=="number"){if(e[o]>2147483647||e[o]<-2147483648)throw new Error("Enum member values must be numbers within the range of -2147483648 to 2147483647.");t++}r++}if(r!==t*2)throw new Error("All enum member values must be of numeric type.")}function Vl(e){for(let n in e)if(typeof e[n]!="string")throw new Error("All enum member values must be of string type.")}var Hl="enum-int",Ri=(e,n)=>(Wl(e),{serialize(i,t){nn.serialize(i,t)},deserialize(i){return nn.deserialize(i)},create(){return n},jsonSchema:{type:"integer",enum:Object.values(e).filter(i=>Number.isInteger(i)),default:n,serializationType:Hl,enumObject:e}}),Gl="enum-string",Si=(e,n)=>(Vl(e),{serialize(i,t){ki.serialize(i,t)},deserialize(i){return ki.deserialize(i)},create(){return n},jsonSchema:{type:"string",enum:Object.values(e),default:n,serializationType:Gl,enumObject:e}});var Ao={serialize(e,n){n.writeFloat32(e)},deserialize(e){return e.readFloat32()},create(){return 0},jsonSchema:{type:"number",serializationType:"float32"}},Qo={serialize(e,n){n.writeFloat64(e)},deserialize(e){return e.readFloat64()},create(){return 0},jsonSchema:{type:"number",serializationType:"float64"}};var er={serialize(e,n){n.writeFloat32(e.r),n.writeFloat32(e.g),n.writeFloat32(e.b)},deserialize(e){return{r:e.readFloat32(),g:e.readFloat32(),b:e.readFloat32()}},create(){return{r:0,g:0,b:0}},jsonSchema:{type:"object",properties:{r:{type:"number"},g:{type:"number"},b:{type:"number"}},serializationType:"color3"}};var tr={serialize(e,n){n.writeFloat32(e.r),n.writeFloat32(e.g),n.writeFloat32(e.b),n.writeFloat32(e.a)},deserialize(e){return{r:e.readFloat32(),g:e.readFloat32(),b:e.readFloat32(),a:e.readFloat32()}},create(){return{r:0,g:0,b:0,a:0}},jsonSchema:{type:"object",properties:{r:{type:"number"},g:{type:"number"},b:{type:"number"},a:{type:"number"}},serializationType:"color4"}};var nr={serialize(e,n){n.writeInt32(e)},deserialize(e){return e.readInt32()},create(){return 0},jsonSchema:{type:"integer",serializationType:"entity"}};var or={serialize(e,n){n.writeFloat32(e.x),n.writeFloat32(e.y),n.writeFloat32(e.z),n.writeFloat32(e.w)},deserialize(e){return{x:e.readFloat32(),y:e.readFloat32(),z:e.readFloat32(),w:e.readFloat32()}},create(){return{x:0,y:0,z:0,w:0}},jsonSchema:{type:"object",properties:{x:{type:"number"},y:{type:"number"},z:{type:"number"},w:{type:"number"}},serializationType:"quaternion"}};var rr={serialize(e,n){n.writeFloat32(e.x),n.writeFloat32(e.y),n.writeFloat32(e.z)},deserialize(e){return{x:e.readFloat32(),y:e.readFloat32(),z:e.readFloat32()}},create(){return{x:0,y:0,z:0}},jsonSchema:{type:"object",properties:{x:{type:"number"},y:{type:"number"},z:{type:"number"},w:{type:"number"}},serializationType:"vector3"}};var wi=(e,n)=>{let i=Object.keys(e).reduce((t,r)=>(t[r]=e[r].jsonSchema,t),{});return{serialize(t,r){for(let o in e)e[o].serialize(t[o],r)},deserialize(t){let r={};for(let o in e)r[o]=e[o].deserialize(t);return r},create(){let t={};for(let r in e)t[r]=e[r].create();return{...t,...n}},extend:t=>{let r={};for(let o in e)r[o]=e[o].create();return{...r,...n,...t}},jsonSchema:{type:"object",properties:i,serializationType:"map"}}};var Ai=e=>({serialize(n,i){n?(i.writeInt8(1),e.serialize(n,i)):i.writeInt8(0)},deserialize(n){if(n.readInt8())return e.deserialize(n)},create(){},jsonSchema:{type:e.jsonSchema.type,serializationType:"optional",optionalJsonSchema:e.jsonSchema}});var Ii=e=>{let n=Object.keys(e),i=n.reduce((r,o,s)=>(r[o]=s,r),{}),t=n.reduce((r,o)=>(r[o]=e[o].jsonSchema,r),{});return{serialize({$case:r,value:o},s){let c=i[r.toString()]+1;s.writeUint8(c),e[r].serialize(o,s)},deserialize(r){let o=n[r.readInt8()-1],s=e[o].deserialize(r);return{$case:o,value:s}},create(){return{}},jsonSchema:{type:"object",properties:t,serializationType:"one-of"}}};var Yf=(e,n)=>n.includes(e.serializationType),jl=e=>Yf(e,["one-of"]),$l=()=>({type:{type:"object",serializationType:"unknown"},value:void 0}),Ni=e=>Yf(e,["array","map"]),Pa=(e,n,i)=>{let t=e[i],r=n[i];if(jl(t)){let o=r;if(!o.$case)return $l();let s=t.properties[o.$case];return Ni(s)&&(n[i]={[o.$case]:o.value}),{type:s,value:o.value}}return{type:t,value:r}};var Jf={[Jo.jsonSchema.serializationType]:Jo,[Ko.jsonSchema.serializationType]:Ko,[Ao.jsonSchema.serializationType]:Ao,[Qo.jsonSchema.serializationType]:Qo,[Xo.jsonSchema.serializationType]:Xo,[qo.jsonSchema.serializationType]:qo,[nn.jsonSchema.serializationType]:nn,[Zo.jsonSchema.serializationType]:Zo,[rr.jsonSchema.serializationType]:rr,[or.jsonSchema.serializationType]:or,[er.jsonSchema.serializationType]:er,[tr.jsonSchema.serializationType]:tr,[nr.jsonSchema.serializationType]:nr};function Io(e){if(Jf[e.serializationType])return Jf[e.serializationType];if(e.serializationType==="map"){let n=e,i={};for(let t in n.properties)i[t]=Io(n.properties[t]);return wi(i)}if(e.serializationType==="optional")return Ai(Io(e.optionalJsonSchema));if(e.serializationType==="array")return _i(Io(e.items));if(e.serializationType==="enum-int"){let n=e;return Ri(n.enumObject,n.default)}if(e.serializationType==="enum-string"){let n=e;return Si(n.enumObject,n.default)}if(e.serializationType==="one-of"){let n=e,i={};for(let t in n.properties)i[t]=Io(n.properties[t]);return Ii(i)}throw new Error(`${e.serializationType} is not supported as reverse schema generation.`)}function Oi(e,n,i){if(e.serializationType==="map"){let{properties:t}=e,r=n;for(let o in t){let{type:s,value:c}=Pa(t,r,o);if(s.serializationType!=="unknown")if(Ni(s))Oi(s,c,i);else{let a=i(c,s);a.changed&&(r[o]=a.value)}}}else if(e.serializationType==="array"){let{items:t}=e,r=n;for(let o=0,s=r.length;o<s;o++){let{type:c,value:a}=Pa({items:t},{items:r[o]},"items");if(Ni(c))Oi(c,a,i);else{let u=i(a,c);u.changed&&(r[o]=u.value)}}}}var be;(function(e){e.Boolean=Jo,e.String=Ko,e.Float=Ao,e.Double=Qo,e.Byte=Xo,e.Short=qo,e.Int=nn,e.Int64=Zo,e.Number=Ao,e.Vector3=rr,e.Quaternion=or,e.Color3=er,e.Color4=tr,e.Entity=nr,e.EnumNumber=Ri,e.EnumString=Si,e.Array=_i,e.Map=wi,e.Optional=Ai,e.OneOf=Ii,e.fromJson=Io,e.mutateNestedValues=Oi})(be||(be={}));function Yl(e){return e.defineComponent("core-schema::Name",{value:be.String})}var Zf=Yl;function Jl(e){return e.defineComponent("core-schema::Sync",{componentIds:be.Array(be.Number)})}var qf=Jl;var za={serialize(e,n){let i=n.incrementWriteOffset(44);n.setFloat32(i,e.position.x),n.setFloat32(i+4,e.position.y),n.setFloat32(i+8,e.position.z),n.setFloat32(i+12,e.rotation.x),n.setFloat32(i+16,e.rotation.y),n.setFloat32(i+20,e.rotation.z),n.setFloat32(i+24,e.rotation.w),n.setFloat32(i+28,e.scale.x),n.setFloat32(i+32,e.scale.y),n.setFloat32(i+36,e.scale.z),n.setUint32(i+40,e.parent||0)},deserialize(e){let n=e.incrementReadOffset(44);return{position:{x:e.getFloat32(n),y:e.getFloat32(n+4),z:e.getFloat32(n+8)},rotation:{x:e.getFloat32(n+12),y:e.getFloat32(n+16),z:e.getFloat32(n+20),w:e.getFloat32(n+24)},scale:{x:e.getFloat32(n+28),y:e.getFloat32(n+32),z:e.getFloat32(n+36)},parent:e.getUint32(n+40)}},create(){return{position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0,w:1},parent:0}},extend(e){return{position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0,w:1},parent:0,...e}},jsonSchema:{type:"object",properties:{position:{type:"object",properties:{x:{type:"number"},y:{type:"number"},z:{type:"number"}}},scale:{type:"object",properties:{x:{type:"number"},y:{type:"number"},z:{type:"number"}}},rotation:{type:"object",properties:{x:{type:"number"},y:{type:"number"},z:{type:"number"},w:{type:"number"}}},parent:{type:"integer"}},serializationType:"transform"}};function Xf(e){let n=e.defineComponentFromSchema("core::Transform",za);return{...n,create(i,t){return n.create(i,za.extend(t))},createOrReplace(i,t){return n.createOrReplace(i,za.extend(t))}}}var Bn=e=>Xf(e);var Kf=e=>jf(e);var Qf=e=>$f(e),Bi=e=>Zf(e),eu=e=>qf(e);var Ma={"core::Transform":1,"core::Animator":1042,"core::AudioSource":1020,"core::AudioStream":1021,"core::AvatarAttach":1073,"core::AvatarBase":1087,"core::AvatarEmoteCommand":1088,"core::AvatarEquippedData":1091,"core::AvatarModifierArea":1070,"core::AvatarShape":1080,"core::Billboard":1090,"core::CameraMode":1072,"core::CameraModeArea":1071,"core::EngineInfo":1048,"core::GltfContainer":1041,"core::GltfContainerLoadingState":1049,"core::Material":1017,"core::MeshCollider":1019,"core::MeshRenderer":1018,"core::NftShape":1040,"core::PlayerIdentityData":1089,"core::PointerEvents":1062,"core::PointerEventsResult":1063,"core::PointerLock":1074,"core::Raycast":1067,"core::RaycastResult":1068,"core::TextShape":1030,"core::UiBackground":1053,"core::UiCanvasInformation":1054,"core::UiDropdown":1094,"core::UiDropdownResult":1096,"core::UiInput":1093,"core::UiInputResult":1095,"core::UiText":1052,"core::UiTransform":1050,"core::VideoEvent":1044,"core::VideoPlayer":1043,"core::VisibilityComponent":1081};var nu=ce(gr());var Zl=new Int32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function ql(e,n){let i=~~n^-1;for(let t=0;t<e.length;t++)i=Zl[(i^e[t])&255]^i>>>8;return i^-1}function tu(e,n=0){return ql(e,n)>>>0}var va=2048;function Dt(e){if(Ma[e])return Ma[e];let n=new Uint8Array(128);return nu.write(e,n,0),(tu(n)+va&4294967295)>>>0}var Ua=typeof process=="object"&&!1||!1;function Da(e,n){if(Ua&&e&&typeof e=="object"&&typeof e.then=="function")throw new Error(n);return e}function ou(){let e=new Map;return{addTo(n,i){if(i<0)return!1;let t=e.get(n);return t!==void 0&&t>=i||e.set(n,i),!0},has(n,i){let t=e.get(n);return t!==void 0&&t>=i},getMap(){return e}}}var Pn=65535,Xl=4294901760,B1=Pn+1,Fa=Pn,Jt=512,Cn=Fa,gt;(function(e){function n(t){return[(t&Pn)>>>0,((t&Xl)>>16&Pn)>>>0]}e.fromEntityId=n;function i(t,r){return(t&Pn|(r&Pn)<<16)>>>0}e.toEntityId=i})(gt||(gt={}));var _t;(function(e){e[e.Unknown=0]="Unknown",e[e.UsedEntity=1]="UsedEntity",e[e.Removed=2]="Removed",e[e.Reserved=3]="Reserved"})(_t||(_t={}));function ru(){let e=Jt,n,i,t=new Set,r=[],o=ou();function s(B,b){Cn=B,i=b,n=b[0]}function c(B){if(e>Fa-1)throw new Error(`It fails trying to generate an entity out of range ${Fa}.`);if(B&&n>=i[1])throw new Error("Max amount of network entities reached");if(!B&&i&&e>=Cn)throw new Error(`Max amount of local entities reached ${Cn} - ${e}`);let b=B?n++:e++,I=o.getMap().has(b)?o.getMap().get(b)+1:0,R=gt.toEntityId(b,I);return t.has(R)?c():(t.add(R),R)}function a(B){if(B&&!i)throw new Error("Network entities ranged not initialized. Connect to a CRDT Server");if(!B&&t.size+Jt>=e)return c(B);for(let[b,I]of o.getMap())if(I<Pn){if(B&&(b<=i[0]||b>=i[1])||!B&&b>=Cn)continue;let R=gt.toEntityId(b,I+1);if(!t.has(R)&&!r.includes(R))return t.add(R),R}return c(B)}function u(B){return B<Jt?!1:(t.has(B)?(t.delete(B),r.push(B)):N(B),!0)}function E(){let B=r;if(B.length){r=[];for(let b of B){let[I,R]=gt.fromEntityId(b);o.addTo(I,R)}}return B}function N(B){let[b,I]=gt.fromEntityId(B);o.addTo(b,I);for(let R=0;R<=I;R++)t.delete(gt.toEntityId(b,R));return!0}function A(B){let[b,I]=gt.fromEntityId(B);if(o.has(b,I))return!1;if(I>0){for(let R=0;R<=I-1;R++)t.delete(gt.toEntityId(b,R));o.addTo(b,I-1)}return t.add(B),!0}function $(B){let[b,I]=gt.fromEntityId(B);if(b<Jt)return _t.Reserved;if(t.has(B))return _t.UsedEntity;let R=o.getMap().get(b);return R!==void 0&&R>=I?_t.Removed:_t.Unknown}return{setNetworkEntitiesRange:s,generateEntity:a,removeEntity:u,getExistingEntities(){return new Set(t)},getEntityState:$,releaseRemovedEntities:E,updateRemovedEntity:N,updateUsedEntity:A,getConfig:()=>({reservedLocalEntities:Cn,reservedStaticEntities:Jt})}}var No=ce(gr()),ke=function(e,n,i,t){if(i==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!t:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?t:i==="a"?t.call(e):t?t.value:n.get(e)},Ee,rt,$e;function Kl(e,n){let i=Math.max(e,n)+1024;return Math.ceil(i/1024)*1024}var Ql=10240,Oe=class{constructor(n,i,t){Ee.add(this),this._buffer=n||new Uint8Array(Ql),this.view=new DataView(this._buffer.buffer,this._buffer.byteOffset),this.woffset=t??(n?this._buffer.length:null)??0,this.roffset=i??0}buffer(){return this._buffer}bufferLength(){return this._buffer.length}resetBuffer(){this.roffset=0,this.woffset=0}currentReadOffset(){return this.roffset}currentWriteOffset(){return this.woffset}incrementReadOffset(n){return ke(this,Ee,"m",$e).call(this,n)}remainingBytes(){return this.woffset-this.roffset}readFloat32(){return this.view.getFloat32(ke(this,Ee,"m",$e).call(this,4),!0)}readFloat64(){return this.view.getFloat64(ke(this,Ee,"m",$e).call(this,8),!0)}readInt8(){return this.view.getInt8(ke(this,Ee,"m",$e).call(this,1))}readInt16(){return this.view.getInt16(ke(this,Ee,"m",$e).call(this,2),!0)}readInt32(){return this.view.getInt32(ke(this,Ee,"m",$e).call(this,4),!0)}readInt64(){return this.view.getBigInt64(ke(this,Ee,"m",$e).call(this,8),!0)}readUint8(){return this.view.getUint8(ke(this,Ee,"m",$e).call(this,1))}readUint16(){return this.view.getUint16(ke(this,Ee,"m",$e).call(this,2),!0)}readUint32(){return this.view.getUint32(ke(this,Ee,"m",$e).call(this,4),!0)}readUint64(){return this.view.getBigUint64(ke(this,Ee,"m",$e).call(this,8),!0)}readBuffer(){let n=this.view.getUint32(ke(this,Ee,"m",$e).call(this,4),!0);return this._buffer.subarray(ke(this,Ee,"m",$e).call(this,n),ke(this,Ee,"m",$e).call(this,0))}readUtf8String(){let n=this.view.getUint32(ke(this,Ee,"m",$e).call(this,4),!0);return No.read(this._buffer,ke(this,Ee,"m",$e).call(this,n),ke(this,Ee,"m",$e).call(this,0))}incrementWriteOffset(n){return ke(this,Ee,"m",rt).call(this,n)}toBinary(){return this._buffer.subarray(0,this.woffset)}toCopiedBinary(){return new Uint8Array(this.toBinary())}writeBuffer(n,i=!0){i&&this.writeUint32(n.byteLength);let t=ke(this,Ee,"m",rt).call(this,n.byteLength);this._buffer.set(n,t)}writeUtf8String(n,i=!0){let t=No.length(n);i&&this.writeUint32(t);let r=ke(this,Ee,"m",rt).call(this,t);No.write(n,this._buffer,r)}writeFloat32(n){let i=ke(this,Ee,"m",rt).call(this,4);this.view.setFloat32(i,n,!0)}writeFloat64(n){let i=ke(this,Ee,"m",rt).call(this,8);this.view.setFloat64(i,n,!0)}writeInt8(n){let i=ke(this,Ee,"m",rt).call(this,1);this.view.setInt8(i,n)}writeInt16(n){let i=ke(this,Ee,"m",rt).call(this,2);this.view.setInt16(i,n,!0)}writeInt32(n){let i=ke(this,Ee,"m",rt).call(this,4);this.view.setInt32(i,n,!0)}writeInt64(n){let i=ke(this,Ee,"m",rt).call(this,8);this.view.setBigInt64(i,n,!0)}writeUint8(n){let i=ke(this,Ee,"m",rt).call(this,1);this.view.setUint8(i,n)}writeUint16(n){let i=ke(this,Ee,"m",rt).call(this,2);this.view.setUint16(i,n,!0)}writeUint32(n){let i=ke(this,Ee,"m",rt).call(this,4);this.view.setUint32(i,n,!0)}writeUint64(n){let i=ke(this,Ee,"m",rt).call(this,8);this.view.setBigUint64(i,n,!0)}getFloat32(n){return this.view.getFloat32(n,!0)}getFloat64(n){return this.view.getFloat64(n,!0)}getInt8(n){return this.view.getInt8(n)}getInt16(n){return this.view.getInt16(n,!0)}getInt32(n){return this.view.getInt32(n,!0)}getInt64(n){return this.view.getBigInt64(n,!0)}getUint8(n){return this.view.getUint8(n)}getUint16(n){return this.view.getUint16(n,!0)}getUint32(n){return this.view.getUint32(n,!0)}getUint64(n){return this.view.getBigUint64(n,!0)}setFloat32(n,i){this.view.setFloat32(n,i,!0)}setFloat64(n,i){this.view.setFloat64(n,i,!0)}setInt8(n,i){this.view.setInt8(n,i)}setInt16(n,i){this.view.setInt16(n,i,!0)}setInt32(n,i){this.view.setInt32(n,i,!0)}setInt64(n,i){this.view.setBigInt64(n,i,!0)}setUint8(n,i){this.view.setUint8(n,i)}setUint16(n,i){this.view.setUint16(n,i,!0)}setUint32(n,i){this.view.setUint32(n,i,!0)}setUint64(n,i){this.view.setBigUint64(n,i,!0)}};Ee=new WeakSet,rt=function(n){if(this.woffset+n>this._buffer.byteLength){let i=Kl(this._buffer.byteLength,this.woffset+n),t=new Uint8Array(i);t.set(this._buffer);let r=this._buffer.byteOffset;this._buffer=t,this.view=new DataView(this._buffer.buffer,r)}return this.woffset+=n,this.woffset-n},$e=function(n){if(this.roffset+n>this.woffset)throw new Error("Outside of the bounds of writen data.");return this.roffset+=n,this.roffset-n};var ee;(function(e){e[e.RESERVED=0]="RESERVED",e[e.PUT_COMPONENT=1]="PUT_COMPONENT",e[e.DELETE_COMPONENT=2]="DELETE_COMPONENT",e[e.DELETE_ENTITY=3]="DELETE_ENTITY",e[e.APPEND_VALUE=4]="APPEND_VALUE",e[e.MAX_MESSAGE_TYPE=5]="MAX_MESSAGE_TYPE"})(ee||(ee={}));var kt=8,ut;(function(e){e[e.StateUpdatedTimestamp=1]="StateUpdatedTimestamp",e[e.StateOutdatedTimestamp=2]="StateOutdatedTimestamp",e[e.NoChanges=3]="NoChanges",e[e.StateOutdatedData=4]="StateOutdatedData",e[e.StateUpdatedData=5]="StateUpdatedData",e[e.EntityWasDeleted=6]="EntityWasDeleted",e[e.EntityDeleted=7]="EntityDeleted"})(ut||(ut={}));var it;(function(e){function n(o){let s=o.remainingBytes();if(s<kt)return!1;let c=o.getUint32(o.currentReadOffset());return!(s<c)}e.validate=n;function i(o){return n(o)?{length:o.readUint32(),type:o.readUint32()}:null}e.readHeader=i;function t(o){if(!n(o))return null;let s=o.currentReadOffset();return{length:o.getUint32(s),type:o.getUint32(s+4)}}e.getHeader=t;function r(o){let s=t(o);return s?(o.incrementReadOffset(s.length),!0):!1}e.consumeMessage=r})(it||(it={}));var Ft;(function(e){e.MESSAGE_HEADER_LENGTH=12;function n(t,r,o,s){let c=kt+e.MESSAGE_HEADER_LENGTH,a=s.incrementWriteOffset(c);s.setUint32(a,c),s.setUint32(a+4,ee.DELETE_COMPONENT),s.setUint32(a+8,t),s.setUint32(a+12,r),s.setUint32(a+16,o)}e.write=n;function i(t){let r=it.readHeader(t);if(!r)return null;if(r.type!==ee.DELETE_COMPONENT)throw new Error("DeleteComponentOperation tried to read another message type.");return{...r,entityId:t.readUint32(),componentId:t.readUint32(),timestamp:t.readUint32()}}e.read=i})(Ft||(Ft={}));var Zt;(function(e){e.MESSAGE_HEADER_LENGTH=16;function n(t,r,o,s,c){let a=c.incrementWriteOffset(kt+e.MESSAGE_HEADER_LENGTH);c.writeBuffer(s,!1);let u=c.currentWriteOffset()-a;c.setUint32(a,u),c.setUint32(a+4,ee.APPEND_VALUE),c.setUint32(a+8,t),c.setUint32(a+12,o),c.setUint32(a+16,r);let E=u-e.MESSAGE_HEADER_LENGTH-kt;c.setUint32(a+20,E)}e.write=n;function i(t){let r=it.readHeader(t);if(!r)return null;if(r.type!==ee.APPEND_VALUE)throw new Error("AppendValueOperation tried to read another message type.");return{...r,entityId:t.readUint32(),componentId:t.readUint32(),timestamp:t.readUint32(),data:t.readBuffer()}}e.read=i})(Zt||(Zt={}));var zn;(function(e){e.MESSAGE_HEADER_LENGTH=4;function n(t,r){r.writeUint32(kt+4),r.writeUint32(ee.DELETE_ENTITY),r.writeUint32(t)}e.write=n;function i(t){let r=it.readHeader(t);if(!r)return null;if(r.type!==ee.DELETE_ENTITY)throw new Error("DeleteEntity tried to read another message type.");return{...r,entityId:t.readUint32()}}e.read=i})(zn||(zn={}));var Lt;(function(e){e.MESSAGE_HEADER_LENGTH=16;function n(t,r,o,s,c){let a=c.incrementWriteOffset(kt+e.MESSAGE_HEADER_LENGTH);c.writeBuffer(s,!1);let u=c.currentWriteOffset()-a;c.setUint32(a,u),c.setUint32(a+4,ee.PUT_COMPONENT),c.setUint32(a+8,t),c.setUint32(a+12,o),c.setUint32(a+16,r);let E=u-e.MESSAGE_HEADER_LENGTH-kt;c.setUint32(a+20,E)}e.write=n;function i(t){let r=it.readHeader(t);if(!r)return null;if(r.type!==ee.PUT_COMPONENT)throw new Error("PutComponentOperation tried to read another message type.");return{...r,entityId:t.readUint32(),componentId:t.readUint32(),timestamp:t.readUint32(),data:t.readBuffer()}}e.read=i})(Lt||(Lt={}));function iu(e,n){let i=[],t=[],r=[],o=[];function s(N){return function($){let B=new Oe($),b;for(;b=it.getHeader(B);){let I=B.currentReadOffset();if(b.type===ee.DELETE_COMPONENT){let R=Ft.read(B);t.push({...R,transportId:N,messageBuffer:B.buffer().subarray(I,B.currentReadOffset())})}else if(b.type===ee.PUT_COMPONENT){let R=Lt.read(B);t.push({...R,transportId:N,messageBuffer:B.buffer().subarray(I,B.currentReadOffset())})}else if(b.type===ee.DELETE_ENTITY){let R=zn.read(B);t.push({...R,transportId:N,messageBuffer:B.buffer().subarray(I,B.currentReadOffset())})}else if(b.type===ee.APPEND_VALUE){let R=Zt.read(B);t.push({...R,transportId:N,messageBuffer:B.buffer().subarray(I,B.currentReadOffset())})}else B.incrementReadOffset(b.length)}}}function c(N){return N.splice(0,N.length)}async function a(){let N=c(t),A=new Oe,$=[];for(let B of N)if(B.type===ee.DELETE_ENTITY)$.push(B.entityId),r.push(B);else{let b=e.entityContainer.getEntityState(B.entityId);if(b===_t.Removed)continue;b===_t.Unknown&&e.entityContainer.updateUsedEntity(B.entityId);let I=e.getComponentOrNull(B.componentId);if(I){let[R,z]=I.updateFromCrdt(B);if(R){let X=A.currentWriteOffset();R.type===ee.PUT_COMPONENT?Lt.write(B.entityId,R.timestamp,R.componentId,R.data,A):R.type===ee.DELETE_COMPONENT&&Ft.write(B.entityId,I.componentId,R.timestamp,A),o.push({...B,messageBuffer:A.buffer().subarray(X,A.currentWriteOffset())})}else r.push(B),n&&n(B.entityId,B.type,I,z)}else r.push(B)}for(let B of $){for(let b=o.length-1;b>=0;b--)o[b].entityId===B&&o[b].type!==ee.DELETE_ENTITY&&o.splice(b,1);for(let b of e.componentsIter())b.entityDeleted(B,!0);e.entityContainer.updateRemovedEntity(B),n&&n(B,ee.DELETE_ENTITY)}}async function u(N){let A=c(r),$=c(o),B=new Oe;for(let I of e.componentsIter())for(let R of I.getCrdtUpdates()){let z=B.currentWriteOffset();if(i.some(X=>X.filter(R))&&(R.type===ee.PUT_COMPONENT?Lt.write(R.entityId,R.timestamp,R.componentId,R.data,B):R.type===ee.DELETE_COMPONENT?Ft.write(R.entityId,I.componentId,R.timestamp,B):R.type===ee.APPEND_VALUE&&Zt.write(R.entityId,R.timestamp,R.componentId,R.data,B),A.push({...R,messageBuffer:B.buffer().subarray(z,B.currentWriteOffset())}),n)){let X=R.type===ee.PUT_COMPONENT||R.type===ee.APPEND_VALUE?I.get(R.entityId):void 0;n(R.entityId,R.type,I,X)}}for(let I of N){let R=B.currentWriteOffset();zn.write(I,B),A.push({type:ee.DELETE_ENTITY,entityId:I,messageBuffer:B.buffer().subarray(R,B.currentWriteOffset())}),n&&n(I,ee.DELETE_ENTITY)}let b=new Oe;for(let I in i){let R=Number(I),z=i[R];b.resetBuffer();for(let ie of $)ie.transportId===R&&!A.find(_e=>_e.entityId===ie.entityId&&_e.componentId&&_e.componentId===ie.componentId)&&b.writeBuffer(ie.messageBuffer,!1);for(let ie of A)ie.transportId!==R&&z.filter(ie)&&b.writeBuffer(ie.messageBuffer,!1);let X=b.currentWriteOffset()?b.toBinary():new Uint8Array([]);await z.send(X)}}function E(N){let A=i.push(N)-1;N.onmessage=s(A)}return{sendMessages:u,receiveMessages:a,addTransport:E}}var au;(function(e){let n;(function(i){i[i.NETWORKED=0]="NETWORKED",i[i.RENDERER=1]="RENDERER"})(n=e.SynchronizedEntityType||(e.SynchronizedEntityType={}))})(au||(au={}));function La(e,n){if(e===n)return 0;if(e===null&&n!==null)return-1;if(e!==null&&n===null)return 1;if(e instanceof Uint8Array&&n instanceof Uint8Array){let i=e.byteLength-n.byteLength;if(i!==0)return i>0?1:-1;let t;for(let r=0,o=e.byteLength;r<o;r++)if(t=e[r]-n[r],t!==0)return t>0?1:-1;return 0}if(typeof e=="string"){let i=e.length-n.length;return i!==0?i>0?1:-1:e.localeCompare(n)}return e>n?1:-1}function Wa(e){return Object.freeze({...e})}function ep(e,n){let i=(n.get(e)||0)+1;return n.set(e,i),i}function tp(e,n,i,t){return function(o,s){for(let[c,a]of n)if(!(s&&!s(c)))if(t.has(c)){let u=t.get(c),E=new Oe;i.serialize(u,E),Lt.write(c,a,e,E.toBinary(),o)}else Ft.write(c,e,a,o)}}function np(e,n,i,t){function r(o){let{entityId:s,timestamp:c}=o,a=n.get(s);if(a===void 0||a<c)return ut.StateUpdatedTimestamp;if(a>c)return ut.StateOutdatedTimestamp;if(o.type===ee.DELETE_COMPONENT&&!t.has(s))return ut.NoChanges;let u=0;if(t.has(s)){let E=new Oe;i.serialize(t.get(s),E),u=La(E.toBinary(),o.data||null)}else u=La(null,o.data);return u===0?ut.NoChanges:u>0?ut.StateOutdatedData:ut.StateUpdatedData}return o=>{if(o.type!==ee.PUT_COMPONENT&&o.type!==ee.DELETE_COMPONENT)return[null,t.get(o.entityId)];let s=r(o),c=o.entityId;switch(s){case ut.StateUpdatedData:case ut.StateUpdatedTimestamp:{if(n.set(c,o.timestamp),o.type===ee.PUT_COMPONENT){let a=new Oe(o.data);t.set(c,i.deserialize(a))}else t.delete(c);return[null,t.get(c)]}case ut.StateOutdatedTimestamp:case ut.StateOutdatedData:if(t.has(c)){let a=new Oe;return i.serialize(t.get(c),a),[{type:ee.PUT_COMPONENT,componentId:e,data:a.toBinary(),entityId:c,timestamp:n.get(c)},t.get(c)]}else return[{type:ee.DELETE_COMPONENT,componentId:e,entityId:c,timestamp:n.get(c)},void 0]}return[null,t.get(c)]}}function op(e,n,i,t,r){return function*(){for(let o of i){let s=ep(o,n);if(r.has(o)){let c=new Oe;t.serialize(r.get(o),c),yield{type:ee.PUT_COMPONENT,componentId:e,entityId:o,data:c.toBinary(),timestamp:s}}else yield{type:ee.DELETE_COMPONENT,componentId:e,entityId:o,timestamp:s}}i.clear()}}function Va(e,n,i){let t=new Map,r=new Set,o=new Map;return{get componentId(){return n},get componentName(){return e},get componentType(){return 0},schema:i,has(s){return t.has(s)},deleteFrom(s,c=!0){let a=t.get(s);return t.delete(s)&&c&&r.add(s),a||null},entityDeleted(s,c){t.delete(s)&&c&&r.add(s)},getOrNull(s){let c=t.get(s);return c?Wa(c):null},get(s){let c=t.get(s);if(!c)throw new Error(`[getFrom] Component ${e} for entity #${s} not found`);return Wa(c)},create(s,c){if(t.get(s))throw new Error(`[create] Component ${e} for ${s} already exists`);let u=c===void 0?i.create():i.extend?i.extend(c):c;return t.set(s,u),r.add(s),u},createOrReplace(s,c){let a=c===void 0?i.create():i.extend?i.extend(c):c;return t.set(s,a),r.add(s),a},getMutableOrNull(s){let c=t.get(s);return c?(r.add(s),c):null},getOrCreateMutable(s,c){let a=t.get(s);return a?(r.add(s),a):this.create(s,c)},getMutable(s){let c=this.getMutableOrNull(s);if(c===null)throw new Error(`[mutable] Component ${e} for ${s} not found`);return c},*iterator(){for(let[s,c]of t)yield[s,c]},*dirtyIterator(){for(let s of r)yield s},getCrdtUpdates:op(n,o,r,i,t),updateFromCrdt:np(n,o,i,t),dumpCrdtStateToBuffer:tp(n,o,i,t)}}function cu(){let e=[];function n(){e.sort((r,o)=>o.priority-r.priority)}function i(r,o,s){let c=s??r.name;if(e.find(a=>a.fn===r))throw new Error(`System ${JSON.stringify(c)} already added to the engine`);e.push({fn:r,priority:o,name:c}),n()}function t(r){let o=-1;return typeof r=="string"?o=e.findIndex(s=>s.name===r):o=e.findIndex(s=>s.fn===r),o===-1?!1:(e.splice(o,1),n(),!0)}return{add:i,remove:t,getSystems(){return e}}}var Ha=fu(new Set);function su(){throw new Error("The set is frozen")}function fu(e){return e.add=su,e.clear=su,e}function rp(e,n){return e.timestamp>n.timestamp?1:-1}function uu(e,n,i,t){let r=new Map,o=new Set,s=[];function c(N){let A=N.raw.length;return A>1&&N.raw[A-1].timestamp<=N.raw[A-2].timestamp}function a(N){let A=r.get(N);if(A){for(c(A)&&A.raw.sort(rp);A.raw.length>t.maxElements;)A.raw.shift();let $=fu(new Set(A?.raw.map(B=>B.value)));return A.frozenSet=$,$}else return Ha}function u(N,A){let $=r.get(N);$||($={raw:[],frozenSet:Ha},r.set(N,$));let B=i.extend?i.extend(A):A,b=t.timestampFunction(B);return Ua&&Object.freeze(B),$.raw.push({value:B,timestamp:b}),{set:a(N),value:B}}return{get componentId(){return n},get componentName(){return e},get componentType(){return 1},schema:i,has(N){return r.has(N)},entityDeleted(N){r.delete(N)},get(N){let A=r.get(N);return A?A.frozenSet:Ha},addValue(N,A){let{set:$,value:B}=u(N,A);o.add(N);let b=new Oe;return i.serialize(B,b),s.push({componentId:n,data:b.toBinary(),entityId:N,timestamp:0,type:ee.APPEND_VALUE}),$},*iterator(){for(let[N,A]of r)yield[N,A.frozenSet]},*dirtyIterator(){for(let N of o)yield N},getCrdtUpdates(){return o.clear(),s.splice(0,s.length)},updateFromCrdt(N){if(N.type===ee.APPEND_VALUE){let A=new Oe(N.data);u(N.entityId,i.deserialize(A))}return[null,void 0]},dumpCrdtStateToBuffer:function(N,A){for(let[$,{raw:B}]of r)if(!(A&&!A($)))for(let b of B){let I=new Oe;i.serialize(b.value,I),Zt.write($,0,n,I.toBinary(),N)}}}}function*du(e,n){if(n.has(e)){n.delete(e);for(let[i,t]of n)t.parent===e&&(yield*du(i,n));yield e}}function ip(e,n,i){let t=new Map(e.getEntitiesWith(i));return du(n,t)}function lu(e,n){let i=Bn(e);for(let t of ip(e,n,i))e.removeEntity(t)}var pu=[0,1,2,4,5,6,7,8,9,10,11,12,13],ap=1<<20;function mu(e){let n=Yo(e),i={previousFrameMaxTimestamp:0,currentFrameMaxTimestamp:0,buttonState:new Map,thisFrameCommands:[]};function t(b,I,R){let z=n.get(R);for(let X of Array.from(z).reverse())if(X.button===I&&X.state===b)return X}function*r(b,I){let R=n.get(I);for(let z of Array.from(R).reverse())z.button===b&&(yield z)}function o(){let b=i.currentFrameMaxTimestamp;i.previousFrameMaxTimestamp=b,i.thisFrameCommands.length&&(i.thisFrameCommands=[]);for(let[,I]of e.getEntitiesWith(n)){let R=Array.from(I);for(let z=R.length-1;z>=0;z--){let X=R[z];if(X.timestamp>b&&(b=X.timestamp),X.timestamp>i.previousFrameMaxTimestamp&&i.thisFrameCommands.push(X),X.state===0||X.state===1){let ie=i.buttonState.get(X.button);if(!ie||X.timestamp>ie.timestamp)i.buttonState.set(X.button,X);else break}}}i.currentFrameMaxTimestamp=b}e.addSystem(o,ap,"@dcl/ecs#inputSystem");function s(b){return b>i.previousFrameMaxTimestamp&&b<=i.currentFrameMaxTimestamp}function c(b,I){if(b!==3)return a(b,I);for(let R of pu){let z=a(R,I);if(z)return z}return null}function a(b,I){let R=null,z=null;for(let X of r(b,I))if(z){if(!R&&X.state===1){R=X;break}}else if(X.state===0){z=X;continue}return!z||!R?null:R.timestamp<z.timestamp&&s(z.timestamp)?{up:z,down:R}:null}function u(b,I,R){if(b!==3)return N(b,I,R);for(let z of pu){let X=N(z,I,R);if(X)return X}return null}function E(b,I,R){if(R)return u(b,I,R);for(let z of i.thisFrameCommands)if((z.button===b||b===3)&&z.state===I)return z;return null}function N(b,I,R){let z=t(I,b,R);return z&&s(z.timestamp)?z:null}function A(b,I){return c(b,I)!==null}function $(b,I,R){if(R){let z=t(I,b,R);return z&&s(z.timestamp)||!1}else{for(let z of i.thisFrameCommands)if((z.button===b||b===3)&&z.state===I)return!0;return!1}}function B(b){return i.buttonState.get(b)?.state===1}return{isPressed:B,getClick:c,getInputCommand:E,isClicked:A,isTriggered:$}}var hu;(function(e){e[e.LastWriteWinElementSet=0]="LastWriteWinElementSet",e[e.GrowOnlyValueSet=1]="GrowOnlyValueSet"})(hu||(hu={}));function sp(){let e=ru(),n=new Map,i=cu(),t,r=!1;function o(U,Z=1e5,T){i.add(U,Z,T)}function s(U){return i.remove(U)}function c(){if(!t)throw new Error("Network manager not initialized. Start CRDT Server");return t}function a(U,Z){return e.setNetworkEntitiesRange(U,Z),t={addEntity:()=>e.generateEntity(!0),getConfig:()=>e.getConfig()},t}function u(){return e.generateEntity()}function E(U){for(let[,Z]of n)Z.entityDeleted(U,!0);return e.removeEntity(U)}function N(U){return lu({removeEntity:E,defineComponentFromSchema:$,getEntitiesWith:z},U)}function A(U,Z){if(r)throw new Error("Engine is already sealed. No components can be added at this stage");let T=Dt(U);if(n.get(T))throw new Error(`Component number ${T} was already registered.`);if(Z.componentName!==U)throw new Error(`Component name doesn't match componentDefinition.componentName ${U} != ${Z.componentName}`);if(Z.componentId!==T)throw new Error(`Component number doesn't match componentDefinition.componentId ${T} != ${Z.componentId}`);return n.set(T,Z),Z}function $(U,Z){let T=Dt(U),k=n.get(T);if(k)return k;if(r)throw new Error("Engine is already sealed. No components can be added at this stage");let M=Va(U,T,Z);return n.set(T,M),M}function B(U,Z,T){let k=Dt(U),M=n.get(k);if(M)return M;if(r)throw new Error("Engine is already sealed. No components can be added at this stage");let G=uu(U,k,Z,T);return n.set(k,G),G}function b(U,Z,T){let k=Dt(U),M=n.get(k);if(M)return M;if(r)throw new Error("Engine is already sealed. No components can be added at this stage");let G=be.Map(Z,T),K=Va(U,k,G),ue={...K,create(de,le){return K.create(de,le)},createOrReplace(de,le){return K.createOrReplace(de,le)}};return n.set(k,ue),ue}function I(U){let Z=typeof U=="number"?U:Dt(U),T=n.get(Z);if(!T)throw new Error(`Component ${Z} not found. You need to declare the components at the beginnig of the engine declaration`);return T}function R(U){let Z=typeof U=="number"?U:Dt(U);return n.get(Z)??null}function*z(...U){for(let[Z,...T]of ie(...U))yield[Z,...T.map(k=>k.get(Z))]}function X(U){let Z=Bi({defineComponent:b});for(let[T,k]of z(Z))if(k.value===U)return T;return null}function*ie(...U){let[Z,...T]=U;for(let[k]of Z.iterator()){let M=!0;for(let G of T)if(!G.has(k)){M=!1;break}M&&(yield[k,...U])}}function _e(){return i.getSystems()}function L(){return n.values()}function F(U){if(r)throw new Error("Engine is already sealed. No components can be removed at this stage");let Z=typeof U=="number"?U:Dt(U);n.delete(Z)}Bn({defineComponentFromSchema:$});function q(){r||(r=!0)}return{addEntity:u,removeEntity:E,removeEntityWithChildren:N,addSystem:o,getSystems:_e,removeSystem:s,defineComponent:b,defineComponentFromSchema:$,defineValueSetComponentFromSchema:B,getEntitiesWith:z,getComponent:I,getComponentOrNull:R,getEntityOrNullByName:X,removeComponentDefinition:F,registerComponentDefinition:A,entityContainer:e,componentsIter:L,seal:q,addNetworkManager:a,getNetworkManager:c}}function yu(e){let n=sp(),i=iu(n,e?.onChangeFunction||null);async function t(r){await i.receiveMessages();for(let s of n.getSystems()){let c=s.fn(r);Da(c,`A system (${s.name||"anonymous"}) returned a thenable. Systems cannot be async functions. Documentation: https://dcl.gg/sdk/sync-systems`)}let o=n.entityContainer.releaseRemovedEntities();await i.sendMessages(o)}return{addEntity:n.addEntity,removeEntity:n.removeEntity,removeEntityWithChildren:n.removeEntityWithChildren,addSystem:n.addSystem,removeSystem:n.removeSystem,defineComponent:n.defineComponent,defineComponentFromSchema:n.defineComponentFromSchema,defineValueSetComponentFromSchema:n.defineValueSetComponentFromSchema,registerComponentDefinition:n.registerComponentDefinition,getEntitiesWith:n.getEntitiesWith,getComponent:n.getComponent,getComponentOrNull:n.getComponentOrNull,removeComponentDefinition:n.removeComponentDefinition,componentsIter:n.componentsIter,seal:n.seal,getEntityOrNullByName:n.getEntityOrNullByName,update:t,RootEntity:0,PlayerEntity:1,CameraEntity:2,getEntityState:n.entityContainer.getEntityState,addTransport:i.addTransport,entityContainer:n.entityContainer,addNetworkManager:n.addNetworkManager,getNetworkManager:n.getNetworkManager}}var j=yu(),Oo=mu(j);var bu=Ra(j);var Ci=Sa(j);var Mn=wa(j);var vn=gi(j),xu=Yo(j);var Eu;(function(e){e[e.CT_FIRST_PERSON=0]="CT_FIRST_PERSON",e[e.CT_THIRD_PERSON=1]="CT_THIRD_PERSON",e[e.CT_CINEMATIC=2]="CT_CINEMATIC"})(Eu||(Eu={}));var Rt;(function(e){e[e.IA_POINTER=0]="IA_POINTER",e[e.IA_PRIMARY=1]="IA_PRIMARY",e[e.IA_SECONDARY=2]="IA_SECONDARY",e[e.IA_ANY=3]="IA_ANY",e[e.IA_FORWARD=4]="IA_FORWARD",e[e.IA_BACKWARD=5]="IA_BACKWARD",e[e.IA_RIGHT=6]="IA_RIGHT",e[e.IA_LEFT=7]="IA_LEFT",e[e.IA_JUMP=8]="IA_JUMP",e[e.IA_WALK=9]="IA_WALK",e[e.IA_ACTION_3=10]="IA_ACTION_3",e[e.IA_ACTION_4=11]="IA_ACTION_4",e[e.IA_ACTION_5=12]="IA_ACTION_5",e[e.IA_ACTION_6=13]="IA_ACTION_6"})(Rt||(Rt={}));var et;(function(e){e[e.PET_UP=0]="PET_UP",e[e.PET_DOWN=1]="PET_DOWN",e[e.PET_HOVER_ENTER=2]="PET_HOVER_ENTER",e[e.PET_HOVER_LEAVE=3]="PET_HOVER_LEAVE"})(et||(et={}));var Tu;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.LOADING=1]="LOADING",e[e.NOT_FOUND=2]="NOT_FOUND",e[e.FINISHED_WITH_ERROR=3]="FINISHED_WITH_ERROR",e[e.FINISHED=4]="FINISHED"})(Tu||(Tu={}));var gu;(function(e){e[e.TAM_TOP_LEFT=0]="TAM_TOP_LEFT",e[e.TAM_TOP_CENTER=1]="TAM_TOP_CENTER",e[e.TAM_TOP_RIGHT=2]="TAM_TOP_RIGHT",e[e.TAM_MIDDLE_LEFT=3]="TAM_MIDDLE_LEFT",e[e.TAM_MIDDLE_CENTER=4]="TAM_MIDDLE_CENTER",e[e.TAM_MIDDLE_RIGHT=5]="TAM_MIDDLE_RIGHT",e[e.TAM_BOTTOM_LEFT=6]="TAM_BOTTOM_LEFT",e[e.TAM_BOTTOM_CENTER=7]="TAM_BOTTOM_CENTER",e[e.TAM_BOTTOM_RIGHT=8]="TAM_BOTTOM_RIGHT"})(gu||(gu={}));var _u;(function(e){e[e.F_SANS_SERIF=0]="F_SANS_SERIF",e[e.F_SERIF=1]="F_SERIF",e[e.F_MONOSPACE=2]="F_MONOSPACE"})(_u||(_u={}));function Ga(e){let n=e.getComponentOrNull("composite::root");return n||e.defineComponent("composite::root",{src:be.String,entities:be.Array(be.Map({src:be.Entity,dest:be.Entity}))})}var fp="/";function up(e,n=!1){let i="",t=0,r=-1,o=0,s;for(let c=0;c<=e.length;++c){if(c<e.length)s=e.charCodeAt(c);else{if(s===47)break;s=47}if(s===47){if(!(r===c-1||o===1))if(r!==c-1&&o===2){if(i.length<2||t!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){let a=i.lastIndexOf("/");if(a!==i.length-1){a===-1?(i="",t=0):(i=i.slice(0,a),t=i.length-1-i.lastIndexOf("/")),r=c,o=0;continue}}else if(i.length===2||i.length===1){i="",t=0,r=c,o=0;continue}}n&&(i.length>0?i+="/..":i="..",t=2)}else i.length>0?i+="/"+e.slice(r+1,c):i=e.slice(r+1,c),t=c-r-1;r=c,o=0}else s===46&&o!==-1?++o:o=-1}return i}function Pi(...e){let n="",i=!1,t;for(let r=e.length-1;r>=-1&&!i;r--){let o;r>=0?o=e[r]:(t===void 0&&(t=fp),o=t),o.length!==0&&(n=o+"/"+n,i=o.charCodeAt(0)===47)}return n=up(n,!i),i?n.length>0?"/"+n:"/":n.length>0?n:"."}function ku(e){if(e.length===0)return".";let n=e.charCodeAt(0),i=n===47,t=-1,r=!0;for(let o=e.length-1;o>=1;--o)if(n=e.charCodeAt(o),n===47){if(!r){t=o;break}}else r=!1;return t===-1?i?"/":".":i&&t===1?"//":e.slice(0,t)}function zi(e,n){return(e.startsWith(".")?Pi(n,e):Pi(e)).substring(1)}var Bo;(function(e){e[e.EMM_NONE=0]="EMM_NONE",e[e.EMM_NEXT_AVAILABLE=1]="EMM_NEXT_AVAILABLE",e[e.EMM_DIRECT_MAPPING=2]="EMM_DIRECT_MAPPING"})(Bo||(Bo={}));function Ru(e,n){return n.data?.$case==="json"?n.data.json:e.schema.deserialize(new Oe(n.data?.binary))}function lp(e,n){let i=e.getComponentOrNull(n.name);if(i)return i;if(n.name.startsWith("core::")){if(n.name in Ca)return Ca[n.name](e);throw new Error(`The core component ${n.name} was not found.`)}else{if(n.jsonSchema)return e.defineComponentFromSchema(n.name,be.fromJson(n.jsonSchema));throw new Error(`${n.name} is not defined and there is no schema to define it.`)}}function pp(e,n,i,{entityMapping:t}){let r=i.get(n);if(r)return r;if(t?.type===Bo.EMM_DIRECT_MAPPING){let s=t.getCompositeEntity(n);return i.set(n,s),s}let o=t?.type===Bo.EMM_NEXT_AVAILABLE?t.getNextAvailableEntity():e.addEntity();if(o===null)throw new Error("There is no more entities to allocate");return i.set(n,o),o}function ja(e,n,i,t){let{rootEntity:r,alreadyRequestedSrc:o,entityMapping:s}=t,c=o||new Set,a=ku(Pi(n.src)),u=Dt("core::Transform"),E=Ga(e),N=new Map,A=I=>pp(e,I,N,t),$=r??A(0);r&&N.set(0,r);let B=n.composite.components.find(I=>I.name===E.componentName);if(B)for(let[I,R]of B.data){let z=Ru(E,R),X=zi(z.src,a),ie=i.getCompositeOrNull(X),_e=A(I);if(ie){if(c.has(ie.src)||ie.src===n.src)throw new Error(`Composite ${n.src} has a recursive instanciation while try to instance ${ie.src}. Previous instances: ${c.toString()}`);ja(e,ie,i,{rootEntity:_e,alreadyRequestedSrc:new Set(c).add(ie.src),entityMapping:s?.type===Bo.EMM_NEXT_AVAILABLE?s:void 0})}}for(let I of n.composite.components){if(I.name===E.componentName)continue;let R=lp(e,I);for(let[z,X]of I.data){let ie=Ru(R,X),_e=A(z),L=R.create(_e,ie);if(R.componentId===u){let F=L;F.parent?F.parent=A(F.parent):F.parent=A(0)}else be.mutateNestedValues(R.schema.jsonSchema,L,(F,q)=>q.serializationType==="entity"?{changed:!0,value:A(F)}:{changed:!1})}}let b=E.getMutableOrNull($)||E.create($);for(let[I,R]of N)b.entities.push({src:I,dest:R});return b.src=n.src,$}var lt=ce(fe());var dt=ce(fe());var Su;(function(e){e[e.NULL_VALUE=0]="NULL_VALUE"})(Su||(Su={}));function mp(e){switch(e){case 0:case"NULL_VALUE":return 0;default:throw new Nu.Error("Unrecognized enum value "+e+" for enum NullValue")}}function hp(e){switch(e){case 0:return"NULL_VALUE";default:throw new Nu.Error("Unrecognized enum value "+e+" for enum NullValue")}}function wu(){return{fields:new Map}}var Co;(function(e){function n(c,a=dt.default.Writer.create()){return c.fields.forEach((u,E)=>{u!==void 0&&Mi.encode({key:E,value:u},a.uint32(10).fork()).ldelim()}),a}e.encode=n;function i(c,a){let u=c instanceof dt.default.Reader?c:dt.default.Reader.create(c),E=a===void 0?u.len:u.pos+a,N=wu();for(;u.pos<E;){let A=u.uint32();switch(A>>>3){case 1:if(A!==10)break;let $=Mi.decode(u,u.uint32());$.value!==void 0&&N.fields.set($.key,$.value);continue}if((A&7)===4||A===0)break;u.skipType(A&7)}return N}e.decode=i;function t(c){return{fields:bp(c.fields)?Object.entries(c.fields).reduce((a,[u,E])=>(a.set(u,E),a),new Map):new Map}}e.fromJSON=t;function r(c){let a={};return a.fields={},c.fields&&c.fields.forEach((u,E)=>{a.fields[E]=u}),a}e.toJSON=r;function o(c){let a=wu();return c!==void 0&&Object.keys(c).forEach(u=>{a.fields.set(u,c[u])}),a}e.wrap=o;function s(c){let a={};return[...c.fields.keys()].forEach(u=>{a[u]=c.fields.get(u)}),a}e.unwrap=s})(Co||(Co={}));function yp(){return{key:"",value:void 0}}var Mi;(function(e){function n(o,s=dt.default.Writer.create()){return o.key!==""&&s.uint32(10).string(o.key),o.value!==void 0&&He.encode(He.wrap(o.value),s.uint32(18).fork()).ldelim(),s}e.encode=n;function i(o,s){let c=o instanceof dt.default.Reader?o:dt.default.Reader.create(o),a=s===void 0?c.len:c.pos+s,u=yp();for(;c.pos<a;){let E=c.uint32();switch(E>>>3){case 1:if(E!==10)break;u.key=c.string();continue;case 2:if(E!==18)break;u.value=He.unwrap(He.decode(c,c.uint32()));continue}if((E&7)===4||E===0)break;c.skipType(E&7)}return u}e.decode=i;function t(o){return{key:rn(o.key)?String(o.key):"",value:rn(o?.value)?o.value:void 0}}e.fromJSON=t;function r(o){let s={};return o.key!==void 0&&(s.key=o.key),o.value!==void 0&&(s.value=o.value),s}e.toJSON=r})(Mi||(Mi={}));function Au(){return{kind:void 0}}var He;(function(e){function n(c,a=dt.default.Writer.create()){switch(c.kind?.$case){case"nullValue":a.uint32(8).int32(c.kind.nullValue);break;case"numberValue":a.uint32(17).double(c.kind.numberValue);break;case"stringValue":a.uint32(26).string(c.kind.stringValue);break;case"boolValue":a.uint32(32).bool(c.kind.boolValue);break;case"structValue":Co.encode(Co.wrap(c.kind.structValue),a.uint32(42).fork()).ldelim();break;case"listValue":Po.encode(Po.wrap(c.kind.listValue),a.uint32(50).fork()).ldelim();break}return a}e.encode=n;function i(c,a){let u=c instanceof dt.default.Reader?c:dt.default.Reader.create(c),E=a===void 0?u.len:u.pos+a,N=Au();for(;u.pos<E;){let A=u.uint32();switch(A>>>3){case 1:if(A!==8)break;N.kind={$case:"nullValue",nullValue:u.int32()};continue;case 2:if(A!==17)break;N.kind={$case:"numberValue",numberValue:u.double()};continue;case 3:if(A!==26)break;N.kind={$case:"stringValue",stringValue:u.string()};continue;case 4:if(A!==32)break;N.kind={$case:"boolValue",boolValue:u.bool()};continue;case 5:if(A!==42)break;N.kind={$case:"structValue",structValue:Co.unwrap(Co.decode(u,u.uint32()))};continue;case 6:if(A!==50)break;N.kind={$case:"listValue",listValue:Po.unwrap(Po.decode(u,u.uint32()))};continue}if((A&7)===4||A===0)break;u.skipType(A&7)}return N}e.decode=i;function t(c){return{kind:rn(c.nullValue)?{$case:"nullValue",nullValue:mp(c.nullValue)}:rn(c.numberValue)?{$case:"numberValue",numberValue:Number(c.numberValue)}:rn(c.stringValue)?{$case:"stringValue",stringValue:String(c.stringValue)}:rn(c.boolValue)?{$case:"boolValue",boolValue:!!c.boolValue}:rn(c.structValue)?{$case:"structValue",structValue:c.structValue}:rn(c.listValue)?{$case:"listValue",listValue:[...c.listValue]}:void 0}}e.fromJSON=t;function r(c){let a={};return c.kind?.$case==="nullValue"&&(a.nullValue=c.kind?.nullValue!==void 0?hp(c.kind?.nullValue):void 0),c.kind?.$case==="numberValue"&&(a.numberValue=c.kind?.numberValue),c.kind?.$case==="stringValue"&&(a.stringValue=c.kind?.stringValue),c.kind?.$case==="boolValue"&&(a.boolValue=c.kind?.boolValue),c.kind?.$case==="structValue"&&(a.structValue=c.kind?.structValue),c.kind?.$case==="listValue"&&(a.listValue=c.kind?.listValue),a}e.toJSON=r;function o(c){let a=Au();if(c===null)a.kind={$case:"nullValue",nullValue:0};else if(typeof c=="boolean")a.kind={$case:"boolValue",boolValue:c};else if(typeof c=="number")a.kind={$case:"numberValue",numberValue:c};else if(typeof c=="string")a.kind={$case:"stringValue",stringValue:c};else if(Array.isArray(c))a.kind={$case:"listValue",listValue:c};else if(typeof c=="object")a.kind={$case:"structValue",structValue:c};else if(typeof c<"u")throw new Error("Unsupported any value type: "+typeof c);return a}e.wrap=o;function s(c){return c.kind?.$case==="nullValue"?null:c.kind?.$case==="numberValue"?c.kind?.numberValue:c.kind?.$case==="stringValue"?c.kind?.stringValue:c.kind?.$case==="boolValue"?c.kind?.boolValue:c.kind?.$case==="structValue"?c.kind?.structValue:c.kind?.$case==="listValue"?c.kind?.listValue:void 0}e.unwrap=s})(He||(He={}));function Iu(){return{values:[]}}var Po;(function(e){function n(c,a=dt.default.Writer.create()){for(let u of c.values)He.encode(He.wrap(u),a.uint32(10).fork()).ldelim();return a}e.encode=n;function i(c,a){let u=c instanceof dt.default.Reader?c:dt.default.Reader.create(c),E=a===void 0?u.len:u.pos+a,N=Iu();for(;u.pos<E;){let A=u.uint32();switch(A>>>3){case 1:if(A!==10)break;N.values.push(He.unwrap(He.decode(u,u.uint32())));continue}if((A&7)===4||A===0)break;u.skipType(A&7)}return N}e.decode=i;function t(c){return{values:Array.isArray(c?.values)?[...c.values]:[]}}e.fromJSON=t;function r(c){let a={};return c.values?a.values=c.values.map(u=>u):a.values=[],a}e.toJSON=r;function o(c){let a=Iu();return a.values=c??[],a}e.wrap=o;function s(c){return c?.hasOwnProperty("values")&&Array.isArray(c.values)?c.values:c}e.unwrap=s})(Po||(Po={}));var Nu=(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof global<"u")return global;throw"Unable to locate global object"})();function bp(e){return typeof e=="object"&&e!==null}function rn(e){return e!=null}function xp(){return{data:void 0}}var an;(function(e){function n(o,s=lt.default.Writer.create()){switch(o.data?.$case){case"json":He.encode(He.wrap(o.data.json),s.uint32(10).fork()).ldelim();break;case"binary":s.uint32(18).bytes(o.data.binary);break}return s}e.encode=n;function i(o,s){let c=o instanceof lt.default.Reader?o:lt.default.Reader.create(o),a=s===void 0?c.len:c.pos+s,u=xp();for(;c.pos<a;){let E=c.uint32();switch(E>>>3){case 1:if(E!==10)break;u.data={$case:"json",json:He.unwrap(He.decode(c,c.uint32()))};continue;case 2:if(E!==18)break;u.data={$case:"binary",binary:c.bytes()};continue}if((E&7)===4||E===0)break;c.skipType(E&7)}return u}e.decode=i;function t(o){return{data:Dn(o.json)?{$case:"json",json:o.json}:Dn(o.binary)?{$case:"binary",binary:_p(o.binary)}:void 0}}e.fromJSON=t;function r(o){let s={};return o.data?.$case==="json"&&(s.json=o.data?.json),o.data?.$case==="binary"&&(s.binary=o.data?.binary!==void 0?kp(o.data?.binary):void 0),s}e.toJSON=r})(an||(an={}));function Ep(){return{name:"",jsonSchema:void 0,data:new Map}}var zo;(function(e){function n(o,s=lt.default.Writer.create()){return o.name!==""&&s.uint32(10).string(o.name),o.jsonSchema!==void 0&&He.encode(He.wrap(o.jsonSchema),s.uint32(18).fork()).ldelim(),o.data.forEach((c,a)=>{vi.encode({key:a,value:c},s.uint32(26).fork()).ldelim()}),s}e.encode=n;function i(o,s){let c=o instanceof lt.default.Reader?o:lt.default.Reader.create(o),a=s===void 0?c.len:c.pos+s,u=Ep();for(;c.pos<a;){let E=c.uint32();switch(E>>>3){case 1:if(E!==10)break;u.name=c.string();continue;case 2:if(E!==18)break;u.jsonSchema=He.unwrap(He.decode(c,c.uint32()));continue;case 3:if(E!==26)break;let N=vi.decode(c,c.uint32());N.value!==void 0&&u.data.set(N.key,N.value);continue}if((E&7)===4||E===0)break;c.skipType(E&7)}return u}e.decode=i;function t(o){return{name:Dn(o.name)?String(o.name):"",jsonSchema:Dn(o?.jsonSchema)?o.jsonSchema:void 0,data:Rp(o.data)?Object.entries(o.data).reduce((s,[c,a])=>(s.set(Number(c),an.fromJSON(a)),s),new Map):new Map}}e.fromJSON=t;function r(o){let s={};return o.name!==void 0&&(s.name=o.name),o.jsonSchema!==void 0&&(s.jsonSchema=o.jsonSchema),s.data={},o.data&&o.data.forEach((c,a)=>{s.data[a]=an.toJSON(c)}),s}e.toJSON=r})(zo||(zo={}));function Tp(){return{key:0,value:void 0}}var vi;(function(e){function n(o,s=lt.default.Writer.create()){return o.key!==0&&s.uint32(8).int32(o.key),o.value!==void 0&&an.encode(o.value,s.uint32(18).fork()).ldelim(),s}e.encode=n;function i(o,s){let c=o instanceof lt.default.Reader?o:lt.default.Reader.create(o),a=s===void 0?c.len:c.pos+s,u=Tp();for(;c.pos<a;){let E=c.uint32();switch(E>>>3){case 1:if(E!==8)break;u.key=c.int32();continue;case 2:if(E!==18)break;u.value=an.decode(c,c.uint32());continue}if((E&7)===4||E===0)break;c.skipType(E&7)}return u}e.decode=i;function t(o){return{key:Dn(o.key)?Number(o.key):0,value:Dn(o.value)?an.fromJSON(o.value):void 0}}e.fromJSON=t;function r(o){let s={};return o.key!==void 0&&(s.key=Math.round(o.key)),o.value!==void 0&&(s.value=o.value?an.toJSON(o.value):void 0),s}e.toJSON=r})(vi||(vi={}));function gp(){return{version:0,components:[]}}var Un;(function(e){function n(o,s=lt.default.Writer.create()){o.version!==0&&s.uint32(8).int32(o.version);for(let c of o.components)zo.encode(c,s.uint32(18).fork()).ldelim();return s}e.encode=n;function i(o,s){let c=o instanceof lt.default.Reader?o:lt.default.Reader.create(o),a=s===void 0?c.len:c.pos+s,u=gp();for(;c.pos<a;){let E=c.uint32();switch(E>>>3){case 1:if(E!==8)break;u.version=c.int32();continue;case 2:if(E!==18)break;u.components.push(zo.decode(c,c.uint32()));continue}if((E&7)===4||E===0)break;c.skipType(E&7)}return u}e.decode=i;function t(o){return{version:Dn(o.version)?Number(o.version):0,components:Array.isArray(o?.components)?o.components.map(s=>zo.fromJSON(s)):[]}}e.fromJSON=t;function r(o){let s={};return o.version!==void 0&&(s.version=Math.round(o.version)),o.components?s.components=o.components.map(c=>c?zo.toJSON(c):void 0):s.components=[],s}e.toJSON=r})(Un||(Un={}));var Mo=(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof global<"u")return global;throw"Unable to locate global object"})();function _p(e){if(Mo.Buffer)return Uint8Array.from(Mo.Buffer.from(e,"base64"));{let n=Mo.atob(e),i=new Uint8Array(n.length);for(let t=0;t<n.length;++t)i[t]=n.charCodeAt(t);return i}}function kp(e){if(Mo.Buffer)return Mo.Buffer.from(e).toString("base64");{let n=[];return e.forEach(i=>{n.push(String.fromCharCode(i))}),Mo.btoa(n.join(""))}}function Rp(e){return typeof e=="object"&&e!==null}function Dn(e){return e!=null}var cn;(function(e){function n(c){return Un.fromJSON(c)}e.fromJson=n;function i(c){return Un.decode(c)}e.fromBinary=i;function t(c){return Un.toJSON(c)}e.toJson=t;function r(c){return Un.encode(c).finish()}e.toBinary=r;function o(c,a,u,E={}){ja(c,a,u,E)}e.instance=o;function s(c,a="/"){return zi(c,a)}e.resolveAndNormalizePath=s})(cn||(cn={}));var Le=Bn(j),Ct=Kf(j);var Ou=Qf(j),Jb=Bi(j),St=eu(j);var sn=.45454545454545453,fn=2.2,Bu=1e-6,ir=Math.PI/180,ar=360/(Math.PI*2);var Ae;(function(e){e.TwoPi=Math.PI*2;function n(L,F,q=1401298e-51){let U=L-F;return-q<=U&&U<=q}e.withinEpsilon=n;function i(L){let F=L.toString(16);return L<=15?("0"+F).toUpperCase():F.toUpperCase()}e.toHex=i;function t(L){let F=+L;return F===0||isNaN(F)?F:F>0?1:-1}e.sign=t;function r(L,F=0,q=1){return Math.min(q,Math.max(F,L))}e.clamp=r;function o(L){return Math.log(L)*Math.LOG2E}e.log2=o;function s(L,F){return L-Math.floor(L/F)*F}e.repeat=s;function c(L,F,q){return(L-F)/(q-F)}e.normalize=c;function a(L,F,q){return L*(q-F)+F}e.denormalize=a;function u(L,F){let q=s(F-L,360);return q>180&&(q-=360),q}e.deltaAngle=u;function E(L,F){let q=s(L,F*2);return F-Math.abs(q-F)}e.pingPong=E;function N(L,F,q){let U=r(q);return U=-2*U*U*U+3*U*U,F*U+L*(1-U)}e.smoothStep=N;function A(L,F,q){let U=0;return Math.abs(F-L)<=q?U=F:U=L+t(F-L)*q,U}e.moveTowards=A;function $(L,F,q){let U=u(L,F),Z=0;return-q<U&&U<q?Z=F:Z=A(L,L+U,q),Z}e.moveTowardsAngle=$;function B(L,F,q){return L+(F-L)*q}e.lerp=B;function b(L,F,q){let U=s(F-L,360);return U>180&&(U-=360),L+U*r(q)}e.lerpAngle=b;function I(L,F,q){let U=0;return L!==F?U=r((q-L)/(F-L)):U=0,U}e.inverseLerp=I;function R(L,F,q,U,Z){let T=Z*Z,k=Z*T,M=2*k-3*T+1,G=-2*k+3*T,K=k-2*T+Z,ue=k-T;return L*M+q*G+F*K+U*ue}e.hermite=R;function z(L,F){return L===F?L:Math.random()*(F-L)+L}e.randomRange=z;function X(L,F,q){return(L-F)/(q-F)}e.rangeToPercent=X;function ie(L,F,q){return(q-F)*L+F}e.percentToRange=ie;function _e(L){return L-e.TwoPi*Math.floor((L+Math.PI)/e.TwoPi)}e.normalizeRadians=_e})(Ae||(Ae={}));var P;(function(e){function n(l){let h=Math.abs(l.x),_=Math.abs(l.y);if(h!==_)return!0;let H=Math.abs(l.z);return h!==H}e.isNonUniform=n;function i(l=0,h=0,_=0){return{x:l,y:h,z:_}}e.create=i;function t(l,h){return{x:l.x+h.x,y:l.y+h.y,z:l.z+h.z}}e.add=t;function r(l,h,_){_.x=l.x+h.x,_.y=l.y+h.y,_.z=l.z+h.z}e.addToRef=r;function o(l,h){return{x:l.x-h.x,y:l.y-h.y,z:l.z-h.z}}e.subtract=o;function s(l,h,_){_.x=l.x-h.x,_.y=l.y-h.y,_.z=l.z-h.z}e.subtractToRef=s;function c(l,h,_,H,W){W.x=l.x-h,W.y=l.y-_,W.z=l.z-H}e.subtractFromFloatsToRef=c;function a(l){return{x:-l.x,y:-l.y,z:-l.z}}e.negate=a;function u(l,h){h.x=l.x,h.y=l.y,h.z=l.z}e.copyFrom=u;function E(l,h,_,H){H.x=l,H.y=h,H.z=_}e.copyFromFloats=E;function N(l){return i(l.x,l.y,l.z)}e.clone=N;function A(l,h,_,H){let W=Z(l,_)-H,Y=Z(h,_)-H;return W/(W-Y)}e.getClipFactor=A;function $(l,h,_){let H=q(l),W=q(h),Y=Z(H,W),re=i();return le(H,W,re),Z(re,_)>0?Math.acos(Y):-Math.acos(Y)}e.getAngleBetweenVectors=$;function B(l,h=0){return i(l[h],l[h+1],l[h+2])}e.fromArray=B;function b(l,h){return B(l,h)}e.fromFloatArray=b;function I(l,h,_){_.x=l[h],_.y=l[h+1],_.z=l[h+2]}e.fromArrayToRef=I;function R(l,h,_){return I(l,h,_)}e.fromFloatArrayToRef=R;function z(l){return Math.sqrt(l.x*l.x+l.y*l.y+l.z*l.z)}e.length=z;function X(l){return l.x*l.x+l.y*l.y+l.z*l.z}e.lengthSquared=X;function ie(l,h,_){_.x=l.x*h,_.y=l.y*h,_.z=l.z*h}e.scaleToRef=ie;function _e(l,h){return i(l.x*h,l.y*h,l.z*h)}e.scale=_e;function L(l,h){let _=i(0,0,0);return F(l,h,_),_}e.normalizeFromLength=L;function F(l,h,_){if(h===0||h===1){u(l,_);return}ie(l,1/h,_)}e.normalizeFromLengthToRef=F;function q(l){return L(l,z(l))}e.normalize=q;function U(l,h){F(l,z(l),h)}e.normalizeToRef=U;function Z(l,h){return l.x*h.x+l.y*h.y+l.z*h.z}e.dot=Z;function T(l,h){let _=N(l);return k(l,h,_),_}e.applyMatrix4=T;function k(l,h,_){let{x:H,y:W,z:Y}=l,re=h._m,We=1/(re[3]*H+re[7]*W+re[11]*Y+re[15]);_.x=(re[0]*H+re[4]*W+re[8]*Y+re[12])*We,_.y=(re[1]*H+re[5]*W+re[9]*Y+re[13])*We,_.z=(re[2]*H+re[6]*W+re[10]*Y+re[14])*We}e.applyMatrix4ToRef=k;function M(l,h){let _=i();return G(l,h,_),_}e.rotate=M;function G(l,h,_){let{x:H,y:W,z:Y}=l,{x:re,y:We,z:Ze,w:Me}=h,Ht=Me*H+We*Y-Ze*W,ln=Me*W+Ze*H-re*Y,qt=Me*Y+re*W-We*H,pn=-re*H-We*W-Ze*Y;_.x=Ht*Me+pn*-re+ln*-Ze-qt*-We,_.y=ln*Me+pn*-We+qt*-re-Ht*-Ze,_.z=qt*Me+pn*-Ze+Ht*-We-ln*-re}e.rotateToRef=G;function K(l,h,_){let H=i(0,0,0);return ue(l,h,_,H),H}e.lerp=K;function ue(l,h,_,H){H.x=l.x+(h.x-l.x)*_,H.y=l.y+(h.y-l.y)*_,H.z=l.z+(h.z-l.z)*_}e.lerpToRef=ue;function de(l,h){let _=dn();return le(l,h,_),_}e.cross=de;function le(l,h,_){_.x=l.y*h.z-l.z*h.y,_.y=l.z*h.x-l.x*h.z,_.z=l.x*h.y-l.y*h.x}e.crossToRef=le;function he(l,h){let _=dn();return me(l,h,_),_}e.transformCoordinates=he;function me(l,h,_){return Re(l.x,l.y,l.z,h,_)}e.transformCoordinatesToRef=me;function Re(l,h,_,H,W){let Y=H._m,re=l*Y[0]+h*Y[4]+_*Y[8]+Y[12],We=l*Y[1]+h*Y[5]+_*Y[9]+Y[13],Ze=l*Y[2]+h*Y[6]+_*Y[10]+Y[14],Me=1/(l*Y[3]+h*Y[7]+_*Y[11]+Y[15]);W.x=re*Me,W.y=We*Me,W.z=Ze*Me}e.transformCoordinatesFromFloatsToRef=Re;function Se(l,h){let _=dn();return Ce(l,h,_),_}e.transformNormal=Se;function Ce(l,h,_){pe(l.x,l.y,l.z,h,_)}e.transformNormalToRef=Ce;function pe(l,h,_,H,W){let Y=H._m;W.x=l*Y[0]+h*Y[4]+_*Y[8],W.y=l*Y[1]+h*Y[5]+_*Y[9],W.z=l*Y[2]+h*Y[6]+_*Y[10]}e.transformNormalFromFloatsToRef=pe;function ct(l,h,_,H,W){let Y=W*W,re=W*Y,We=.5*(2*h.x+(-l.x+_.x)*W+(2*l.x-5*h.x+4*_.x-H.x)*Y+(-l.x+3*h.x-3*_.x+H.x)*re),Ze=.5*(2*h.y+(-l.y+_.y)*W+(2*l.y-5*h.y+4*_.y-H.y)*Y+(-l.y+3*h.y-3*_.y+H.y)*re),Me=.5*(2*h.z+(-l.z+_.z)*W+(2*l.z-5*h.z+4*_.z-H.z)*Y+(-l.z+3*h.z-3*_.z+H.z)*re);return i(We,Ze,Me)}e.catmullRom=ct;function g(l,h,_){let H=i();return O(l,h,_,H),H}e.clamp=g;function O(l,h,_,H){let W=l.x;W=W>_.x?_.x:W,W=W<h.x?h.x:W;let Y=l.y;Y=Y>_.y?_.y:Y,Y=Y<h.y?h.y:Y;let re=l.z;re=re>_.z?_.z:re,re=re<h.z?h.z:re,E(W,Y,re,H)}e.clampToRef=O;function V(l,h,_,H,W){let Y=W*W,re=W*Y,We=2*re-3*Y+1,Ze=-2*re+3*Y,Me=re-2*Y+W,Ht=re-Y,ln=l.x*We+_.x*Ze+h.x*Me+H.x*Ht,qt=l.y*We+_.y*Ze+h.y*Me+H.y*Ht,pn=l.z*We+_.z*Ze+h.z*Me+H.z*Ht;return i(ln,qt,pn)}e.hermite=V;function x(l,h){let _=i();return mr(h,l.x,l.y,l.z,_),_}e.minimize=x;function S(l,h){let _=i();return pr(l,h.x,h.y,h.z,_),_}e.maximize=S;function te(l,h){return Math.sqrt(Ie(l,h))}e.distance=te;function Ie(l,h){let _=l.x-h.x,H=l.y-h.y,W=l.z-h.z;return _*_+H*H+W*W}e.distanceSquared=Ie;function Ji(l,h){let _=t(l,h);return ie(_,.5,_),_}e.center=Ji;function Zi(l,h,_){let H=dn();return fr(l,h,_,H),H}e.rotationFromAxis=Zi;function fr(l,h,_,H){let W=Ye.create();Ye.fromAxisToRotationQuaternionToRef(l,h,_,W),u(Ye.toEulerAngles(W),H)}e.rotationFromAxisToRef=fr;function qi(l){return`(${l.x}, ${l.y}, ${l.z})`}e.toString=qi;function Wo(l){let h=l.x||0;return h=h*397^(l.y||0),h=h*397^(l.z||0),h}e.getHashCode=Wo;function Xi(l,h){return l.x===h.x&&l.y===h.y&&l.z===h.z}e.equals=Xi;function ur(l,h,_=Bu){return Ae.withinEpsilon(l.x,h.x,_)&&Ae.withinEpsilon(l.y,h.y,_)&&Ae.withinEpsilon(l.z,h.z,_)}e.equalsWithEpsilon=ur;function Ki(l,h,_,H){return l.x===h&&l.y===_&&l.z===H}e.equalsToFloats=Ki;function Vo(l,h){let _=i();return Pe(l,h,_),_}e.multiply=Vo;function Pe(l,h,_){_.x=l.x*h.x,_.y=l.y*h.y,_.z=l.z*h.z}e.multiplyToRef=Pe;function dr(l,h,_,H,W){W.x=l.x*h,W.y=l.y*_,W.z=l.z*H}e.multiplyByFloatsToRef=dr;function Qi(l,h,_,H){let W=i();return dr(l,h,_,H,W),W}e.multiplyByFloats=Qi;function lr(l,h){return{x:l.x/h.x,y:l.y/h.y,z:l.z/h.z}}e.divide=lr;function ea(l,h,_){_.x=l.x/h.x,_.y=l.y/h.y,_.z=l.z/h.z}e.divideToRef=ea;function pr(l,h,_,H,W){h>l.x?W.x=h:W.x=l.x,_>l.y?W.y=_:W.y=l.y,H>l.z?W.z=H:W.z=l.z}e.maximizeInPlaceFromFloatsToRef=pr;function mr(l,h,_,H,W){h<l.x?W.x=h:W.x=l.x,_<l.y?W.y=_:W.y=l.y,H<l.z?W.z=H:W.z=l.z}e.minimizeInPlaceFromFloatsToRef=mr;function ta(l){return i(Math.floor(l.x),Math.floor(l.y),Math.floor(l.z))}e.floor=ta;function hr(l){return i(l.x-Math.floor(l.x),l.y-Math.floor(l.y),l.z-Math.floor(l.z))}e.fract=hr;function dn(){return i(0,0,0)}e.Zero=dn;function na(){return i(1,1,1)}e.One=na;function Ho(){return i(0,1,0)}e.Up=Ho;function oa(){return i(0,-1,0)}e.Down=oa;function ra(){return i(0,0,1)}e.Forward=ra;function yr(){return i(0,0,-1)}e.Backward=yr;function br(){return i(1,0,0)}e.Right=br;function ia(){return i(-1,0,0)}e.Left=ia;function aa(){return i(Math.random(),Math.random(),Math.random())}e.Random=aa})(P||(P={}));var Ui;(function(e){function n(b,I,R,z){return{normal:P.create(b,I,R),d:z}}e.create=n;function i(b){return n(b[0],b[1],b[2],b[3])}e.fromArray=i;function t(b,I,R){return n(0,0,0,0)}e.fromPoints=t;function r(b,I){let R=n(0,0,0,0);return R.normal=P.normalize(I),R.d=-(I.x*b.x+I.y*b.y+I.z*b.z),R}e.romPositionAndNormal=r;function o(b,I,R){let z=-(I.x*b.x+I.y*b.y+I.z*b.z);return P.dot(R,I)+z}e.signedDistanceToPlaneFromPositionAndNormal=o;function s(b){return[b.normal.x,b.normal.y,b.normal.z,b.d]}e.asArray=s;function c(b){return n(b.normal.x,b.normal.y,b.normal.z,b.d)}e.clone=c;function a(b){return 0}e.getHashCode=a;function u(b){let I=n(0,0,0,0),R=Math.sqrt(b.normal.x*b.normal.x+b.normal.y*b.normal.y+b.normal.z*b.normal.z),z=0;return R!==0&&(z=1/R),I.normal.x=b.normal.x*z,I.normal.y=b.normal.y*z,I.normal.z=b.normal.z*z,I.d*=z,b}e.normalize=u;function E(b,I){let R=Pt.create();Pt.transposeToRef(I,R);let z=R._m,X=b.normal.x,ie=b.normal.y,_e=b.normal.z,L=b.d,F=X*z[0]+ie*z[1]+_e*z[2]+L*z[3],q=X*z[4]+ie*z[5]+_e*z[6]+L*z[7],U=X*z[8]+ie*z[9]+_e*z[10]+L*z[11],Z=X*z[12]+ie*z[13]+_e*z[14]+L*z[15];return n(F,q,U,Z)}e.transform=E;function N(b,I){return b.normal.x*I.x+b.normal.y*I.y+b.normal.z*I.z+b.d}e.dotCoordinate=N;function A(b,I,R){let z=I.x-b.x,X=I.y-b.y,ie=I.z-b.z,_e=R.x-b.x,L=R.y-b.y,F=R.z-b.z,q=X*F-ie*L,U=ie*_e-z*F,Z=z*L-X*_e,T=Math.sqrt(q*q+U*U+Z*Z),k;T!==0?k=1/T:k=0;let M=P.create(q*k,U*k,Z*k);return{normal:M,d:-(M.x*b.x+M.y*b.y+M.z*b.z)}}e.copyFromPoints=A;function $(b,I,R){return P.dot(b.normal,I)<=R}e.isFrontFacingTo=$;function B(b,I){return P.dot(I,b.normal)+b.d}e.signedDistanceTo=B})(Ui||(Ui={}));var Pt;(function(e){function n(f){return f._m}e.m=n;let i=0,t={};function r(){return t}e.IdentityReadonly=r;function o(){let f={updateFlag:0,isIdentity:!1,isIdentity3x2:!0,_isIdentityDirty:!0,_isIdentity3x2Dirty:!0,_m:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};return Je(f,!1),f}e.create=o;function s(f,d=0){let p=o();return c(f,d,p),p}e.fromArray=s;function c(f,d,p){for(let m=0;m<16;m++)p._m[m]=f[m+d];Pe(p)}e.fromArrayToRef=c;function a(f,d,p,m){for(let y=0;y<16;y++)m._m[y]=f[y+d]*p;Pe(m)}e.fromFloatArrayToRefScaled=a;function u(f,d,p,m,y,C,w,D,J,ne,ae,Te,se,ve,Ue,Ve,ze){let oe=ze._m;oe[0]=f,oe[1]=d,oe[2]=p,oe[3]=m,oe[4]=y,oe[5]=C,oe[6]=w,oe[7]=D,oe[8]=J,oe[9]=ne,oe[10]=ae,oe[11]=Te,oe[12]=se,oe[13]=ve,oe[14]=Ue,oe[15]=Ve,Pe(ze)}e.fromValuesToRef=u;function E(f,d,p,m,y,C,w,D,J,ne,ae,Te,se,ve,Ue,Ve){let ze=o(),oe=ze._m;return oe[0]=f,oe[1]=d,oe[2]=p,oe[3]=m,oe[4]=y,oe[5]=C,oe[6]=w,oe[7]=D,oe[8]=J,oe[9]=ne,oe[10]=ae,oe[11]=Te,oe[12]=se,oe[13]=ve,oe[14]=Ue,oe[15]=Ve,Pe(ze),ze}e.fromValues=E;function N(f,d,p){let m=o();return A(f,d,p,m),m}e.compose=N;function A(f,d,p,m){let y=[o(),o(),o()];T(f.x,f.y,f.z,y[1]),Vo(d,y[0]),W(y[1],y[0],m),br(m,p)}e.composeToRef=A;function $(){let f=E(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return Je(f,!0),f}e.Identity=$;function B(f){u(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,f),Je(f,!0)}e.IdentityToRef=B;function b(){let f=E(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return Je(f,!1),f}e.Zero=b;function I(f){let d=o();return R(f,d),d}e.RotationX=I;function R(f,d){let p=Math.sin(f),m=Math.cos(f);u(1,0,0,0,0,m,p,0,0,-p,m,0,0,0,0,1,d),Je(d,m===1&&p===0)}e.rotationXToRef=R;function z(f){let d=o();return X(f,d),d}e.rotationY=z;function X(f,d){let p=Math.sin(f),m=Math.cos(f);u(m,0,-p,0,0,1,0,0,p,0,m,0,0,0,0,1,d),Je(d,m===1&&p===0)}e.rotationYToRef=X;function ie(f){let d=o();return _e(f,d),d}e.rotationZ=ie;function _e(f,d){let p=Math.sin(f),m=Math.cos(f);u(m,p,0,0,-p,m,0,0,0,0,1,0,0,0,0,1,d),Je(d,m===1&&p===0)}e.rotationZToRef=_e;function L(f,d){let p=o();return F(f,d,p),p}e.rotationAxis=L;function F(f,d,p){let m=Math.sin(-d),y=Math.cos(-d),C=1-y,w=P.normalize(f),D=p._m;D[0]=w.x*w.x*C+y,D[1]=w.x*w.y*C-w.z*m,D[2]=w.x*w.z*C+w.y*m,D[3]=0,D[4]=w.y*w.x*C+w.z*m,D[5]=w.y*w.y*C+y,D[6]=w.y*w.z*C-w.x*m,D[7]=0,D[8]=w.z*w.x*C-w.y*m,D[9]=w.z*w.y*C+w.x*m,D[10]=w.z*w.z*C+y,D[11]=0,D[12]=0,D[13]=0,D[14]=0,D[15]=1,Pe(p)}e.rotationAxisToRef=F;function q(f,d,p){let m=o();return U(f,d,p,m),m}e.rotationYawPitchRoll=q;function U(f,d,p,m){let y=Ye.Zero();Ye.fromRotationYawPitchRollToRef(f,d,p,y),Vo(y,m)}e.rotationYawPitchRollToRef=U;function Z(f,d,p){let m=o();return T(f,d,p,m),m}e.scaling=Z;function T(f,d,p,m){u(f,0,0,0,0,d,0,0,0,0,p,0,0,0,0,1,m),Je(m,f===1&&d===1&&p===1)}e.scalingToRef=T;function k(f,d,p){let m=o();return M(f,d,p,m),m}e.translation=k;function M(f,d,p,m){u(1,0,0,0,0,1,0,0,0,0,1,0,f,d,p,1,m),Je(m,f===0&&d===0&&p===0)}e.translationToRef=M;function G(f,d,p){let m=o();return K(f,d,p,m),m}e.lerp=G;function K(f,d,p,m){for(let y=0;y<16;y++)m._m[y]=f._m[y]*(1-p)+d._m[y]*p;Pe(m)}e.lerpToRef=K;function ue(f,d,p){let m=o();return de(f,d,p,m),m}e.decomposeLerp=ue;function de(f,d,p,m){let y=P.Zero(),C=Ye.Zero(),w=P.Zero();Me(f,y,C,w);let D=P.Zero(),J=Ye.Zero(),ne=P.Zero();Me(d,D,J,ne);let ae=P.Zero();P.lerpToRef(y,D,p,ae);let Te=Ye.Zero();Ye.slerpToRef(C,J,p,Te);let se=P.Zero();P.lerpToRef(w,ne,p,se),A(ae,Te,se,m)}e.decomposeLerpToRef=de;function le(f,d,p){let m=o();return he(f,d,p,m),m}e.LookAtLH=le;function he(f,d,p,m){let y=P.Zero(),C=P.Zero(),w=P.Zero();P.subtractToRef(d,f,w),P.normalizeToRef(w,w),P.crossToRef(p,w,y);let D=P.lengthSquared(y);D===0?y.x=1:P.normalizeFromLengthToRef(y,Math.sqrt(D),y),P.crossToRef(w,y,C),P.normalizeToRef(C,C);let J=-P.dot(y,f),ne=-P.dot(C,f),ae=-P.dot(w,f);u(y.x,C.x,w.x,0,y.y,C.y,w.y,0,y.z,C.z,w.z,0,J,ne,ae,1,m)}e.lookAtLHToRef=he;function me(f,d,p){let m=o();return Re(f,d,p,m),m}e.lookAtRH=me;function Re(f,d,p,m){let y=P.Zero(),C=P.Zero(),w=P.Zero();P.subtractToRef(f,d,w),P.normalizeToRef(w,w),P.crossToRef(p,w,y);let D=P.lengthSquared(y);D===0?y.x=1:P.normalizeFromLengthToRef(y,Math.sqrt(D),y),P.crossToRef(w,y,C),P.normalizeToRef(C,C);let J=-P.dot(y,f),ne=-P.dot(C,f),ae=-P.dot(w,f);u(y.x,C.x,w.x,0,y.y,C.y,w.y,0,y.z,C.z,w.z,0,J,ne,ae,1,m)}e.lookAtRHToRef=Re;function Se(f,d,p,m){let y=o();return Ce(f,d,p,m,y),y}e.orthoLH=Se;function Ce(f,d,p,m,y){let C=p,w=m,D=2/f,J=2/d,ne=2/(w-C),ae=-(w+C)/(w-C);u(D,0,0,0,0,J,0,0,0,0,ne,0,0,0,ae,1,y),Je(y,D===1&&J===1&&ne===1&&ae===0)}e.orthoLHToRef=Ce;function pe(f,d,p,m,y,C){let w=o();return ct(f,d,p,m,y,C,w),w}e.OrthoOffCenterLH=pe;function ct(f,d,p,m,y,C,w){let D=y,J=C,ne=2/(d-f),ae=2/(m-p),Te=2/(J-D),se=-(J+D)/(J-D),ve=(f+d)/(f-d),Ue=(m+p)/(p-m);u(ne,0,0,0,0,ae,0,0,0,0,Te,0,ve,Ue,se,1,w),Pe(w)}e.orthoOffCenterLHToRef=ct;function g(f,d,p,m,y,C){let w=o();return O(f,d,p,m,y,C,w),w}e.orthoOffCenterRH=g;function O(f,d,p,m,y,C,w){ct(f,d,p,m,y,C,w),w._m[10]*=-1}e.orthoOffCenterRHToRef=O;function V(f,d,p,m){let y=o(),C=p,w=m,D=2*C/f,J=2*C/d,ne=(w+C)/(w-C),ae=-2*w*C/(w-C);return u(D,0,0,0,0,J,0,0,0,0,ne,1,0,0,ae,0,y),Je(y,!1),y}e.perspectiveLH=V;function x(f,d,p,m){let y=o();return S(f,d,p,m,y),y}e.perspectiveFovLH=x;function S(f,d,p,m,y,C=!0){let w=p,D=m,J=1/Math.tan(f*.5),ne=C?J/d:J,ae=C?J:J*d,Te=(D+w)/(D-w),se=-2*D*w/(D-w);u(ne,0,0,0,0,ae,0,0,0,0,Te,1,0,0,se,0,y),Je(y,!1)}e.perspectiveFovLHToRef=S;function te(f,d,p,m){let y=o();return Ie(f,d,p,m,y),y}e.PerspectiveFovRH=te;function Ie(f,d,p,m,y,C=!0){let w=p,D=m,J=1/Math.tan(f*.5),ne=C?J/d:J,ae=C?J:J*d,Te=-(D+w)/(D-w),se=-2*D*w/(D-w);u(ne,0,0,0,0,ae,0,0,0,0,Te,-1,0,0,se,0,y),Je(y,!1)}e.perspectiveFovRHToRef=Ie;function Ji(f,d,p,m,y=!1){let C=y?-1:1,w=Math.tan(f.upDegrees*Math.PI/180),D=Math.tan(f.downDegrees*Math.PI/180),J=Math.tan(f.leftDegrees*Math.PI/180),ne=Math.tan(f.rightDegrees*Math.PI/180),ae=2/(J+ne),Te=2/(w+D),se=m._m;se[0]=ae,se[1]=se[2]=se[3]=se[4]=0,se[5]=Te,se[6]=se[7]=0,se[8]=(J-ne)*ae*.5,se[9]=-((w-D)*Te*.5),se[10]=-p/(d-p),se[11]=1*C,se[12]=se[13]=se[15]=0,se[14]=-(2*p*d)/(p-d),Pe(m)}e.perspectiveFovWebVRToRef=Ji;function Zi(f){return[f._m[0],f._m[1],f._m[4],f._m[5]]}e.GetAsMatrix2x2=Zi;function fr(f){return[f._m[0],f._m[1],f._m[2],f._m[4],f._m[5],f._m[6],f._m[8],f._m[9],f._m[10]]}e.GetAsMatrix3x3=fr;function qi(f){let d=o();return Wo(f,d),d}e.transpose=qi;function Wo(f,d){let p=d._m,m=f._m;p[0]=m[0],p[1]=m[4],p[2]=m[8],p[3]=m[12],p[4]=m[1],p[5]=m[5],p[6]=m[9],p[7]=m[13],p[8]=m[2],p[9]=m[6],p[10]=m[10],p[11]=m[14],p[12]=m[3],p[13]=m[7],p[14]=m[11],p[15]=m[15],Je(d,f.isIdentity,f._isIdentityDirty)}e.transposeToRef=Wo;function Xi(f){let d=o();return ur(f,d),d}e.reflection=Xi;function ur(f,d){let p=Ui.normalize(f),m=p.normal.x,y=p.normal.y,C=p.normal.z,w=-2*m,D=-2*y,J=-2*C;u(w*m+1,D*m,J*m,0,w*y,D*y+1,J*y,0,w*C,D*C,J*C+1,0,w*p.d,D*p.d,J*p.d,1,d)}e.reflectionToRef=ur;function Ki(f,d,p,m){u(f.x,f.y,f.z,0,d.x,d.y,d.z,0,p.x,p.y,p.z,0,0,0,0,1,m)}e.fromXYZAxesToRef=Ki;function Vo(f,d){let p=f.x*f.x,m=f.y*f.y,y=f.z*f.z,C=f.x*f.y,w=f.z*f.w,D=f.z*f.x,J=f.y*f.w,ne=f.y*f.z,ae=f.x*f.w;d._m[0]=1-2*(m+y),d._m[1]=2*(C+w),d._m[2]=2*(D-J),d._m[3]=0,d._m[4]=2*(C-w),d._m[5]=1-2*(y+p),d._m[6]=2*(ne+ae),d._m[7]=0,d._m[8]=2*(D+J),d._m[9]=2*(ne-ae),d._m[10]=1-2*(m+p),d._m[11]=0,d._m[12]=0,d._m[13]=0,d._m[14]=0,d._m[15]=1,Pe(d)}e.fromQuaternionToRef=Vo;function Pe(f){f.updateFlag=i++,f.isIdentity=!1,f.isIdentity3x2=!1,f._isIdentityDirty=!0,f._isIdentity3x2Dirty=!0}function dr(f){if(f._isIdentityDirty){f._isIdentityDirty=!1;let d=f._m;f.isIdentity=d[0]===1&&d[1]===0&&d[2]===0&&d[3]===0&&d[4]===0&&d[5]===1&&d[6]===0&&d[7]===0&&d[8]===0&&d[9]===0&&d[10]===1&&d[11]===0&&d[12]===0&&d[13]===0&&d[14]===0&&d[15]===1}return f.isIdentity}e.isIdentityUpdate=dr;function Qi(f){return f._isIdentity3x2Dirty&&(f._isIdentity3x2Dirty=!1,f._m[0]!==1||f._m[5]!==1||f._m[15]!==1||f._m[1]!==0||f._m[2]!==0||f._m[3]!==0||f._m[4]!==0||f._m[6]!==0||f._m[7]!==0||f._m[8]!==0||f._m[9]!==0||f._m[10]!==0||f._m[11]!==0||f._m[12]!==0||f._m[13]!==0||f._m[14]!==0?f.isIdentity3x2=!1:f.isIdentity3x2=!0),f.isIdentity3x2}e.isIdentityAs3x2Update=Qi;function lr(f){if(f.isIdentity===!0)return 1;let d=f._m,p=d[0],m=d[1],y=d[2],C=d[3],w=d[4],D=d[5],J=d[6],ne=d[7],ae=d[8],Te=d[9],se=d[10],ve=d[11],Ue=d[12],Ve=d[13],ze=d[14],oe=d[15],tt=se*oe-ze*ve,pt=Te*oe-Ve*ve,mt=Te*ze-Ve*se,ht=ae*oe-Ue*ve,yt=ae*ze-se*Ue,bt=ae*Ve-Ue*Te,wt=+(D*tt-J*pt+ne*mt),Gt=-(w*tt-J*ht+ne*yt),jt=+(w*pt-D*ht+ne*bt),$t=-(w*mt-D*yt+J*bt);return p*wt+m*Gt+y*jt+C*$t}e.determinant=lr;function ea(f){return f._m}e.toArray=ea;function pr(f){return f._m}e.asArray=pr;function mr(f){u(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,f),Je(f,!1)}e.reset=mr;function ta(f,d){let p=o();return hr(f,d,p),p}e.add=ta;function hr(f,d,p){for(let m=0;m<16;m++)p._m[m]=f._m[m]+d._m[m];Pe(p)}e.addToRef=hr;function dn(f,d){for(let p=0;p<16;p++)f._m[p]+=d._m[p];Pe(f)}e.addToSelf=dn;function na(f){let d=o();return Ho(f,d),d}e.invert=na;function Ho(f,d){if(f.isIdentity===!0){_(f,d);return}let p=f._m,m=p[0],y=p[1],C=p[2],w=p[3],D=p[4],J=p[5],ne=p[6],ae=p[7],Te=p[8],se=p[9],ve=p[10],Ue=p[11],Ve=p[12],ze=p[13],oe=p[14],tt=p[15],pt=ve*tt-oe*Ue,mt=se*tt-ze*Ue,ht=se*oe-ze*ve,yt=Te*tt-Ve*Ue,bt=Te*oe-ve*Ve,wt=Te*ze-Ve*se,Gt=+(J*pt-ne*mt+ae*ht),jt=-(D*pt-ne*yt+ae*bt),$t=+(D*mt-J*yt+ae*wt),mn=-(D*ht-J*bt+ne*wt),hn=m*Gt+y*jt+C*$t+w*mn;if(hn===0){_(f,d);return}let De=1/hn,yn=ne*tt-oe*ae,bn=J*tt-ze*ae,xn=J*oe-ze*ne,En=D*tt-Ve*ae,Tn=D*oe-Ve*ne,gn=D*ze-Ve*J,_n=ne*Ue-ve*ae,nc=J*Ue-se*ae,oc=J*ve-se*ne,rc=D*Ue-Te*ae,ic=D*ve-Te*ne,ac=D*se-Te*J,Qu=-(y*pt-C*mt+w*ht),ed=+(m*pt-C*yt+w*bt),td=-(m*mt-y*yt+w*wt),nd=+(m*ht-y*bt+C*wt),od=+(y*yn-C*bn+w*xn),rd=-(m*yn-C*En+w*Tn),id=+(m*bn-y*En+w*gn),ad=-(m*xn-y*Tn+C*gn),cd=-(y*_n-C*nc+w*oc),sd=+(m*_n-C*rc+w*ic),fd=-(m*nc-y*rc+w*ac),ud=+(m*oc-y*ic+C*ac);u(Gt*De,Qu*De,od*De,cd*De,jt*De,ed*De,rd*De,sd*De,$t*De,td*De,id*De,fd*De,mn*De,nd*De,ad*De,ud*De,d)}e.invertToRef=Ho;function oa(f,d,p){f._m[d]+=p,Pe(f)}e.addAtIndex=oa;function ra(f,d,p){return f._m[d]*=p,Pe(f),f}e.multiplyAtIndex=ra;function yr(f,d,p,m){f._m[12]=d,f._m[13]=p,f._m[14]=m,Pe(f)}e.setTranslationFromFloats=yr;function br(f,d){yr(f,d.x,d.y,d.z)}e.setTranslation=br;function ia(f){return P.create(f._m[12],f._m[13],f._m[14])}e.getTranslation=ia;function aa(f,d){d.x=f._m[12],d.y=f._m[13],d.z=f._m[14]}e.getTranslationToRef=aa;function l(f){let d=f._m;return u(1,0,0,0,0,1,0,0,0,0,1,0,d[12],d[13],d[14],d[15],f),Je(f,d[12]===0&&d[13]===0&&d[14]===0&&d[15]===1),f}e.removeRotationAndScaling=l;function h(f,d){let p=o();return W(f,d,p),p}e.multiply=h;function _(f,d){H(f,d._m),Je(d,f.isIdentity,f._isIdentityDirty,f.isIdentity3x2,f._isIdentity3x2Dirty)}e.copy=_;function H(f,d,p=0){for(let m=0;m<16;m++)d[p+m]=f._m[m]}e.copyToArray=H;function W(f,d,p){if(f.isIdentity){_(d,p);return}if(d.isIdentity){_(f,p);return}Y(f,d,p._m,0),Pe(p)}e.multiplyToRef=W;function Y(f,d,p,m){let y=f._m,C=d._m,w=y[0],D=y[1],J=y[2],ne=y[3],ae=y[4],Te=y[5],se=y[6],ve=y[7],Ue=y[8],Ve=y[9],ze=y[10],oe=y[11],tt=y[12],pt=y[13],mt=y[14],ht=y[15],yt=C[0],bt=C[1],wt=C[2],Gt=C[3],jt=C[4],$t=C[5],mn=C[6],hn=C[7],De=C[8],yn=C[9],bn=C[10],xn=C[11],En=C[12],Tn=C[13],gn=C[14],_n=C[15];p[m]=w*yt+D*jt+J*De+ne*En,p[m+1]=w*bt+D*$t+J*yn+ne*Tn,p[m+2]=w*wt+D*mn+J*bn+ne*gn,p[m+3]=w*Gt+D*hn+J*xn+ne*_n,p[m+4]=ae*yt+Te*jt+se*De+ve*En,p[m+5]=ae*bt+Te*$t+se*yn+ve*Tn,p[m+6]=ae*wt+Te*mn+se*bn+ve*gn,p[m+7]=ae*Gt+Te*hn+se*xn+ve*_n,p[m+8]=Ue*yt+Ve*jt+ze*De+oe*En,p[m+9]=Ue*bt+Ve*$t+ze*yn+oe*Tn,p[m+10]=Ue*wt+Ve*mn+ze*bn+oe*gn,p[m+11]=Ue*Gt+Ve*hn+ze*xn+oe*_n,p[m+12]=tt*yt+pt*jt+mt*De+ht*En,p[m+13]=tt*bt+pt*$t+mt*yn+ht*Tn,p[m+14]=tt*wt+pt*mn+mt*bn+ht*gn,p[m+15]=tt*Gt+pt*hn+mt*xn+ht*_n}e.multiplyToArray=Y;function re(f,d){let p=d;if(!p)return!1;if((f.isIdentity||p.isIdentity)&&!f._isIdentityDirty&&!p._isIdentityDirty)return f.isIdentity&&p.isIdentity;let m=f._m,y=p._m;return m[0]===y[0]&&m[1]===y[1]&&m[2]===y[2]&&m[3]===y[3]&&m[4]===y[4]&&m[5]===y[5]&&m[6]===y[6]&&m[7]===y[7]&&m[8]===y[8]&&m[9]===y[9]&&m[10]===y[10]&&m[11]===y[11]&&m[12]===y[12]&&m[13]===y[13]&&m[14]===y[14]&&m[15]===y[15]}e.equals=re;function We(f){let d=o();return _(f,d),d}e.clone=We;function Ze(f){let d=f._m[0]||0;for(let p=1;p<16;p++)d=d*397^(f._m[p]||0);return d}e.getHashCode=Ze;function Me(f,d,p,m){if(f.isIdentity)return m&&(m.x=0,m.y=0,m.z=0),d&&(d.x=1,d.y=1,d.z=1),p&&(p.w=1,p.x=0,p.y=0,p.z=0),!0;let y=f._m;m&&(m.x=y[12],m.y=y[13],m.z=y[14]);let C=d||P.Zero();if(C.x=Math.sqrt(y[0]*y[0]+y[1]*y[1]+y[2]*y[2]),C.y=Math.sqrt(y[4]*y[4]+y[5]*y[5]+y[6]*y[6]),C.z=Math.sqrt(y[8]*y[8]+y[9]*y[9]+y[10]*y[10]),lr(f)<=0&&(C.y*=-1),C.x===0||C.y===0||C.z===0)return p&&(p.w=1,p.x=0,p.y=0,p.z=0),!1;if(p){let w=1/C.x,D=1/C.y,J=1/C.z,ne=o();u(y[0]*w,y[1]*w,y[2]*w,0,y[4]*D,y[5]*D,y[6]*D,0,y[8]*J,y[9]*J,y[10]*J,0,0,0,0,1,ne),Ye.fromRotationMatrixToRef(ne,p)}return!0}e.decompose=Me;function Ht(f,d,p,m,y,C){if(d<0||d>3)return;let w=d*4;f._m[w+0]=p,f._m[w+1]=m,f._m[w+2]=y,f._m[w+3]=C,Pe(f)}e.setRowFromFloats=Ht;function ln(f,d){let p=o();return qt(f,d,p),p}e.scale=ln;function qt(f,d,p){for(let m=0;m<16;m++)p._m[m]=f._m[m]*d;Pe(p)}e.scaleToRef=qt;function pn(f,d,p){for(let m=0;m<16;m++)p._m[m]+=f._m[m]*d;Pe(p)}e.scaleAndAddToRef=pn;function Zu(f,d){let p=o();Ho(f,p),Wo(p,d);let m=d._m;u(m[0],m[1],m[2],0,m[4],m[5],m[6],0,m[8],m[9],m[10],0,0,0,0,1,d)}e.normalMatrixToRef=Zu;function qu(f){let d=o();return tc(f,d),d}e.getRotationMatrix=qu;function tc(f,d){let p=P.Zero();if(!Me(f,p)){d=$();return}let m=f._m,y=1/p.x,C=1/p.y,w=1/p.z;u(m[0]*y,m[1]*y,m[2]*y,0,m[4]*C,m[5]*C,m[6]*C,0,m[8]*w,m[9]*w,m[10]*w,0,0,0,0,1,d)}e.getRotationMatrixToRef=tc;function Xu(f){f._m[2]*=-1,f._m[6]*=-1,f._m[8]*=-1,f._m[9]*=-1,f._m[14]*=-1,Pe(f)}e.toggleModelMatrixHandInPlace=Xu;function Ku(f){f._m[8]*=-1,f._m[9]*=-1,f._m[10]*=-1,f._m[11]*=-1,Pe(f)}e.toggleProjectionMatrixHandInPlace=Ku;function Je(f,d,p=!1,m=!1,y=!0){f.updateFlag=i++,f.isIdentity=d,f.isIdentity3x2=d||m,f._isIdentityDirty=f.isIdentity?!1:p,f._isIdentity3x2Dirty=f.isIdentity3x2?!1:y}})(Pt||(Pt={}));var Ye;(function(e){function n(T=0,k=0,M=0,G=1){return{x:T,y:k,z:M,w:G}}e.create=n;function i(T,k){return{x:T.x+k.x,y:T.y+k.y,z:T.z+k.z,w:T.w+k.w}}e.add=i;function t(T,k,M){let G=k*.5,K=T*.5,ue=M*.5,de=Math.cos(G),le=Math.cos(K),he=Math.cos(ue),me=Math.sin(G),Re=Math.sin(K),Se=Math.sin(ue);return n(le*me*he+Re*de*Se,Re*de*he-le*me*Se,le*de*Se-Re*me*he,le*de*he+Re*me*Se)}e.fromRotationYawPitchRoll=t;function r(T,k,M){return t(k*ir,T*ir,M*ir)}e.fromEulerDegrees=r;function o(T){return Math.sqrt(s(T))}e.length=o;function s(T){return T.x*T.x+T.y*T.y+T.z*T.z+T.w*T.w}e.lengthSquared=s;function c(T,k){return T.x*k.x+T.y*k.y+T.z*k.z+T.w*k.w}e.dot=c;function a(T,k){let M=c(T,k);return Math.acos(Math.min(Math.abs(M),1))*2*ar}e.angle=a;function u(T,k,M){let G=a(T,k);if(G===0)return k;let K=Math.min(1,M/G);return R(T,k,K)}e.rotateTowards=u;function E(T,k={x:0,y:1,z:0}){let M=P.normalize(T),G=P.normalize(P.cross(k,M)),K=P.cross(M,G),ue=G.x,de=G.y,le=G.z,he=K.x,me=K.y,Re=K.z,Se=M.x,Ce=M.y,pe=M.z,ct=ue+me+pe,g=n();if(ct>0){let x=Math.sqrt(ct+1);return g.w=x*.5,x=.5/x,g.x=(Re-Ce)*x,g.y=(Se-le)*x,g.z=(de-he)*x,g}if(ue>=me&&ue>=pe){let x=Math.sqrt(1+ue-me-pe),S=.5/x;return g.x=.5*x,g.y=(de+he)*S,g.z=(le+Se)*S,g.w=(Re-Ce)*S,g}if(me>pe){let x=Math.sqrt(1+me-ue-pe),S=.5/x;return g.x=(he+de)*S,g.y=.5*x,g.z=(Ce+Re)*S,g.w=(Se-le)*S,g}let O=Math.sqrt(1+pe-ue-me),V=.5/O;return g.x=(Se+le)*V,g.y=(Ce+Re)*V,g.z=.5*O,g.w=(de-he)*V,g}e.lookRotation=E;function N(T){let k=1/o(T);return n(T.x*k,T.y*k,T.z*k,T.w*k)}e.normalize=N;function A(T,k,M=P.Up()){let G=P.normalize(T),K=P.normalize(k),ue=P.cross(G,K),de=Math.sqrt(P.lengthSquared(G)*P.lengthSquared(K))+P.dot(G,K);return P.lengthSquared(ue)<1e-4?Math.abs(de)<1e-4?N(n(M.x,M.y,M.z,0)):$():N(n(ue.x,ue.y,ue.z,de))}e.fromToRotation=A;function $(){return n(0,0,0,1)}e.Identity=$;function B(T){let k=P.create(),M=T.x*T.x+T.y*T.y+T.z*T.z+T.w*T.w,G=T.x*T.w-T.y*T.z;return G>.4995*M?(k.x=Math.PI/2,k.y=2*Math.atan2(T.y,T.x),k.z=0):G<-.4995*M?(k.x=-Math.PI/2,k.y=-2*Math.atan2(T.y,T.x),k.z=0):(k.x=Math.asin(2*(T.w*T.x-T.y*T.z)),k.y=Math.atan2(2*T.w*T.y+2*T.z*T.x,1-2*(T.x*T.x+T.y*T.y)),k.z=Math.atan2(2*T.w*T.z+2*T.x*T.y,1-2*(T.z*T.z+T.x*T.x))),k.x*=ar,k.y*=ar,k.z*=ar,k.x=Ae.repeat(k.x,360),k.y=Ae.repeat(k.y,360),k.z=Ae.repeat(k.z,360),k}e.toEulerAngles=B;function b(T,k,M,G){let K=k*.5,ue=T*.5,de=M*.5,le=Math.cos(K),he=Math.cos(ue),me=Math.cos(de),Re=Math.sin(K),Se=Math.sin(ue),Ce=Math.sin(de);G.x=he*Re*me+Se*le*Ce,G.y=Se*le*me-he*Re*Ce,G.z=he*le*Ce-Se*Re*me,G.w=he*le*me+Se*Re*Ce}e.fromRotationYawPitchRollToRef=b;function I(T,k){let M=T._m,G=M[0],K=M[4],ue=M[8],de=M[1],le=M[5],he=M[9],me=M[2],Re=M[6],Se=M[10],Ce=G+le+Se,pe;Ce>0?(pe=.5/Math.sqrt(Ce+1),k.w=.25/pe,k.x=(Re-he)*pe,k.y=(ue-me)*pe,k.z=(de-K)*pe):G>le&&G>Se?(pe=2*Math.sqrt(1+G-le-Se),k.w=(Re-he)/pe,k.x=.25*pe,k.y=(K+de)/pe,k.z=(ue+me)/pe):le>Se?(pe=2*Math.sqrt(1+le-G-Se),k.w=(ue-me)/pe,k.x=(K+de)/pe,k.y=.25*pe,k.z=(he+Re)/pe):(pe=2*Math.sqrt(1+Se-G-le),k.w=(de-K)/pe,k.x=(ue+me)/pe,k.y=(he+Re)/pe,k.z=.25*pe)}e.fromRotationMatrixToRef=I;function R(T,k,M){let G=e.Identity();return e.slerpToRef(T,k,M,G),G}e.slerp=R;function z(T,k,M,G){let K,ue,de=T.x*k.x+T.y*k.y+T.z*k.z+T.w*k.w,le=!1;if(de<0&&(le=!0,de=-de),de>.999999)ue=1-M,K=le?-M:M;else{let he=Math.acos(de),me=1/Math.sin(he);ue=Math.sin((1-M)*he)*me,K=le?-Math.sin(M*he)*me:Math.sin(M*he)*me}G.x=ue*T.x+K*k.x,G.y=ue*T.y+K*k.y,G.z=ue*T.z+K*k.z,G.w=ue*T.w+K*k.w}e.slerpToRef=z;function X(T,k){let M=n(0,0,0,1);return ie(T,k,M),M}e.multiply=X;function ie(T,k,M){M.x=T.x*k.w+T.y*k.z-T.z*k.y+T.w*k.x,M.y=-T.x*k.z+T.y*k.w+T.z*k.x+T.w*k.y,M.z=T.x*k.y-T.y*k.x+T.z*k.w+T.w*k.z,M.w=-T.x*k.x-T.y*k.y-T.z*k.z+T.w*k.w}e.multiplyToRef=ie;function _e(T,k){if(P.lengthSquared(k)===0)return e.Identity();let M=$(),G=T*ir;G*=.5;let K=P.normalize(k);return P.scaleToRef(K,Math.sin(G),K),M.x=K.x,M.y=K.y,M.z=K.z,M.w=Math.cos(G),N(M)}e.fromAngleAxis=_e;function L(T,k,M){let G=e.create(0,0,0,0);return F(T,k,M,G),G}e.fromAxisToRotationQuaternion=L;function F(T,k,M,G){let K=Pt.create();Pt.fromXYZAxesToRef(P.normalize(T),P.normalize(k),P.normalize(M),K),e.fromRotationMatrixToRef(K,G)}e.fromAxisToRotationQuaternionToRef=F;function q(){return n(0,0,0,0)}e.Zero=q;function U(T,k,M=P.Up()){let G=e.Identity();return Z(T,k,M,G),G}e.fromLookAt=U;function Z(T,k,M=P.Up(),G){let K=Pt.Identity();Pt.lookAtLHToRef(T,k,M,K),Pt.invertToRef(K,K),e.fromRotationMatrixToRef(K,G)}e.fromLookAtToRef=Z})(Ye||(Ye={}));var Di;(function(e){function n(g=0,O=0,V=0,x=1){return{r:g,g:O,b:V,a:x}}e.create=n;function i(g){if(g.substring(0,1)!=="#"||g.length!==7&&g.length!==9)return n(0,0,0,1);let O=parseInt(g.substring(1,3),16),V=parseInt(g.substring(3,5),16),x=parseInt(g.substring(5,7),16),S=g.substring(7,9),te=S?parseInt(S,16):255;return e.fromInts(O,V,x,te)}e.fromHexString=i;function t(g,O,V){let x=n(0,0,0,0);return e.lerpToRef(g,O,V,x),x}e.lerp=t;function r(g,O,V,x){x.r=g.r+(O.r-g.r)*V,x.g=g.g+(O.g-g.g)*V,x.b=g.b+(O.b-g.b)*V,x.a=g.a+(O.a-g.a)*V}e.lerpToRef=r;function o(){return n(1,0,0,1)}e.Red=o;function s(){return n(0,1,0,1)}e.Green=s;function c(){return n(0,0,1,1)}e.Blue=c;function a(){return n(0,0,0,1)}e.Black=a;function u(){return n(1,1,1,1)}e.White=u;function E(){return n(.5,0,.5,1)}e.Purple=E;function N(){return n(1,0,1,1)}e.Magenta=N;function A(){return n(1,1,0,1)}e.Yellow=A;function $(){return n(.5,.5,.5,1)}e.Gray=$;function B(){return n(0,1,1,1)}e.Teal=B;function b(){return n(0,0,0,0)}e.Clear=b;function I(g,O=1){return n(g.r,g.g,g.b,O)}e.fromColor3=I;function R(g,O=0){return n(g[O],g[O+1],g[O+2],g[O+3])}e.fromArray=R;function z(g,O,V,x){return n(g/255,O/255,V/255,x/255)}e.fromInts=z;function X(g,O){if(g.length===O*3){let V=[];for(let x=0;x<g.length;x+=3){let S=x/3*4;V[S]=g[x],V[S+1]=g[x+1],V[S+2]=g[x+2],V[S+3]=1}return V}return g}e.checkColors4=X;function ie(g,O,V){V.r=g.r+O.r,V.g=g.g+O.g,V.b=g.b+O.b,V.a=g.a+O.a}e.addToRef=ie;function _e(g,O,V=0){O[V]=g.r,O[V+1]=g.g,O[V+2]=g.b,O[V+3]=g.a}e.toArray=_e;function L(g,O){let V=b();return ie(g,O,V),V}e.add=L;function F(g,O){let V=b();return q(g,O,V),V}e.subtract=F;function q(g,O,V){V.r=g.r-O.r,V.g=g.g-O.g,V.b=g.b-O.b,V.a=g.a-O.a}e.subtractToRef=q;function U(g,O){return n(g.r*O,g.g*O,g.b*O,g.a*O)}e.scale=U;function Z(g,O,V){V.r=g.r*O,V.g=g.g*O,V.b=g.b*O,V.a=g.a*O}e.scaleToRef=Z;function T(g,O,V){V.r+=g.r*O,V.g+=g.g*O,V.b+=g.b*O,V.a+=g.a*O}e.scaleAndAddToRef=T;function k(g,O=0,V=1,x){x.r=Ae.clamp(g.r,O,V),x.g=Ae.clamp(g.g,O,V),x.b=Ae.clamp(g.b,O,V),x.a=Ae.clamp(g.a,O,V)}e.clampToRef=k;function M(g,O){return n(g.r*O.r,g.g*O.g,g.b*O.b,g.a*O.a)}e.multiply=M;function G(g,O,V){V.r=g.r*O.r,V.g=g.g*O.g,V.b=g.b*O.b,V.a=g.a*O.a}e.multiplyToRef=G;function K(g){return"{R: "+g.r+" G:"+g.g+" B:"+g.b+" A:"+g.a+"}"}e.toString=K;function ue(g){let O=g.r||0;return O=O*397^(g.g||0),O=O*397^(g.b||0),O=O*397^(g.a||0),O}e.getHashCode=ue;function de(g){return n(g.r,g.g,g.b,g.a)}e.clone=de;function le(g,O){O.r=g.r,O.g=g.g,O.b=g.b,O.a=g.a}e.copyFrom=le;function he(g,O,V,x,S){S.r=g,S.g=O,S.b=V,S.a=x}e.copyFromFloats=he;function me(g,O,V,x,S){S.r=g,S.g=O,S.b=V,S.a=x}e.set=me;function Re(g){let O=g.r*255|0,V=g.g*255|0,x=g.b*255|0,S=g.a*255|0;return"#"+Ae.toHex(O)+Ae.toHex(V)+Ae.toHex(x)+Ae.toHex(S)}e.toHexString=Re;function Se(g){let O=n();return Ce(g,O),O}e.toLinearSpace=Se;function Ce(g,O){O.r=Math.pow(g.r,fn),O.g=Math.pow(g.g,fn),O.b=Math.pow(g.b,fn),O.a=g.a}e.toLinearSpaceToRef=Ce;function pe(g){let O=n();return ct(g,O),O}e.toGammaSpace=pe;function ct(g,O){O.r=Math.pow(g.r,sn),O.g=Math.pow(g.g,sn),O.b=Math.pow(g.b,sn),O.a=g.a}e.toGammaSpaceToRef=ct})(Di||(Di={}));var Cu;(function(e){function n(x=0,S=0,te=0){return{r:x,g:S,b:te}}e.create=n;function i(x){if(x.substring(0,1)!=="#"||x.length!==7)return n(0,0,0);let S=parseInt(x.substring(1,3),16),te=parseInt(x.substring(3,5),16),Ie=parseInt(x.substring(5,7),16);return r(S,te,Ie)}e.fromHexString=i;function t(x,S=0){return n(x[S],x[S+1],x[S+2])}e.fromArray=t;function r(x,S,te){return n(x/255,S/255,te/255)}e.fromInts=r;function o(x,S,te){let Ie=n(0,0,0);return e.lerpToRef(x,S,te,Ie),Ie}e.lerp=o;function s(x,S,te,Ie){Ie.r=x.r+(S.r-x.r)*te,Ie.g=x.g+(S.g-x.g)*te,Ie.b=x.b+(S.b-x.b)*te}e.lerpToRef=s;function c(){return n(1,0,0)}e.Red=c;function a(){return n(0,1,0)}e.Green=a;function u(){return n(0,0,1)}e.Blue=u;function E(){return n(0,0,0)}e.Black=E;function N(){return n(1,1,1)}e.White=N;function A(){return n(.5,0,.5)}e.Purple=A;function $(){return n(1,0,1)}e.Magenta=$;function B(){return n(1,1,0)}e.Yellow=B;function b(){return n(.5,.5,.5)}e.Gray=b;function I(){return n(0,1,1)}e.Teal=I;function R(){return n(Math.random(),Math.random(),Math.random())}e.Random=R;function z(x){return"{R: "+x.r+" G:"+x.g+" B:"+x.b+"}"}e.toString=z;function X(x){let S=x.r||0;return S=S*397^(x.g||0),S=S*397^(x.b||0),S}e.getHashCode=X;function ie(x,S,te=0){S[te]=x.r,S[te+1]=x.g,S[te+2]=x.b}e.toArray=ie;function _e(x,S=1){return Di.create(x.r,x.g,x.b,S)}e.toColor4=_e;function L(x){let S=new Array;return ie(x,S,0),S}e.asArray=L;function F(x){return x.r*.3+x.g*.59+x.b*.11}e.toLuminance=F;function q(x,S){return n(x.r*S.r,x.g*S.g,x.b*S.b)}e.multiply=q;function U(x,S,te){te.r=x.r*S.r,te.g=x.g*S.g,te.b=x.b*S.b}e.multiplyToRef=U;function Z(x,S){return S&&x.r===S.r&&x.g===S.g&&x.b===S.b}e.equals=Z;function T(x,S,te,Ie){return x.r===S&&x.g===te&&x.b===Ie}e.equalsFloats=T;function k(x,S){return n(x.r*S,x.g*S,x.b*S)}e.scale=k;function M(x,S,te){te.r=x.r*S,te.g=x.g*S,te.b=x.b*S}e.scaleToRef=M;function G(x,S,te){te.r+=x.r*S,te.g+=x.g*S,te.b+=x.b*S}e.scaleAndAddToRef=G;function K(x,S=0,te=1,Ie){Ie.r=Ae.clamp(x.r,S,te),Ie.g=Ae.clamp(x.g,S,te),Ie.b=Ae.clamp(x.b,S,te)}e.clampToRef=K;function ue(x,S=0,te=1){let Ie=e.Black();return K(x,S,te,Ie),Ie}e.clamp=ue;function de(x,S){return n(x.r+S.r,x.g+S.g,x.b+S.b)}e.add=de;function le(x,S,te){te.r=x.r+S.r,te.g=x.g+S.g,te.b=x.b+S.b}e.addToRef=le;function he(x,S){return n(x.r-S.r,x.g-S.g,x.b-S.b)}e.subtract=he;function me(x,S,te){te.r=x.r-S.r,te.g=x.g-S.g,te.b=x.b-S.b}e.subtractToRef=me;function Re(x){return n(x.r,x.g,x.b)}e.clone=Re;function Se(x,S){S.r=x.r,S.g=x.g,S.b=x.b}e.copyFrom=Se;function Ce(x,S,te,Ie){x.r=S,x.g=te,x.b=Ie}e.set=Ce;function pe(x){let S=x.r*255|0,te=x.g*255|0,Ie=x.b*255|0;return"#"+Ae.toHex(S)+Ae.toHex(te)+Ae.toHex(Ie)}e.toHexString=pe;function ct(x){let S=n();return g(x,S),S}e.toLinearSpace=ct;function g(x,S){S.r=Math.pow(x.r,fn),S.g=Math.pow(x.g,fn),S.b=Math.pow(x.b,fn)}e.toLinearSpaceToRef=g;function O(x){let S=n();return V(x,S),S}e.toGammaSpace=O;function V(x,S){S.r=Math.pow(x.r,sn),S.g=Math.pow(x.g,sn),S.b=Math.pow(x.b,sn)}e.toGammaSpaceToRef=V})(Cu||(Cu={}));var cr=(r=>(r[r.NONE=0]="NONE",r[r.RED=1]="RED",r[r.YELLOW=2]="YELLOW",r[r.GREEN=3]="GREEN",r))(cr||{}),Sp={1:{name:"Red",model:"models/redTap.glb",position:P.create(.368,0,.31)},2:{name:"Yellow",model:"models/yellowTap.glb",position:P.create(0,0,.31)},3:{name:"Green",model:"models/greenTap.glb",position:P.create(-.368,0,.31)}};function Fi(e){return Sp[e]}var Wt=j.defineComponent("BeerGlass",{beingFilled:be.Boolean,filled:be.Boolean,beerType:be.EnumNumber(cr,0),drinking:be.Boolean}),Li=j.defineComponent("PickedUp",{child:be.Entity}),vo=j.defineComponent("TapComponent",{pouringTime:be.Number,pouring:be.Boolean,beerType:be.EnumNumber(cr,0)}),Uo=j.defineComponent("TapBase",{beerType:be.EnumNumber(cr,0)});function Vt(e,n){let i=j.addEntity();Mn.create(i,{src:e,visibleMeshesCollisionMask:jr.CL_POINTER,invisibleMeshesCollisionMask:void 0}),Le.create(i,{position:n}),Ct.create(i,{states:[{clip:"Blank",name:"Blank",playing:!0},{clip:"PourRed",name:"PourRed",loop:!1},{clip:"PourYellow",name:"PourYellow",loop:!1},{clip:"PourGreen",name:"PourGreen",loop:!1}]}),Wt.create(i),vn.create(i,{pointerEvents:[{eventType:et.PET_DOWN,eventInfo:{hoverText:"Pick up",maxDistance:5,button:Rt.IA_PRIMARY}}]}),St.create(i,{componentIds:[Le.componentId,Ct.componentId,Ci.componentId]})}function Wi(e,n){let i=j.addEntity(),t=Fi(e);vo.create(i,{beerType:e}),Mn.create(i,{src:t.model}),Le.create(i,{parent:n}),Ct.create(i,{states:[{clip:"Blank",name:"Blank",playing:!0,loop:!1},{clip:"Pour",name:"Pour",loop:!1}]}),vn.create(i,{pointerEvents:[{eventType:et.PET_DOWN,eventInfo:{hoverText:"Pour",maxDistance:5,button:Rt.IA_PRIMARY}}]}),St.create(i,{componentIds:[Ct.componentId]});let r=P.add(t.position,P.create(0,.05,0)),o=j.addEntity();Le.create(o,{parent:i,position:r}),Uo.create(o,{beerType:e});let s=j.addEntity();Le.create(s,{parent:o,scale:P.scale(P.One(),.33),rotation:Ye.fromEulerDegrees(90,0,0)}),Ou.setPlane(s),vn.create(s,{pointerEvents:[{eventType:et.PET_DOWN,eventInfo:{hoverText:"Place mug",button:Rt.IA_PRIMARY}}]}),St.create(s,{componentIds:[Le.componentId]})}function Do(e,n=!1,i){let t=j.addEntity();return bu.create(t,{audioClipUrl:e,loop:n,playing:!0}),Le.create(t,{position:i}),t}function Fo(){return Le.getOrNull(j.PlayerEntity)?.position||P.create()}function Pu(e){return Le.getOrNull(e)?.parent||j.RootEntity}function zu(){for(let[e,n]of j.getEntitiesWith(Li)){let i=Oo.getInputCommand(Rt.IA_PRIMARY,et.PET_DOWN);if(i){let o=i.hit?.position||Fo(),s=i.hit?.entityId,c=Pu(s),a=!1;if(Uo.getOrNull(c))Le.createOrReplace(n.child,{parent:c}),a=!0;else{let u=P.subtract(P.Up(),i.hit?.normalHit||P.Zero());P.length(u)<.01&&(Le.createOrReplace(n.child,{position:o}),a=!0)}a&&(Li.deleteFrom(e),Do("sounds/putDown.mp3",!1,o))}let t=Wt.get(n.child),r=Oo.getInputCommand(Rt.IA_SECONDARY,et.PET_DOWN);t.filled&&r&&(Wt.getMutable(n.child).filled=!1,Ct.playSingleAnimation(n.child,"Blank"),Do("sounds/swallow.mp3",!1,Fo()));return}for(let[e,n]of j.getEntitiesWith(Wt))if(!n.beingFilled&&Oo.isTriggered(Rt.IA_PRIMARY,et.PET_DOWN,e)){let i=j.addEntity();Li.create(i,{child:e}),Ci.create(i,{anchorPointId:Ir.AAPT_RIGHT_HAND}),Le.createOrReplace(e,{position:P.create(0,.225,0),rotation:Ye.fromEulerDegrees(180,-90,-60),parent:i}),Do("sounds/pickUp.mp3",!1,Fo())}}function $a(e){for(let[n,i,t,r]of j.getEntitiesWith(Wt,Ct,Le))if(r.parent&&Uo.getOrNull(r.parent)?.beerType===e)return n}function Mu(e){for(let[n,i]of j.getEntitiesWith(vo))if(i.pouring){if(Ae.withinEpsilon(i.pouringTime,0)){Ct.playSingleAnimation(n,"Pour"),Do("sounds/beerPump.mp3",!1,Fo());let r=$a(i.beerType);r&&Ct.playSingleAnimation(r,`Pour${Fi(i.beerType).name}`)}let t=vo.getMutable(n);if(t.pouringTime+=e,t.pouringTime>=2.5){t.pouring=!1,t.pouringTime=0;let r=$a(t.beerType);if(r){let o=Wt.getMutable(r);o.beerType=t.beerType,o.beingFilled=!1,o.filled=!0}}}else if(Oo.isTriggered(Rt.IA_PRIMARY,et.PET_DOWN,n)){let t=$a(i.beerType);if(!t)return;let r=Wt.getMutable(t);if(r.filled)return;let o=vo.getMutable(n);o.pouring=!0,o.pouringTime=0,r.beingFilled=!0,r.beerType=o.beerType}}var Hu=require("~system/Runtime");var Za=require("~system/EngineApi");function vu(e){let n=it.getHeader(e);return n?n.type===ee.PUT_COMPONENT?Lt.read(e):n.type===ee.DELETE_COMPONENT?Ft.read(e):n.type===ee.APPEND_VALUE?Zt.read(e):n.type===ee.DELETE_ENTITY?zn.read(e):null:null}function*Lo(e,n,i){let t=new Oe(n),r;for(;r=vu(t);){let o=`0x${r.entityId.toString(16)}`,s=`${e}: ${ee[r.type]} e=${o}`;if(r.type===ee.DELETE_ENTITY&&(yield`${s}`),r.type===ee.PUT_COMPONENT||r.type===ee.DELETE_COMPONENT||r.type===ee.APPEND_VALUE){let{componentId:c,timestamp:a}=r,u="data"in r?r.data:void 0;try{let E=i.getComponent(c);yield`${s} c=${E.componentName} t=${a} data=${JSON.stringify(u&&E.schema.deserialize(new Oe(u))||null)}`}catch{yield`${s} c=${c} t=${a} data=?`}}else r.type===ee.DELETE_ENTITY?yield s:yield`${s} Unknown CrdtMessageType`}}function Uu(){let e=new Oe,n=new Set(Array.from(j.getEntitiesWith(St)).map(i=>i[0]));for(let i of j.componentsIter())i.dumpCrdtStateToBuffer(e,t=>n.has(t));return e.toBinary()}function Du(e){let n=new Oe;return n.writeUtf8String(e),n.readBuffer()}function Ya(e,n){let i=new Uint8Array(n.byteLength+1);return i.set([e]),i.set(n,1),i}function Vi(e,n){return j.addNetworkManager(e,n)}function sr(e){if(!Hi||e.componentId===xu.componentId)return!1;let[n]=gt.fromEntityId(e.entityId);if(n<Jt||n<Cn)return!1;if(e.type===ee.DELETE_ENTITY||e.timestamp<=1)return!0;let i=St.getOrNull(e.entityId);return i?!!(e.componentId&&i.componentIds.includes(e.componentId)):!1}var Gi=new Set;async function Fu(){j.addTransport({send:async i=>{i.byteLength&&globalThis.updateCRDTState(Uu())},filter:sr}),globalThis.registerClientObserver(i=>{let{type:t}=i;if(t==="open"){let{clientId:r,client:o}=i,s={filter:c=>Gi.has(r)?sr(c):!1,send:async c=>{if(c.byteLength>0&&await o.sendCrdtMessage(c),s.onmessage){let a=o.getMessages();for(let u of a){let E=Array.from(Lo("RecievedMessages",u,j));E.length&&console.log(E),s.onmessage(u)}}}};j.addTransport(s),Gi.add(i.clientId)}else t==="close"&&Gi.delete(i.clientId);Ja.createOrReplace(n,{usersId:[...Gi.values()].map(String)})});let e=Vi(2560,[2561,2560+512]),n=e.addEntity();return St.create(n,{componentIds:[Ja.componentId]}),e}var Lu=require("~system/SignedFetch");var Fn;(function(e){e[e.Auth=1]="Auth",e[e.Init=2]="Init",e[e.Crdt=3]="Crdt"})(Fn||(Fn={}));async function Wu(e){let n=[];return new Promise((i,t)=>{try{let r=new WebSocket(e);r.binaryType="arraybuffer",r.onopen=async()=>{console.log("WS Server Sync connected");let{headers:o}=await(0,Lu.getHeaders)({url:e,init:{headers:{}}});r.send(Ya(Fn.Auth,Du(JSON.stringify(o))));let s={filter:sr,send:async c=>{if(r.send(Ya(Fn.Crdt,c)),n&&n.length&&s.onmessage)for(let a of n){let u=Array.from(Lo("RecievedMessages",a,j));u.length&&console.log(u),s.onmessage(a)}n.length=0}};j.addTransport(s)},r.onmessage=o=>{if(o.data.byteLength){let s=0,c=new Uint8Array(o.data),a=new DataView(c.buffer),u=a.getUint8(s);if(s+=1,u===Fn.Crdt)n.push(c.subarray(s));else if(u===Fn.Init){let E=a.getUint32(s);s+=4;let N=a.getUint32(s);s+=4;let A=a.getUint32(s);s+=4,i(Vi(A,[E,E+N])),n.push(c.subarray(s))}}},r.onerror=o=>{console.error(o),t(o)}}catch(r){t(r)}})}var Hi=!1;async function Vu(e){if(Hi)throw new Error("Transport is already created");let n=await(Za.isServer&&(await(0,Za.isServer)({})).isServer?Fu():Wu(e));return Hi=!0,n}var Ja=j.defineComponent("chore:network:players",{usersId:be.Array(be.String)});var qa=require("~system/EngineApi"),wp=j.defineComponent("server:network-entity",{id:be.String});async function Ap(e){return new Promise(n=>{function i(){for(let[t,r]of j.getEntitiesWith(wp))if(r.id===e){j.removeSystem(i),n(t);return}}j.addSystem(i)})}async function ji(){let n=(await(0,Hu.getRealm)({})).realmInfo?.isPreview?"ws://127.0.0.1:3000/ws/localScene":"wss://scene-state-server.decentraland.org/ws/MaximoCossetti.dcl.eth",i=await Vu(n),t=qa.isServer&&(await(0,qa.isServer)({})).isServer,r=j.addEntity();Le.create(r,{position:P.create(0,0,0)}),Mn.create(r,{src:"models/tables.glb"}),vn.create(r,{pointerEvents:[{eventType:et.PET_DOWN,eventInfo:{showFeedback:!1}}]});let o=j.addEntity();Le.create(o,{position:P.create(0,0,0)}),Mn.create(o,{src:"models/baseDarkWithCollider.glb"}),vn.create(o,{pointerEvents:[{eventType:et.PET_DOWN,eventInfo:{showFeedback:!1}}]});let s=j.addEntity();if(Mn.create(s,{src:"models/beerDispenser.glb"}),Le.create(s,{position:P.create(8,1.25,7.5)}),t){Wi(1,s),Wi(3,s),Wi(2,s);let c="models/beerGlass.glb";Vt(c,P.create(8.3,1.25,8)),Vt(c,P.create(7.8,1.25,8.3)),Vt(c,P.create(1.86,.8,13.4)),Vt(c,P.create(2.3,.8,14)),Vt(c,P.create(13.7,.8,13.8)),Vt(c,P.create(13.9,.8,14.3)),Vt(c,P.create(14.5,.8,2.5)),Vt(c,P.create(13.7,.8,1.9)),Vt(c,P.create(2.4,.8,1.5))}else j.addSystem(zu),j.addSystem(Mu)}var un=require("~system/EngineApi");function Gu(e){async function n(t){let r=await e.crdtSendToRenderer({data:new Uint8Array(t)});if(r&&r.data&&r.data.length&&i.onmessage)for(let o of r.data)i.onmessage(o)}let i={async send(t){try{await n(t)}catch(r){console.error(r);debugger}},filter(t){return t.componentId>va?!1:!!t}};return i}var Xa=class{constructor(n,i=!1,t,r){this.initalize(n,i,t,r)}initalize(n,i=!1,t,r){return this.mask=n,this.skipNextObservers=i,this.target=t,this.currentTarget=r,this}},Ka=class{constructor(n,i,t=null){this.callback=n,this.mask=i,this.scope=t,this.unregisterOnNextCall=!1,this._willBeUnregistered=!1}},at=class e{constructor(n){this._observers=new Array,this._onObserverAdded=null,this._eventState=new Xa(0),n&&(this._onObserverAdded=n)}add(n,i=-1,t=!1,r=null,o=!1){if(!n)return null;let s=new Ka(n,i,r);return s.unregisterOnNextCall=o,t?this._observers.unshift(s):this._observers.push(s),this._onObserverAdded&&this._onObserverAdded(s),s}addOnce(n){return this.add(n,void 0,void 0,void 0,!0)}remove(n){return n&&this._observers.indexOf(n)!==-1?(this._deferUnregister(n),!0):!1}removeCallback(n,i){for(let t=0;t<this._observers.length;t++)if(this._observers[t].callback===n&&(!i||i===this._observers[t].scope))return this._deferUnregister(this._observers[t]),!0;return!1}notifyObservers(n,i=-1,t,r){if(!this._observers.length)return!0;let o=this._eventState;o.mask=i,o.target=t,o.currentTarget=r,o.skipNextObservers=!1,o.lastReturnValue=n;for(let s of this._observers)if(!s._willBeUnregistered&&(s.mask&i&&(s.scope?o.lastReturnValue=s.callback.apply(s.scope,[n,o]):o.lastReturnValue=s.callback(n,o),s.unregisterOnNextCall&&this._deferUnregister(s)),o.skipNextObservers))return!1;return!0}notifyObserversWithPromise(n,i=-1,t,r){let o=Promise.resolve(n);if(!this._observers.length)return o;let s=this._eventState;return s.mask=i,s.target=t,s.currentTarget=r,s.skipNextObservers=!1,this._observers.forEach(c=>{s.skipNextObservers||c._willBeUnregistered||c.mask&i&&(c.scope?o=o.then(a=>(s.lastReturnValue=a,c.callback.apply(c.scope,[n,s]))):o=o.then(a=>(s.lastReturnValue=a,c.callback(n,s))),c.unregisterOnNextCall&&this._deferUnregister(c))}),o.then(()=>n)}notifyObserver(n,i,t=-1){let r=this._eventState;r.mask=t,r.skipNextObservers=!1,n.callback(i,r)}hasObservers(){return this._observers.length>0}clear(){this._observers=new Array,this._onObserverAdded=null}clone(){let n=new e;return n._observers=this._observers.slice(0),n}hasSpecificMask(n=-1){for(let i of this._observers)if(i.mask&n||i.mask===n)return!0;return!1}_deferUnregister(n){n.unregisterOnNextCall=!1,n._willBeUnregistered=!0,Promise.resolve().then.bind(Promise.resolve())(async()=>this._remove(n)).catch(console.error)}_remove(n){if(!n)return!1;let i=this._observers.indexOf(n);return i!==-1?(this._observers.splice(i,1),!0):!1}};var ju=require("~system/EngineApi"),Np=ju.subscribe;function zt(e){return()=>{Np({eventId:e}).catch(console.error)}}var Op=new at(zt("onEnterScene"));var Bp=new at(zt("onLeaveScene"));var Cp=new at(zt("sceneStart")),Pp=new at(zt("playerExpression")),zp=new at(zt("videoEvent")),Mp=new at(zt("profileChanged")),vp=new at(zt("playerConnected")),Up=new at(zt("playerDisconnected")),Dp=new at(zt("onRealmChanged")),Fp=new at(zt("playerClicked")),Lp=new at(zt("comms"));async function $u(e){let{events:n}=await e({actions:[]});for(let i of n)if(i.generic){let t=JSON.parse(i.generic.eventData);switch(i.generic.eventId){case"onEnterScene":{Op.notifyObservers(t);break}case"onLeaveScene":{Bp.notifyObservers(t);break}case"sceneStart":{Cp.notifyObservers(t);break}case"playerExpression":{Pp.notifyObservers(t);break}case"videoEvent":{let r=t;zp.notifyObservers(r);break}case"profileChanged":{Mp.notifyObservers(t);break}case"playerConnected":{vp.notifyObservers(t);break}case"playerDisconnected":{Up.notifyObservers(t);break}case"onRealmChanged":{Dp.notifyObservers(t);break}case"playerClicked":{Fp.notifyObservers(t);break}case"comms":{Lp.notifyObservers(t);break}}}}var Qa={};var $i=[],ec={getCompositeOrNull(e,n){let i=Qa[e];if(i){try{if(i instanceof Uint8Array){let t=cn.fromBinary(i);$i.push({src:e,composite:t})}else if(typeof i=="string"){let t=cn.fromJson(JSON.parse(i));$i.push({src:e,composite:t})}else if(typeof i=="object"){let t=cn.fromJson(i);$i.push({src:e,composite:t})}}catch(t){console.error(t)}delete Qa[e]}return $i.find(t=>t.src===e)||null}};function Yu(e){async function n(t){if(!e.crdtSendNetwork)return;let r=await e.crdtSendNetwork({data:new Uint8Array(t)});if(r&&r.data&&r.data.length&&i.onmessage)for(let o of r.data)i.onmessage(o)}let i={async send(t){try{let r=Array.from(Lo("SyncNetwork",t,j));r.length&&console.log(r),await n(t)}catch(r){console.error(r)}},filter(t){if(t.componentId===1063||t.entityId<=Jt)return!1;if(t.timestamp<=1)return!0;let r=St.getOrNull(t.entityId);return r?!!(t.componentId&&r.componentIds.includes(t.componentId)):!1}};return i}var Yi=Gu({crdtSendToRenderer:un.crdtSendToRenderer});j.addTransport(Yi);var Ju=!1;function Wp(){Ju||(Ju=!0,j.addTransport(Yu({crdtSendNetwork:un.crdtSendNetwork})))}async function Vp(e){j.seal(),await j.update(e),await $u(un.sendBatch)}async function Hp(){let e=await(0,un.crdtGetState)({data:new Uint8Array});if(!e.hasEntities){let n=ec.getCompositeOrNull("main.composite");if(n)try{cn.instance(j,n,ec)}catch(i){console.log("Warning: main.composite couldn't be instanced."),console.error(i)}}if(Yi.onmessage&&e&&e.data&&e.data.length)for(let n of e.data)Yi.onmessage(n)}if(ji!==void 0){let e=function(){let n=ji();n&&typeof n=="object"&&typeof n.then=="function"&&n.catch(console.error),j.removeSystem(e)};j.addSystem(e,1/0)}
/*! Bundled license information:

long/index.js:
  (**
   * @license
   * Copyright 2009 The Closure Library Authors
   * Copyright 2020 Daniel Wirtz / The long.js Authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * SPDX-License-Identifier: Apache-2.0
   *)
*/
